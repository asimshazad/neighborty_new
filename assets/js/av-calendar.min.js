!function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(O,L){function d(e){return M(e,ve)}function r(e,t){t.left&&e.css({"border-left-width":1,"margin-left":t.left-1}),t.right&&e.css({"border-right-width":1,"margin-right":t.right-1})}function a(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function p(){O("body").addClass("fc-not-allowed")}function f(){O("body").removeClass("fc-not-allowed")}function n(s,e,t){var r=Math.floor(e/s.length),a=Math.floor(e-r*(s.length-1)),o=[],l=[],c=[],d=0;i(s),s.each(function(e,t){var n=e===s.length-1?a:r,i=O(t).outerHeight(!0);i<n?(o.push(t),l.push(i),c.push(O(t).height())):d+=i}),t&&(e-=d,r=Math.floor(e/o.length),a=Math.floor(e-r*(o.length-1))),O(o).each(function(e,t){var n=e===o.length-1?a:r,i=l[e],s=n-(i-c[e]);i<n&&O(t).height(s)})}function i(e){e.height("")}function e(e){var i=0;return e.find("> *").each(function(e,t){var n=O(t).outerWidth();i<n&&(i=n)}),i++,e.width(i),i}function t(e,t){var n,i=e.add(t);return i.css({position:"relative",left:-1}),n=e.outerHeight()-t.outerHeight(),i.css({position:"",left:""}),n}function u(e){var t=e.css("position"),n=e.parents().filter(function(){var e=O(this);return/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&n.length?n:O(e[0].ownerDocument||document)}function h(e,t){var n=e.offset(),i=n.left-(t?t.left:0),s=n.top-(t?t.top:0);return{left:i,right:i+e.outerWidth(),top:s,bottom:s+e.outerHeight()}}function s(e,t){var n=e.offset(),i=o(e),s=n.left+c(e,"border-left-width")+i.left-(t?t.left:0),r=n.top+c(e,"border-top-width")+i.top-(t?t.top:0);return{left:s,right:s+e[0].clientWidth,top:r,bottom:r+e[0].clientHeight}}function o(e){var t,n,i,s=e.innerWidth()-e[0].clientWidth,r=e.innerHeight()-e[0].clientHeight;return s=l(s),t={left:0,right:0,top:0,bottom:r=l(r)},null===ye&&(n=O("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),i=n.children().offset().left>n.offset().left,n.remove(),ye=i),ye&&"rtl"==e.css("direction")?t.left=s:t.right=s,t}function l(e){return e=Math.max(0,e),Math.round(e)}function c(e,t){return parseFloat(e.css(t))||0}function m(e){return 1==e.which&&!e.ctrlKey}function g(e){var t=e.originalEvent.touches;return t&&t.length?t[0].pageX:e.pageX}function v(e){var t=e.originalEvent.touches;return t&&t.length?t[0].pageY:e.pageY}function y(e){return/^touch/.test(e.type)}function b(e){e.addClass("fc-unselectable").on("selectstart",w)}function w(e){e.preventDefault()}function _(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom&&n}function S(e){var t,n,i=[],s=[];for("string"==typeof e?s=e.split(/\s*,\s*/):"function"==typeof e?s=[e]:O.isArray(e)&&(s=e),t=0;t<s.length;t++)"string"==typeof(n=s[t])?i.push("-"==n.charAt(0)?{field:n.substring(1),order:-1}:{field:n,order:1}):"function"==typeof n&&i.push({func:n});return i}function T(e,t,n){var i,s;for(i=0;i<n.length;i++)if(s=D(e,t,n[i]))return s;return 0}function D(e,t,n){return n.func?n.func(e,t):x(e[n.field],t[n.field])*(n.order||1)}function x(e,t){return e||t?null==t?-1:null==e?1:"string"===O.type(e)||"string"===O.type(t)?String(e).localeCompare(String(t)):e-t:0}function E(e,t){var n,i,s,r,a=e.start,o=e.end,l=t.start,c=t.end;if(l<o&&a<c)return l<=a?(n=a.clone(),s=!0):(n=l.clone(),s=!1),o<=c?(i=o.clone(),r=!0):(i=c.clone(),r=!1),{start:n,end:i,isStart:s,isEnd:r}}function z(e,t){return L.duration({days:e.clone().stripTime().diff(t.clone().stripTime(),"days"),ms:e.time()-t.time()})}function F(e,t,n){return L.duration(Math.round(e.diff(t,n,!0)),n)}function C(e,t){var n,i,s,r,a,o;for(n=0;n<we.length&&(i=we[n],r=i,a=e,!(1<=(s=null!=(o=t)?o.diff(a,r,!0):L.isDuration(a)?a.as(r):a.end.diff(a.start,r,!0))&&V(s)));n++);return i}function $(e,t){var n,i;return k(e)||k(t)?e/t:(n=e.asMonths(),i=t.asMonths(),1<=Math.abs(n)&&V(n)&&1<=Math.abs(i)&&V(i)?n/i:e.asDays()/t.asDays())}function k(e){return Boolean(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}function A(e){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}function M(e,t){var n,i,s,r,a,o,l={};if(t)for(n=0;n<t.length;n++){for(i=t[n],s=[],r=e.length-1;0<=r;r--)if("object"==typeof(a=e[r][i]))s.unshift(a);else if(void 0!==a){l[i]=a;break}s.length&&(l[i]=M(s))}for(n=e.length-1;0<=n;n--)for(i in o=e[n])i in l||(l[i]=o[i]);return l}function R(e){var t=function(){};return t.prototype=e,new t}function H(e,t){for(var n in e)I(e,n)&&(t[n]=e[n])}function I(e,t){return _e.call(e,t)}function P(e,t,n){if(O.isFunction(e)&&(e=[e]),e){var i,s;for(i=0;i<e.length;i++)s=e[i].apply(t,n)||s;return s}}function N(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}function B(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function j(e){return e.replace(/&.*?;/g,"")}function q(e){var n=[];return O.each(e,function(e,t){null!=t&&n.push(e+":"+t)}),n.join(";")}function G(e){return e.charAt(0).toUpperCase()+e.slice(1)}function W(e,t){return e-t}function V(e){return e%1==0}function Y(e,t){var n=e[t];return function(){return n.apply(e,arguments)}}function U(t,n,i){var s,r,a,o,l,c=function(){var e=+new Date-o;e<n?s=setTimeout(c,n-e):(s=null,i||(l=t.apply(a,r),a=r=null))};return function(){a=this,r=arguments,o=+new Date;var e=i&&!s;return s||(s=setTimeout(c,n)),e&&(l=t.apply(a,r),a=r=null),l}}function Z(e,t,n){var i,s,r,a,o,l=e[0],c=1==e.length&&"string"==typeof l;return L.isMoment(l)||(o=l,"[object Date]"===Object.prototype.toString.call(o)||o instanceof Date)||void 0===l?a=L.apply(null,e):(s=i=!1,c?Se.test(l)?(e=[l+="-01"],s=i=!0):(r=Te.exec(l))&&(i=!r[5],s=!0):O.isArray(l)&&(s=!0),a=t||i?L.utc.apply(L,e):L.apply(null,e),i?(a._ambigTime=!0,a._ambigZone=!0):n&&(s?a._ambigZone=!0:c&&a.utcOffset(l))),a._fullCalendar=!0,a}function Q(){}function X(e,t){H(t,e.prototype)}function K(e){var t=O.Deferred(),i=t.promise();if("function"==typeof e&&e(function(e){K.immediate&&(i._value=e),t.resolve(e)},function(){t.reject()}),K.immediate){var s=i.then;i.then=function(e,t){var n=i.state();if("resolved"===n){if("function"==typeof e)return K.resolve(e(i._value))}else if("rejected"===n&&"function"==typeof t)return t(),i;return s.call(i,e,t)}}return i}function J(e){function t(n){return new K(function(e){var t=function(){K.resolve(n()).then(e).then(function(){i.shift(),i.length&&i[0]()})};i.push(t),1===i.length&&t()})}var i=[];this.add="number"==typeof e?U(t,e):t,this.addQuickly=t}function ee(e,t){return!e&&!t||!(!e||!t)&&e.component===t.component&&te(e,t)&&te(t,e)}function te(e,t){for(var n in e)if(!/^(component|left|right|top|bottom)$/.test(n)&&e[n]!==t[n])return!1;return!0}function ne(e){return{start:e.start.clone(),end:e.end?e.end.clone():null,allDay:e.allDay}}function ie(e){var t=se(e);return"background"===t||"inverse-background"===t}function se(e){return N((e.source||{}).rendering,e.rendering)}function re(e,t){return e.start-t.start}function ae(e,t){var n,i;for(n=0;n<t.length;n++)if((i=t[n]).leftCol<=e.rightCol&&i.rightCol>=e.leftCol)return!0;return!1}function oe(e,t){return e.leftCol-t.leftCol}function le(e){var t,n,i=e.forwardSegs,s=0;if(void 0===e.forwardPressure){for(t=0;t<i.length;t++)le(n=i[t]),s=Math.max(s,1+n.forwardPressure);e.forwardPressure=s}}function ce(e,t,n){n=n||[];for(var i=0;i<t.length;i++)s=e,r=t[i],s.bottom>r.top&&s.top<r.bottom&&n.push(t[i]);var s,r;return n}function de(e){this.items=e||[]}function ue(p,i){function t(){s&&(s.remove(),s=e.el=null)}function n(e){var n=O('<div class="fc-'+e+'"/>'),t=i.layout[e];return t&&O.each(t.split(" "),function(e){var t,u=O(),h=!0;O.each(this.split(","),function(e,t){var n,i,s,r,a,o,l,c,d;"title"==t?(u=u.add(O("<h2>&nbsp;</h2>")),h=!1):((n=(p.options.customButtons||{})[t])?(s=function(e){n.click&&n.click.call(d[0],e)},r="",a=n.text):(i=p.getViewSpec(t))?(s=function(){p.changeView(t)},m.push(t),r=i.buttonTextOverride,a=i.buttonTextDefault):p[t]&&(s=function(){p[t]()},r=(p.overrides.buttonText||{})[t],a=p.options.buttonText[t]),s&&(o=n?n.themeIcon:p.options.themeButtonIcons[t],l=n?n.icon:p.options.buttonIcons[t],c=r?B(r):o&&p.options.theme?"<span class='ui-icon ui-icon-"+o+"'></span>":l&&!p.options.theme?"<span class='fc-icon fc-icon-"+l+"'></span>":B(a),d=O('<button type="button" class="'+["fc-"+t+"-button",f+"-button",f+"-state-default"].join(" ")+'">'+c+"</button>").click(function(e){d.hasClass(f+"-state-disabled")||(s(e),(d.hasClass(f+"-state-active")||d.hasClass(f+"-state-disabled"))&&d.removeClass(f+"-state-hover"))}).mousedown(function(){d.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){d.removeClass(f+"-state-down")}).hover(function(){d.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){d.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),u=u.add(d)))}),h&&u.first().addClass(f+"-corner-left").end().last().addClass(f+"-corner-right").end(),1<u.length?(t=O("<div/>"),h&&t.addClass("fc-button-group"),t.append(u),n.append(t)):n.append(u)}),n}var e=this;e.setToolbarOptions=function(e){i=e},e.render=function(){var e=i.layout;f=p.options.theme?"ui":"fc",e?(s?s.empty():s=this.el=O("<div class='fc-toolbar "+i.extraClasses+"'/>"),s.append(n("left")).append(n("right")).append(n("center")).append('<div class="fc-clear"/>')):t()},e.removeElement=t,e.updateTitle=function(e){s&&s.find("h2").text(e)},e.activateButton=function(e){s&&s.find(".fc-"+e+"-button").addClass(f+"-state-active")},e.deactivateButton=function(e){s&&s.find(".fc-"+e+"-button").removeClass(f+"-state-active")},e.disableButton=function(e){s&&s.find(".fc-"+e+"-button").prop("disabled",!0).addClass(f+"-state-disabled")},e.enableButton=function(e){s&&s.find(".fc-"+e+"-button").prop("disabled",!1).removeClass(f+"-state-disabled")},e.getViewsWithButtons=function(){return m},e.el=null;var s,f,m=[]}function he(n){O.each(Xe,function(e,t){null==n[e]&&(n[e]=t(n))})}function pe(e){return L.localeData(e)||L.localeData("en")}function fe(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}var me=O.fullCalendar={version:"3.2.0",internalApiVersion:8},ge=me.views={};O.fn.fullCalendar=function(r){var a=Array.prototype.slice.call(arguments,1),o=this;return this.each(function(e,t){var n,i=O(t),s=i.data("fullCalendar");"string"==typeof r?s&&O.isFunction(s[r])&&(n=s[r].apply(s,a),e||(o=n),"destroy"===r&&i.removeData("fullCalendar")):s||(s=new Ye(i,r),i.data("fullCalendar",s),s.render())}),o};var ve=["header","footer","buttonText","buttonIcons","themeButtonIcons"];me.intersectRanges=E,me.applyAll=P,me.debounce=U,me.isInt=V,me.htmlEscape=B,me.cssToStr=q,me.proxy=Y,me.capitaliseFirstLetter=G,me.getOuterRect=h,me.getClientRect=s,me.getContentRect=function(e,t){var n=e.offset(),i=n.left+c(e,"border-left-width")+c(e,"padding-left")-(t?t.left:0),s=n.top+c(e,"border-top-width")+c(e,"padding-top")-(t?t.top:0);return{left:i,right:i+e.width(),top:s,bottom:s+e.height()}},me.getScrollbarWidths=o;var ye=null;me.preventDefault=w,me.intersectRects=_,me.parseFieldSpecs=S,me.compareByFieldSpecs=T,me.compareByFieldSpec=D,me.flexibleCompare=x,me.computeIntervalUnit=C,me.divideRangeByDuration=function(e,t,n){var i;return k(n)?(t-e)/n:(i=n.asMonths(),1<=Math.abs(i)&&V(i)?t.diff(e,"months",!0)/i:t.diff(e,"days",!0)/n.asDays())},me.divideDurationByDuration=$,me.multiplyDuration=function(e,t){var n;return k(e)?L.duration(e*t):(n=e.asMonths(),1<=Math.abs(n)&&V(n)?L.duration({months:n*t}):L.duration({days:e.asDays()*t}))},me.durationHasTime=k;var be=["sun","mon","tue","wed","thu","fri","sat"],we=["year","month","week","day","hour","minute","second","millisecond"];me.log=function(){var e=window.console;if(e&&e.log)return e.log.apply(e,arguments)},me.warn=function(){var e=window.console;return e&&e.warn?e.warn.apply(e,arguments):me.log.apply(me,arguments)};var _e={}.hasOwnProperty;me.createObject=R;var Se=/^\s*\d{4}-\d\d$/,Te=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,De=L.fn,xe=O.extend({},De),Ee=L.momentProperties;Ee.push("_fullCalendar"),Ee.push("_ambigTime"),Ee.push("_ambigZone"),me.moment=function(){return Z(arguments)},me.moment.utc=function(){var e=Z(arguments,!0);return e.hasTime()&&e.utc(),e},me.moment.parseZone=function(){return Z(arguments,!0,!0)},De.week=De.weeks=function(e){var t=this._locale._fullCalendar_weekCalc;return null==e&&"function"==typeof t?t(this):"ISO"===t?xe.isoWeek.apply(this,arguments):xe.week.apply(this,arguments)},De.time=function(e){if(!this._fullCalendar)return xe.time.apply(this,arguments);if(null==e)return L.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,L.isDuration(e)||L.isMoment(e)||(e=L.duration(e));var t=0;return L.isDuration(e)&&(t=24*Math.floor(e.asDays())),this.hours(t+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())},De.stripTime=function(){return this._ambigTime||(this.utc(!0),this.set({hours:0,minutes:0,seconds:0,ms:0}),this._ambigTime=!0,this._ambigZone=!0),this},De.hasTime=function(){return!this._ambigTime},De.stripZone=function(){var e;return this._ambigZone||(e=this._ambigTime,this.utc(!0),this._ambigTime=e||!1,this._ambigZone=!0),this},De.hasZone=function(){return!this._ambigZone},De.local=function(e){return xe.local.call(this,this._ambigZone||e),this._ambigTime=!1,this._ambigZone=!1,this},De.utc=function(e){return xe.utc.call(this,e),this._ambigTime=!1,this._ambigZone=!1,this},De.utcOffset=function(e){return null!=e&&(this._ambigTime=!1,this._ambigZone=!1),xe.utcOffset.apply(this,arguments)},De.format=function(){return this._fullCalendar&&arguments[0]?Ce(this,arguments[0]):this._ambigTime?ke(this,"YYYY-MM-DD"):this._ambigZone?ke(this,"YYYY-MM-DD[T]HH:mm:ss"):xe.format.apply(this,arguments)},De.toISOString=function(){return this._ambigTime?ke(this,"YYYY-MM-DD"):this._ambigZone?ke(this,"YYYY-MM-DD[T]HH:mm:ss"):xe.toISOString.apply(this,arguments)},function(){function a(e,t){return xe.format.call(e,t)}function r(e){return n[e]||(n[e]={fakeFormatString:function e(t){var n,i,s=[];for(n=0;n<t.length;n++)"string"==typeof(i=t[n])?s.push("["+i+"]"):i.token?i.token in u?s.push(c+"["+i.token+"]"):s.push(i.token):i.maybe&&s.push(d+e(i.maybe)+d);return s.join(l)}(t=o(e)),sameUnits:function e(t){var n,i,s,r=[];for(n=0;n<t.length;n++)(i=t[n]).token?(s=h[i.token.charAt(0)],r.push(s?s.unit:"second")):i.maybe?r.push.apply(r,e(i.maybe)):r.push(null);return r}(t)});var t}function o(e){for(var t,n=[],i=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;t=i.exec(e);)t[1]?n.push.apply(n,s(t[1])):t[2]?n.push({maybe:o(t[2])}):t[3]?n.push({token:t[3]}):t[5]&&n.push.apply(n,s(t[5]));return n}function s(e){return". "===e?["."," "]:[e]}function y(e,t){var n,i,s=[],r=a(t,e).split(l);for(n=0;n<r.length;n++)(i=r[n]).charAt(0)===c?s.push(u[i.substring(1)](t)):s.push(i);return s}function b(e){return e.replace(t,function(e,t){return t.match(/[1-9]/)?t:""})}me.formatDate=function(e,t){return b(y(r(t).fakeFormatString,e).join(""))},me.formatRange=function(e,t,n,i,s){return e=me.moment.parseZone(e),t=me.moment.parseZone(t),function(e,t,n,i,s){var r,a,o,l=e.sameUnits,c=t.clone().stripZone(),d=n.clone().stripZone(),u=y(e.fakeFormatString,t),h=y(e.fakeFormatString,n),p="",f="",m="",g="",v="";for(r=0;r<l.length&&(!l[r]||c.isSame(d,l[r]));r++)p+=u[r];for(a=l.length-1;r<a&&(!l[a]||c.isSame(d,l[a]))&&(a-1!==r||"."!==u[a]);a--)f=u[a]+f;for(o=r;o<=a;o++)m+=u[o],g+=h[o];return(m||g)&&(v=s?g+i+m:m+i+g),b(p+v+f)}(r(n=e.localeData().longDateFormat(n)||n),e,t,i||" - ",s)},me.oldMomentFormat=a,me.queryMostGranularFormatUnit=function(e){var t,n,i,s,r=o(e);for(t=0;t<r.length;t++)(n=r[t]).token&&(i=h[n.token.charAt(0)])&&(!s||i.value>s.value)&&(s=i);return s?s.unit:null};var l="\v",c="",d="",t=new RegExp(d+"([^"+d+"]*)"+d,"g"),u={t:function(e){return a(e,"a").charAt(0)},T:function(e){return a(e,"A").charAt(0)}},h={Y:{value:1,unit:"year"},M:{value:2,unit:"month"},W:{value:3,unit:"week"},w:{value:3,unit:"week"},D:{value:4,unit:"day"},d:{value:4,unit:"day"}},n={}}();var Ce=me.formatDate,$e=me.formatRange,ke=me.oldMomentFormat;(me.Class=Q).extend=function(){var e,t,n,i,s,r=arguments.length;for(e=0;e<r;e++)t=arguments[e],e<r-1&&X(this,t);return n=this,I(i=t||{},"constructor")&&(s=i.constructor),"function"!=typeof s&&(s=i.constructor=function(){n.apply(this,arguments)}),s.prototype=R(n.prototype),H(i,s.prototype),H(n,s),s},Q.mixin=function(e){X(this,e)},(me.Promise=K).immediate=!0,K.resolve=function(n){if(n&&"function"==typeof n.resolve)return n.promise();if(n&&"function"==typeof n.then)return n;var i=O.Deferred().resolve(n).promise();if(K.immediate){var s=i.then;i._value=n,i.then=function(e,t){return"function"==typeof e?K.resolve(e(n)):s.call(i,e,t)}}return i},K.reject=function(){return O.Deferred().reject().promise()},K.all=function(e){var t,n,i,s=!1;if(K.immediate)for(s=!0,t=[],n=0;n<e.length;n++)if((i=e[n])&&"function"==typeof i.state&&"resolved"===i.state()&&"_value"in i)t.push(i._value);else{if(i&&"function"==typeof i.then){s=!1;break}t.push(i)}return s?K.resolve(t):O.when.apply(O.when,e).then(function(){return O.when(O.makeArray(arguments))})},me.TaskQueue=J;var Me,He=me.EmitterMixin={on:function(e,t){return O(this).on(e,this._prepareIntercept(t)),this},one:function(e,t){return O(this).one(e,this._prepareIntercept(t)),this},_prepareIntercept:function(n){var e=function(e,t){return n.apply(t.context||this,t.args||[])};return n.guid||(n.guid=O.guid++),e.guid=n.guid,e},off:function(e,t){return O(this).off(e,t),this},trigger:function(e){var t=Array.prototype.slice.call(arguments,1);return O(this).triggerHandler(e,{args:t}),this},triggerWith:function(e,t,n){return O(this).triggerHandler(e,{context:t,args:n}),this}},Ie=me.ListenerMixin=(Me=0,{listenerId:null,listenTo:function(e,t,n){if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&this.listenTo(e,i,t[i]);else"string"==typeof t&&e.on(t+"."+this.getListenerNamespace(),O.proxy(n,this))},stopListeningTo:function(e,t){e.off((t||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){return null==this.listenerId&&(this.listenerId=Me++),"_listener"+this.listenerId}}),Re=Q.extend(Ie,{isHidden:!0,options:null,el:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var e=this,t=this.options;this.el=O('<div class="fc-popover"/>').addClass(t.className||"").css({top:0,left:0}).append(t.content).appendTo(t.parentEl),this.el.on("click",".fc-close",function(){e.hide()}),t.autoHide&&this.listenTo(O(document),"mousedown",this.documentMousedown)},documentMousedown:function(e){this.el&&!O(e.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(O(document),"mousedown")},position:function(){var e,t,n,i,s,r=this.options,a=this.el.offsetParent().offset(),o=this.el.outerWidth(),l=this.el.outerHeight(),c=O(window),d=u(this.el);i=r.top||0,s=void 0!==r.left?r.left:void 0!==r.right?r.right-o:0,d.is(window)||d.is(document)?(d=c,t=e=0):(e=(n=d.offset()).top,t=n.left),e+=c.scrollTop(),t+=c.scrollLeft(),!1!==r.viewportConstrain&&(i=Math.min(i,e+d.outerHeight()-l-this.margin),i=Math.max(i,e+this.margin),s=Math.min(s,t+d.outerWidth()-o-this.margin),s=Math.max(s,t+this.margin)),this.el.css({top:i-a.top,left:s-a.left})},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}),Oe=me.CoordCache=Q.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(e){this.els=O(e.els),this.isHorizontal=e.isHorizontal,this.isVertical=e.isVertical,this.forcedOffsetParentEl=e.offsetParent?O(e.offsetParent):null},build:function(){var e=this.forcedOffsetParentEl;!e&&0<this.els.length&&(e=this.els.eq(0).offsetParent()),this.origin=e?e.offset():null,this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},buildElHorizontals:function(){var r=[],a=[];this.els.each(function(e,t){var n=O(t),i=n.offset().left,s=n.outerWidth();r.push(i),a.push(i+s)}),this.lefts=r,this.rights=a},buildElVerticals:function(){var r=[],a=[];this.els.each(function(e,t){var n=O(t),i=n.offset().top,s=n.outerHeight();r.push(i),a.push(i+s)}),this.tops=r,this.bottoms=a},getHorizontalIndex:function(e){this.ensureBuilt();var t,n=this.lefts,i=this.rights,s=n.length;for(t=0;t<s;t++)if(e>=n[t]&&e<i[t])return t},getVerticalIndex:function(e){this.ensureBuilt();var t,n=this.tops,i=this.bottoms,s=n.length;for(t=0;t<s;t++)if(e>=n[t]&&e<i[t])return t},getLeftOffset:function(e){return this.ensureBuilt(),this.lefts[e]},getLeftPosition:function(e){return this.ensureBuilt(),this.lefts[e]-this.origin.left},getRightOffset:function(e){return this.ensureBuilt(),this.rights[e]},getRightPosition:function(e){return this.ensureBuilt(),this.rights[e]-this.origin.left},getWidth:function(e){return this.ensureBuilt(),this.rights[e]-this.lefts[e]},getTopOffset:function(e){return this.ensureBuilt(),this.tops[e]},getTopPosition:function(e){return this.ensureBuilt(),this.tops[e]-this.origin.top},getBottomOffset:function(e){return this.ensureBuilt(),this.bottoms[e]},getBottomPosition:function(e){return this.ensureBuilt(),this.bottoms[e]-this.origin.top},getHeight:function(e){return this.ensureBuilt(),this.bottoms[e]-this.tops[e]},queryBoundingRect:function(){var e;return 0<this.els.length&&!(e=u(this.els.eq(0))).is(document)?s(e):null},isPointInBounds:function(e,t){return this.isLeftInBounds(e)&&this.isTopInBounds(t)},isLeftInBounds:function(e){return!this.boundingRect||e>=this.boundingRect.left&&e<this.boundingRect.right},isTopInBounds:function(e){return!this.boundingRect||e>=this.boundingRect.top&&e<this.boundingRect.bottom}}),Le=me.DragListener=Q.extend(Ie,{options:null,subjectEl:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,delay:null,delayTimeoutId:null,minDistance:null,shouldCancelTouchScroll:!0,scrollAlwaysKills:!1,constructor:function(e){this.options=e||{}},startInteraction:function(e,t){var n=y(e);if("mousedown"===e.type){if(Pe.get().shouldIgnoreMouse())return;if(!m(e))return;e.preventDefault()}this.isInteracting||(t=t||{},this.delay=N(t.delay,this.options.delay,0),this.minDistance=N(t.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,b(O("body")),this.isInteracting=!0,this.isTouch=n,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=g(e),this.originY=v(e),this.scrollEl=u(O(e.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(e),this.startDelay(e),this.minDistance||this.handleDistanceSurpassed(e))},handleInteractionStart:function(e){this.trigger("interactionStart",e)},endInteraction:function(e,t){this.isInteracting&&(this.endDrag(e),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(e,t),O("body").removeClass("fc-unselectable").off("selectstart",w))},handleInteractionEnd:function(e,t){this.trigger("interactionEnd",e,t||!1)},bindHandlers:function(){var e=Pe.get();this.isTouch?this.listenTo(e,{touchmove:this.handleTouchMove,touchend:this.endInteraction,scroll:this.handleTouchScroll}):this.listenTo(e,{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(e,{selectstart:w,contextmenu:w})},unbindHandlers:function(){this.stopListeningTo(Pe.get())},startDrag:function(e,t){this.startInteraction(e,t),this.isDragging||(this.isDragging=!0,this.handleDragStart(e))},handleDragStart:function(e){this.trigger("dragStart",e)},handleMove:function(e){var t=g(e)-this.originX,n=v(e)-this.originY,i=this.minDistance;this.isDistanceSurpassed||i*i<=t*t+n*n&&this.handleDistanceSurpassed(e),this.isDragging&&this.handleDrag(t,n,e)},handleDrag:function(e,t,n){this.trigger("drag",e,t,n),this.updateAutoScroll(n)},endDrag:function(e){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(e))},handleDragEnd:function(e){this.trigger("dragEnd",e)},startDelay:function(e){var t=this;this.delay?this.delayTimeoutId=setTimeout(function(){t.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)},handleDelayEnd:function(e){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(e)},handleDistanceSurpassed:function(e){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(e)},handleTouchMove:function(e){this.isDragging&&this.shouldCancelTouchScroll&&e.preventDefault(),this.handleMove(e)},handleMouseMove:function(e){this.handleMove(e)},handleTouchScroll:function(e){this.isDragging&&!this.scrollAlwaysKills||this.endInteraction(e,!0)},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1)),this["_"+e]&&this["_"+e].apply(this,Array.prototype.slice.call(arguments,1))}});Le.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var e=this.scrollEl;this.isAutoScroll=this.options.scroll&&e&&!e.is(window)&&!e.is(document),this.isAutoScroll&&this.listenTo(e,"scroll",U(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=h(this.scrollEl))},updateAutoScroll:function(e){var t,n,i,s,r=this.scrollSensitivity,a=this.scrollBounds,o=0,l=0;a&&(t=(r-(v(e)-a.top))/r,n=(r-(a.bottom-v(e)))/r,i=(r-(g(e)-a.left))/r,s=(r-(a.right-g(e)))/r,0<=t&&t<=1?o=t*this.scrollSpeed*-1:0<=n&&n<=1&&(o=n*this.scrollSpeed),0<=i&&i<=1?l=i*this.scrollSpeed*-1:0<=s&&s<=1&&(l=s*this.scrollSpeed)),this.setScrollVel(o,l)},setScrollVel:function(e,t){this.scrollTopVel=e,this.scrollLeftVel=t,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(Y(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var e=this.scrollEl;this.scrollTopVel<0?e.scrollTop()<=0&&(this.scrollTopVel=0):0<this.scrollTopVel&&e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?e.scrollLeft()<=0&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&e.scrollTop(e.scrollTop()+this.scrollTopVel*t),this.scrollLeftVel&&e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var ze=Le.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(e,t){Le.call(this,t),this.component=e},handleInteractionStart:function(e){var t,n,i,s,r,a,o,l,c=this.subjectEl;this.component.hitsNeeded(),this.computeScrollBounds(),e?(i=n={left:g(e),top:v(e)},c&&(t=h(c),o=i,l=t,i={left:Math.min(Math.max(o.left,l.left),l.right),top:Math.min(Math.max(o.top,l.top),l.bottom)}),this.origHit=this.queryHit(i.left,i.top),c&&this.options.subjectCenter&&(this.origHit&&(t=_(this.origHit,t)||t),i={left:((a=t).left+a.right)/2,top:(a.top+a.bottom)/2}),this.coordAdjust=(r=n,{left:(s=i).left-r.left,top:s.top-r.top})):(this.origHit=null,this.coordAdjust=null),Le.prototype.handleInteractionStart.apply(this,arguments)},handleDragStart:function(e){var t;Le.prototype.handleDragStart.apply(this,arguments),(t=this.queryHit(g(e),v(e)))&&this.handleHitOver(t)},handleDrag:function(e,t,n){var i;Le.prototype.handleDrag.apply(this,arguments),ee(i=this.queryHit(g(n),v(n)),this.hit)||(this.hit&&this.handleHitOut(),i&&this.handleHitOver(i))},handleDragEnd:function(){this.handleHitDone(),Le.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(e){var t=ee(e,this.origHit);this.hit=e,this.trigger("hitOver",this.hit,t,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},handleInteractionEnd:function(){Le.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.hitsNotNeeded()},handleScrollEnd:function(){Le.prototype.handleScrollEnd.apply(this,arguments),this.isDragging&&(this.component.releaseHits(),this.component.prepareHits())},queryHit:function(e,t){return this.coordAdjust&&(e+=this.coordAdjust.left,t+=this.coordAdjust.top),this.component.queryHit(e,t)}});me.touchMouseIgnoreWait=500;var Fe,Ae,Pe=Q.extend(Ie,He,{isTouching:!1,mouseIgnoreDepth:0,handleScrollProxy:null,bind:function(){var t=this;this.listenTo(O(document),{touchstart:this.handleTouchStart,touchcancel:this.handleTouchCancel,touchend:this.handleTouchEnd,mousedown:this.handleMouseDown,mousemove:this.handleMouseMove,mouseup:this.handleMouseUp,click:this.handleClick,selectstart:this.handleSelectStart,contextmenu:this.handleContextMenu}),window.addEventListener("touchmove",this.handleTouchMoveProxy=function(e){t.handleTouchMove(O.Event(e))},{passive:!1}),window.addEventListener("scroll",this.handleScrollProxy=function(e){t.handleScroll(O.Event(e))},!0)},unbind:function(){this.stopListeningTo(O(document)),window.removeEventListener("touchmove",this.handleTouchMoveProxy),window.removeEventListener("scroll",this.handleScrollProxy,!0)},handleTouchStart:function(e){this.stopTouch(e,!0),this.isTouching=!0,this.trigger("touchstart",e)},handleTouchMove:function(e){this.isTouching&&this.trigger("touchmove",e)},handleTouchCancel:function(e){this.isTouching&&(this.trigger("touchcancel",e),this.stopTouch(e))},handleTouchEnd:function(e){this.stopTouch(e)},handleMouseDown:function(e){this.shouldIgnoreMouse()||this.trigger("mousedown",e)},handleMouseMove:function(e){this.shouldIgnoreMouse()||this.trigger("mousemove",e)},handleMouseUp:function(e){this.shouldIgnoreMouse()||this.trigger("mouseup",e)},handleClick:function(e){this.shouldIgnoreMouse()||this.trigger("click",e)},handleSelectStart:function(e){this.trigger("selectstart",e)},handleContextMenu:function(e){this.trigger("contextmenu",e)},handleScroll:function(e){this.trigger("scroll",e)},stopTouch:function(e,t){this.isTouching&&(this.isTouching=!1,this.trigger("touchend",e),t||this.startTouchMouseIgnore())},startTouchMouseIgnore:function(){var e=this,t=me.touchMouseIgnoreWait;t&&(this.mouseIgnoreDepth++,setTimeout(function(){e.mouseIgnoreDepth--},t))},shouldIgnoreMouse:function(){return this.isTouching||Boolean(this.mouseIgnoreDepth)}});Fe=null,Ae=0,Pe.get=function(){return Fe||(Fe=new Pe).bind(),Fe},Pe.needed=function(){Pe.get(),Ae++},Pe.unneeded=function(){--Ae||(Fe.unbind(),Fe=null)};var Ne=Q.extend(Ie,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(e,t){this.options=t=t||{},this.sourceEl=e,this.parentEl=t.parentEl?O(t.parentEl):e.parent()},start:function(e){this.isFollowing||(this.isFollowing=!0,this.y0=v(e),this.x0=g(e),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),y(e)?this.listenTo(O(document),"touchmove",this.handleMove):this.listenTo(O(document),"mousemove",this.handleMove))},stop:function(e,t){function n(){i.isAnimating=!1,i.removeElement(),i.top0=i.left0=null,t&&t()}var i=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(O(document)),e&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:n})):n())},getEl:function(){var e=this.el;return e||((e=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex})).addClass("fc-unselectable"),e.appendTo(this.parentEl)),e},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var e,t;this.getEl(),null===this.top0&&(e=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=e.top-t.top,this.left0=e.left-t.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(e){this.topDelta=v(e)-this.y0,this.leftDelta=g(e)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Be=me.Grid=Q.extend(Ie,{hasDayInteractions:!0,view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayClickListener:null,daySelectListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(e){this.view=e,this.isRTL=e.opt("isRTL"),this.elsByFill={},this.dayClickListener=this.buildDayClickListener(),this.daySelectListener=this.buildDaySelectListener()},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(e){this.start=e.start.clone(),this.end=e.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var e,t,n=this.view;this.eventTimeFormat=n.opt("eventTimeFormat")||n.opt("timeFormat")||this.computeEventTimeFormat(),null==(e=n.opt("displayEventTime"))&&(e=this.computeDisplayEventTime()),null==(t=n.opt("displayEventEnd"))&&(t=this.computeDisplayEventEnd()),this.displayEventTime=e,this.displayEventEnd=t},spanToSegs:function(e){},diffDates:function(e,t){return this.largeUnit?F(e,t,this.largeUnit):z(e,t)},hitsNeededDepth:0,hitsNeeded:function(){this.hitsNeededDepth++||this.prepareHits()},hitsNotNeeded:function(){this.hitsNeededDepth&&!--this.hitsNeededDepth&&this.releaseHits()},prepareHits:function(){},releaseHits:function(){},queryHit:function(e,t){},getHitSpan:function(e){},getHitEl:function(e){},setElement:function(e){this.el=e,this.hasDayInteractions&&(b(e),this.bindDayHandler("touchstart",this.dayTouchStart),this.bindDayHandler("mousedown",this.dayMousedown)),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(e,t){var n=this;this.el.on(e,function(e){if(!O(e.target).is(n.segSelector+","+n.segSelector+" *,.fc-more,a[data-goto]"))return t.call(n,e)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo(O(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo(O(document))},dayMousedown:function(e){var t=this.view;t.isSelected||t.selectedEvent||(this.dayClickListener.startInteraction(e),t.opt("selectable")&&this.daySelectListener.startInteraction(e,{distance:t.opt("selectMinDistance")}))},dayTouchStart:function(e){var t,n=this.view;n.isSelected||n.selectedEvent||(null==(t=n.opt("selectLongPressDelay"))&&(t=n.opt("longPressDelay")),this.dayClickListener.startInteraction(e),n.opt("selectable")&&this.daySelectListener.startInteraction(e,{delay:t}))},buildDayClickListener:function(){var i,n=this,s=this.view,e=new ze(this,{scroll:s.opt("dragScroll"),interactionStart:function(){i=e.origHit},hitOver:function(e,t,n){t||(i=null)},hitOut:function(){i=null},interactionEnd:function(e,t){!t&&i&&s.triggerDayClick(n.getHitSpan(i),n.getHitEl(i),e)}});return e.shouldCancelTouchScroll=!1,e.scrollAlwaysKills=!0,e},buildDaySelectListener:function(){var i,s=this,n=this.view;return new ze(this,{scroll:n.opt("dragScroll"),interactionStart:function(){i=null},dragStart:function(){n.unselect()},hitOver:function(e,t,n){n&&((i=s.computeSelection(s.getHitSpan(n),s.getHitSpan(e)))?s.renderSelection(i):!1===i&&p())},hitOut:function(){i=null,s.unrenderSelection()},hitDone:function(){f()},interactionEnd:function(e,t){!t&&i&&n.reportSelection(i,e)}})},clearDragListeners:function(){this.dayClickListener.endInteraction(),this.daySelectListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(e,t){var n=this.fabricateHelperEvent(e,t);return this.renderHelper(n,t)},fabricateHelperEvent:function(e,t){var n=t?R(t.event):{};return n.start=e.start.clone(),n.end=e.end?e.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventDates(n),n.className=(n.className||[]).concat("fc-helper"),t||(n.editable=!1),n},renderHelper:function(e,t){},unrenderHelper:function(){},renderSelection:function(e){this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(e,t){var n=this.computeSelectionSpan(e,t);return!(n&&!this.view.calendar.isSelectionSpanAllowed(n))&&n},computeSelectionSpan:function(e,t){var n=[e.start,e.end,t.start,t.end];return n.sort(W),{start:n[0].clone(),end:n[3].clone()}},renderHighlight:function(e){this.renderFill("highlight",this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},renderFill:function(e,t){},unrenderFill:function(e){var t=this.elsByFill[e];t&&(t.remove(),delete this.elsByFill[e])},renderFillSegEls:function(e,s){var t,r=this,a=this[e+"SegEl"],n="",o=[];if(s.length){for(t=0;t<s.length;t++)n+=this.fillSegHtml(e,s[t]);O(n).each(function(e,t){var n=s[e],i=O(t);a&&(i=a.call(r,n,i)),i&&((i=O(i)).is(r.fillSegTag)&&(n.el=i,o.push(n)))})}return o},fillSegTag:"div",fillSegHtml:function(e,t){var n=this[e+"SegClasses"],i=this[e+"SegCss"],s=n?n.call(this,t):[],r=q(i?i.call(this,t):{});return"<"+this.fillSegTag+(s.length?' class="'+s.join(" ")+'"':"")+(r?' style="'+r+'"':"")+" />"},getDayClasses:function(e,t){var n=this.view,i=n.calendar.getNow(),s=["fc-"+be[e.day()]];return 1==n.intervalDuration.as("months")&&e.month()!=n.intervalStart.month()&&s.push("fc-other-month"),e.isSame(i,"day")?(s.push("fc-today"),!0!==t&&s.push(n.highlightStateClass)):e<i?s.push("fc-past"):s.push("fc-future"),s}});Be.mixin({segSelector:".fc-event-container > *",mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(e){var t,n=[],i=[];for(t=0;t<e.length;t++)(ie(e[t])?n:i).push(e[t]);this.segs=[].concat(this.renderBgEvents(n),this.renderFgEvents(i))},renderBgEvents:function(e){var t=this.eventsToSegs(e);return this.renderBgSegs(t)||t},renderFgEvents:function(e){var t=this.eventsToSegs(e);return this.renderFgSegs(t)||t},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(e){},unrenderFgSegs:function(){},renderFgSegEls:function(s,e){var t,r=this.view,n="",a=[];if(s.length){for(t=0;t<s.length;t++)n+=this.fgSegHtml(s[t],e);O(n).each(function(e,t){var n=s[e],i=r.resolveEventEl(n.event,O(t));i&&(i.data("fc-seg",n),n.el=i,a.push(n))})}return a},fgSegHtml:function(e,t){},renderBgSegs:function(e){return this.renderFill("bgEvent",e)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event,n=t.source||{};return["fc-bgevent"].concat(t.className,n.className||[])},bgEventSegCss:function(e){return{"background-color":this.getSegSkinCss(e)["background-color"]}},businessHoursSegClasses:function(e){return["fc-nonbusiness","fc-bgevent"]},buildBusinessHourSegs:function(e,t){return this.eventsToSegs(this.buildBusinessHourEvents(e,t))},buildBusinessHourEvents:function(e,t){var n,i=this.view.calendar;return null==t&&(t=i.options.businessHours),!(n=i.computeBusinessHourEvents(e,t)).length&&t&&(n=[O.extend({},et,{start:this.view.end,end:this.view.end,dow:null})]),n},bindSegHandlers:function(){this.bindSegHandlersToEl(this.el)},bindSegHandlersToEl:function(e){this.bindSegHandlerToEl(e,"touchstart",this.handleSegTouchStart),this.bindSegHandlerToEl(e,"mouseenter",this.handleSegMouseover),this.bindSegHandlerToEl(e,"mouseleave",this.handleSegMouseout),this.bindSegHandlerToEl(e,"mousedown",this.handleSegMousedown),this.bindSegHandlerToEl(e,"click",this.handleSegClick)},bindSegHandlerToEl:function(e,t,n){var i=this;e.on(t,this.segSelector,function(e){var t=O(this).data("fc-seg");if(t&&!i.isDraggingSeg&&!i.isResizingSeg)return n.call(i,t,e)})},handleSegClick:function(e,t){!1===this.view.publiclyTrigger("eventClick",e.el[0],e.event,t)&&t.preventDefault()},handleSegMouseover:function(e,t){Pe.get().shouldIgnoreMouse()||this.mousedOverSeg||(this.mousedOverSeg=e,this.view.isEventResizable(e.event)&&e.el.addClass("fc-allow-mouse-resize"),this.view.publiclyTrigger("eventMouseover",e.el[0],e.event,t))},handleSegMouseout:function(e,t){t=t||{},this.mousedOverSeg&&(e=e||this.mousedOverSeg,this.mousedOverSeg=null,this.view.isEventResizable(e.event)&&e.el.removeClass("fc-allow-mouse-resize"),this.view.publiclyTrigger("eventMouseout",e.el[0],e.event,t))},handleSegMousedown:function(e,t){!this.startSegResize(e,t,{distance:5})&&this.view.isEventDraggable(e.event)&&this.buildSegDragListener(e).startInteraction(t,{distance:5})},handleSegTouchStart:function(e,t){var n,i=this.view,s=e.event,r=i.isEventSelected(s),a=i.isEventDraggable(s),o=i.isEventResizable(s),l=!1;r&&o&&(l=this.startSegResize(e,t)),l||!a&&!o||(null==(n=i.opt("eventLongPressDelay"))&&(n=i.opt("longPressDelay")),(a?this.buildSegDragListener(e):this.buildSegSelectListener(e)).startInteraction(t,{delay:r?0:n}))},startSegResize:function(e,t,n){return!!O(t.target).is(".fc-resizer")&&(this.buildSegResizeListener(e,O(t.target).is(".fc-start-resizer")).startInteraction(t,n),!0)},buildSegDragListener:function(s){var t,r,a,o=this,l=this.view,c=l.calendar,n=s.el,d=s.event;if(this.segDragListener)return this.segDragListener;var u=this.segDragListener=new ze(l,{scroll:l.opt("dragScroll"),subjectEl:n,subjectCenter:!0,interactionStart:function(e){s.component=o,t=!1,(r=new Ne(s.el,{additionalClass:"fc-dragging",parentEl:l.el,opacity:u.isTouch?null:l.opt("dragOpacity"),revertDuration:l.opt("dragRevertDuration"),zIndex:2})).hide(),r.start(e)},dragStart:function(e){u.isTouch&&!l.isEventSelected(d)&&l.selectEvent(d),t=!0,o.handleSegMouseout(s,e),o.segDragStart(s,e),l.hideEvent(d)},hitOver:function(e,t,n){var i;s.hit&&(n=s.hit),(a=o.computeEventDrop(n.component.getHitSpan(n),e.component.getHitSpan(e),d))&&!c.isEventSpanAllowed(o.eventToSpan(a),d)&&(p(),a=null),a&&(i=l.renderDrag(a,s))?(i.addClass("fc-dragging"),u.isTouch||o.applyDragOpacity(i),r.hide()):r.show(),t&&(a=null)},hitOut:function(){l.unrenderDrag(),r.show(),a=null},hitDone:function(){f()},interactionEnd:function(e){delete s.component,r.stop(!a,function(){t&&(l.unrenderDrag(),o.segDragStop(s,e)),a?l.reportSegDrop(s,a,o.largeUnit,n,e):l.showEvent(d)}),o.segDragListener=null}});return u},buildSegSelectListener:function(e){var t=this,n=this.view,i=e.event;if(this.segDragListener)return this.segDragListener;var s=this.segDragListener=new Le({dragStart:function(e){s.isTouch&&!n.isEventSelected(i)&&n.selectEvent(i)},interactionEnd:function(e){t.segDragListener=null}});return s},segDragStart:function(e,t){this.isDraggingSeg=!0,this.view.publiclyTrigger("eventDragStart",e.el[0],e.event,t,{})},segDragStop:function(e,t){this.isDraggingSeg=!1,this.view.publiclyTrigger("eventDragStop",e.el[0],e.event,t,{})},computeEventDrop:function(e,t,n){var i,s,r=this.view.calendar,a=e.start,o=t.start;return a.hasTime()===o.hasTime()?(i=this.diffDates(o,a),n.allDay&&k(i)?(s={start:n.start.clone(),end:r.getEventEnd(n),allDay:!1},r.normalizeEventTimes(s)):s=ne(n),s.start.add(i),s.end&&s.end.add(i)):s={start:o.clone(),end:null,allDay:!o.hasTime()},s},applyDragOpacity:function(e){var t=this.view.opt("dragOpacity");null!=t&&e.css("opacity",t)},externalDragStart:function(e,t){var n,i,s=this.view;s.opt("droppable")&&(n=O((t?t.item:null)||e.target),i=s.opt("dropAccept"),(O.isFunction(i)?i.call(n[0],n):n.is(i))&&(this.isDraggingExternal||this.listenToExternalDrag(n,e,t)))},listenToExternalDrag:function(t,e,n){var i,s,r,a,o,l,c,d=this,u=this.view.calendar,h=(s=t,(c=me.dataAttrPrefix)&&(c+="-"),(r=s.data(c+"event")||null)&&(null==(a=(r="object"==typeof r?O.extend({},r):{}).start)&&(a=r.time),o=r.duration,l=r.stick,delete r.start,delete r.time,delete r.duration,delete r.stick),null==a&&(a=s.data(c+"start")),null==a&&(a=s.data(c+"time")),null==o&&(o=s.data(c+"duration")),null==l&&(l=s.data(c+"stick")),{eventProps:r,startTime:a=null!=a?L.duration(a):null,duration:o=null!=o?L.duration(o):null,stick:l=Boolean(l)});(d.externalDragListener=new ze(this,{interactionStart:function(){d.isDraggingExternal=!0},hitOver:function(e){(i=d.computeExternalDrop(e.component.getHitSpan(e),h))&&!u.isExternalSpanAllowed(d.eventToSpan(i),i,h.eventProps)&&(p(),i=null),i&&d.renderDrag(i)},hitOut:function(){i=null},hitDone:function(){f(),d.unrenderDrag()},interactionEnd:function(e){i&&d.view.reportExternalDrop(h,i,t,e,n),d.isDraggingExternal=!1,d.externalDragListener=null}})).startDrag(e)},computeExternalDrop:function(e,t){var n={start:this.view.calendar.applyTimezone(e.start),end:null};return t.startTime&&!n.start.hasTime()&&n.start.time(t.startTime),t.duration&&(n.end=n.start.clone().add(t.duration)),n},renderDrag:function(e,t){},unrenderDrag:function(){},buildSegResizeListener:function(r,a){var t,o,l=this,c=this.view,d=c.calendar,n=r.el,u=r.event,h=d.getEventEnd(u);return this.segResizeListener=new ze(this,{scroll:c.opt("dragScroll"),subjectEl:n,interactionStart:function(){t=!1},dragStart:function(e){t=!0,l.handleSegMouseout(r,e),l.segResizeStart(r,e)},hitOver:function(e,t,n){var i=l.getHitSpan(n),s=l.getHitSpan(e);(o=a?l.computeEventStartResize(i,s,u):l.computeEventEndResize(i,s,u))&&(d.isEventSpanAllowed(l.eventToSpan(o),u)?o.start.isSame(u.start.clone().stripZone())&&o.end.isSame(h.clone().stripZone())&&(o=null):(p(),o=null)),o&&(c.hideEvent(u),l.renderEventResize(o,r))},hitOut:function(){o=null,c.showEvent(u)},hitDone:function(){l.unrenderEventResize(),f()},interactionEnd:function(e){t&&l.segResizeStop(r,e),o?c.reportSegResize(r,o,l.largeUnit,n,e):c.showEvent(u),l.segResizeListener=null}})},segResizeStart:function(e,t){this.isResizingSeg=!0,this.view.publiclyTrigger("eventResizeStart",e.el[0],e.event,t,{})},segResizeStop:function(e,t){this.isResizingSeg=!1,this.view.publiclyTrigger("eventResizeStop",e.el[0],e.event,t,{})},computeEventStartResize:function(e,t,n){return this.computeEventResize("start",e,t,n)},computeEventEndResize:function(e,t,n){return this.computeEventResize("end",e,t,n)},computeEventResize:function(e,t,n,i){var s,r,a=this.view.calendar,o=this.diffDates(n[e],t[e]);return(s={start:i.start.clone(),end:a.getEventEnd(i),allDay:i.allDay}).allDay&&k(o)&&(s.allDay=!1,a.normalizeEventTimes(s)),s[e].add(o),s.start.isBefore(s.end)||(r=this.minResizeDuration||(i.allDay?a.defaultAllDayEventDuration:a.defaultTimedEventDuration),"start"==e?s.start=s.end.clone().subtract(r):s.end=s.start.clone().add(r)),s},renderEventResize:function(e,t){},unrenderEventResize:function(){},getEventTimeText:function(e,t,n){return null==t&&(t=this.eventTimeFormat),null==n&&(n=this.displayEventEnd),this.displayEventTime&&e.start.hasTime()?n&&e.end?this.view.formatRange(e,t):e.start.format(t):""},getSegClasses:function(e,t,n){var i=this.view,s=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(this.getSegCustomClasses(e));return t&&s.push("fc-draggable"),n&&s.push("fc-resizable"),i.isEventSelected(e.event)&&s.push("fc-selected"),s},getSegCustomClasses:function(e){var t=e.event;return[].concat(t.className,t.source?t.source.className:[])},getSegSkinCss:function(e){return{"background-color":this.getSegBackgroundColor(e),"border-color":this.getSegBorderColor(e),color:this.getSegTextColor(e)}},getSegBackgroundColor:function(e){return e.event.backgroundColor||e.event.color||this.getSegDefaultBackgroundColor(e)},getSegDefaultBackgroundColor:function(e){var t=e.event.source||{};return t.backgroundColor||t.color||this.view.opt("eventBackgroundColor")||this.view.opt("eventColor")},getSegBorderColor:function(e){return e.event.borderColor||e.event.color||this.getSegDefaultBorderColor(e)},getSegDefaultBorderColor:function(e){var t=e.event.source||{};return t.borderColor||t.color||this.view.opt("eventBorderColor")||this.view.opt("eventColor")},getSegTextColor:function(e){return e.event.textColor||this.getSegDefaultTextColor(e)},getSegDefaultTextColor:function(e){return(e.event.source||{}).textColor||this.view.opt("eventTextColor")},eventToSegs:function(e){return this.eventsToSegs([e])},eventToSpan:function(e){return this.eventToSpans(e)[0]},eventToSpans:function(e){var t=this.eventToRange(e);return this.eventRangeToSpans(t,e)},eventsToSegs:function(e,s){var r=this,t=function(e){var t,n,i={};for(t=0;t<e.length;t++)(i[(n=e[t])._id]||(i[n._id]=[])).push(n);return i}(e),a=[];return O.each(t,function(e,t){var n,i=[];for(n=0;n<t.length;n++)i.push(r.eventToRange(t[n]));if("inverse-background"===se(t[0]))for(i=r.invertRanges(i),n=0;n<i.length;n++)a.push.apply(a,r.eventRangeToSegs(i[n],t[0],s));else for(n=0;n<i.length;n++)a.push.apply(a,r.eventRangeToSegs(i[n],t[n],s))}),a},eventToRange:function(e){var t=this.view.calendar,n=e.start.clone().stripZone(),i=(e.end?e.end.clone():t.getDefaultEventEnd(null!=e.allDay?e.allDay:!e.start.hasTime(),e.start)).stripZone();return t.localizeMoment(n),t.localizeMoment(i),{start:n,end:i}},eventRangeToSegs:function(e,t,n){var i,s=this.eventRangeToSpans(e,t),r=[];for(i=0;i<s.length;i++)r.push.apply(r,this.eventSpanToSegs(s[i],t,n));return r},eventRangeToSpans:function(e,t){return[O.extend({},e)]},eventSpanToSegs:function(e,t,n){var i,s,r=n?n(e):this.spanToSegs(e);for(i=0;i<r.length;i++)(s=r[i]).event=t,s.eventStartMS=+e.start,s.eventDurationMS=e.end-e.start;return r},invertRanges:function(e){var t,n,i=this.view,s=i.start.clone(),r=i.end.clone(),a=[],o=s;for(e.sort(re),t=0;t<e.length;t++)(n=e[t]).start>o&&a.push({start:o,end:n.start}),o=n.end;return o<r&&a.push({start:o,end:r}),a},sortEventSegs:function(e){e.sort(Y(this,"compareEventSegs"))},compareEventSegs:function(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||T(e.event,t.event,this.view.eventOrderSpecs)}}),me.pluckEventDateProps=ne,me.isBgEvent=ie,me.dataAttrPrefix="";var je=me.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var e,t,n,i=this.view,s=this.start.clone(),r=-1,a=[],o=[];s.isBefore(this.end);)i.isHiddenDay(s)?a.push(r+.5):(r++,a.push(r),o.push(s.clone())),s.add(1,"days");if(this.breakOnWeeks){for(t=o[0].day(),e=1;e<o.length&&o[e].day()!=t;e++);n=Math.ceil(o.length/e)}else n=1,e=o.length;this.dayDates=o,this.dayIndices=a,this.daysPerRow=e,this.rowCnt=n,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(e,t){return this.dayDates[this.getCellDayIndex(e,t)].clone()},getCellRange:function(e,t){var n=this.getCellDate(e,t);return{start:n,end:n.clone().add(1,"days")}},getCellDayIndex:function(e,t){return e*this.daysPerRow+this.getColDayIndex(t)},getColDayIndex:function(e){return this.isRTL?this.colCnt-1-e:e},getDateDayIndex:function(e){var t=this.dayIndices,n=e.diff(this.start,"days");return n<0?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]},computeColHeadFormat:function(){return 1<this.rowCnt||10<this.colCnt?"ddd":1<this.colCnt?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(e){var t,n,i,s,r,a=this.daysPerRow,o=this.view.computeDayRange(e),l=this.getDateDayIndex(o.start),c=this.getDateDayIndex(o.end.clone().subtract(1,"days")),d=[];for(t=0;t<this.rowCnt;t++)i=(n=t*a)+a-1,s=Math.max(l,n),r=Math.min(c,i),(s=Math.ceil(s))<=(r=Math.floor(r))&&d.push({row:t,firstRowDayIndex:s-n,lastRowDayIndex:r-n,isStart:s===l,isEnd:r===c});return d},sliceRangeByDay:function(e){var t,n,i,s,r,a,o=this.daysPerRow,l=this.view.computeDayRange(e),c=this.getDateDayIndex(l.start),d=this.getDateDayIndex(l.end.clone().subtract(1,"days")),u=[];for(t=0;t<this.rowCnt;t++)for(i=(n=t*o)+o-1,s=n;s<=i;s++)r=Math.max(c,s),a=Math.min(d,s),(r=Math.ceil(r))<=(a=Math.floor(a))&&u.push({row:t,firstRowDayIndex:r-n,lastRowDayIndex:a-n,isStart:r===c,isEnd:a===d});return u},renderHeadHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var e,t,n=[];for(e=0;e<this.colCnt;e++)t=this.getCellDate(0,e),n.push(this.renderHeadDateCellHtml(t));return n.join("")},renderHeadDateCellHtml:function(e,t,n){var i=this.view,s=["fc-day-header",i.widgetHeaderClass];return 1===this.rowCnt?s=s.concat(this.getDayClasses(e,!0)):s.push("fc-"+be[e.day()]),'<th class="'+s.join(" ")+'"'+(1===this.rowCnt?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(1<t?' colspan="'+t+'"':"")+(n?" "+n:"")+">"+i.buildGotoAnchorHtml({date:e,forceOff:1<this.rowCnt||1===this.colCnt},B(e.format(this.colHeadFormat)))+"</th>"},renderBgTrHtml:function(e){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(e))+this.renderBgCellsHtml(e)+(this.isRTL?this.renderBgIntroHtml(e):"")+"</tr>"},renderBgIntroHtml:function(e){return this.renderIntroHtml()},renderBgCellsHtml:function(e){var t,n,i=[];for(t=0;t<this.colCnt;t++)n=this.getCellDate(e,t),i.push(this.renderBgCellHtml(n));return i.join("")},renderBgCellHtml:function(e,t){var n=this.view,i=this.getDayClasses(e);return i.unshift("fc-day",n.widgetContentClass),'<td class="'+i.join(" ")+'" data-date="'+e.format("YYYY-MM-DD")+'"'+(t?" "+t:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(e){var t=this.renderIntroHtml();t&&(this.isRTL?e.append(t):e.prepend(t))}},qe=me.DayGrid=Be.extend(je,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(e){var t,n,i=this.view,s=this.rowCnt,r=this.colCnt,a="";for(t=0;t<s;t++)a+=this.renderDayRowHtml(t,e);for(this.el.html(a),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new Oe({els:this.rowEls,isVertical:!0}),this.colCoordCache=new Oe({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),t=0;t<s;t++)for(n=0;n<r;n++)i.publiclyTrigger("dayRender",null,this.getCellDate(t,n),this.getCellEl(t,n))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var e=this.buildBusinessHourSegs(!0);this.renderFill("businessHours",e,"bgevent")},unrenderBusinessHours:function(){this.unrenderFill("businessHours")},renderDayRowHtml:function(e,t){var n=["fc-row","fc-week",this.view.widgetContentClass];return t&&n.push("fc-rigid"),'<div class="'+n.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(e)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(e){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(e))+this.renderNumberCellsHtml(e)+(this.isRTL?this.renderNumberIntroHtml(e):"")+"</tr>"},renderNumberIntroHtml:function(e){return this.renderIntroHtml()},renderNumberCellsHtml:function(e){var t,n,i=[];for(t=0;t<this.colCnt;t++)n=this.getCellDate(e,t),i.push(this.renderNumberCellHtml(n));return i.join("")},renderNumberCellHtml:function(e){var t,n,i="";return this.view.dayNumbersVisible||this.view.cellWeekNumbersVisible?((t=this.getDayClasses(e)).unshift("fc-day-top"),this.view.cellWeekNumbersVisible&&(n="ISO"===e._locale._fullCalendar_weekCalc?1:e._locale.firstDayOfWeek()),i+='<td class="'+t.join(" ")+'" data-date="'+e.format()+'">',this.view.cellWeekNumbersVisible&&e.day()==n&&(i+=this.view.buildGotoAnchorHtml({date:e,type:"week"},{class:"fc-week-number"},e.format("w"))),this.view.dayNumbersVisible&&(i+=this.view.buildGotoAnchorHtml(e,{class:"fc-day-number"},e.date())),i+="</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(e){var t,n,i=this.sliceRangeByRow(e);for(t=0;t<i.length;t++)n=i[t],this.isRTL?(n.leftCol=this.daysPerRow-1-n.lastRowDayIndex,n.rightCol=this.daysPerRow-1-n.firstRowDayIndex):(n.leftCol=n.firstRowDayIndex,n.rightCol=n.lastRowDayIndex);return i},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(e,t){if(this.colCoordCache.isLeftInBounds(e)&&this.rowCoordCache.isTopInBounds(t)){var n=this.colCoordCache.getHorizontalIndex(e),i=this.rowCoordCache.getVerticalIndex(t);if(null!=i&&null!=n)return this.getCellHit(i,n)}},getHitSpan:function(e){return this.getCellRange(e.row,e.col)},getHitEl:function(e){return this.getCellEl(e.row,e.col)},getCellHit:function(e,t){return{row:e,col:t,component:this,left:this.colCoordCache.getLeftOffset(t),right:this.colCoordCache.getRightOffset(t),top:this.rowCoordCache.getTopOffset(e),bottom:this.rowCoordCache.getBottomOffset(e)}},getCellEl:function(e,t){return this.cellEls.eq(e*this.colCnt+t)},renderDrag:function(e,t){if(this.renderHighlight(this.eventToSpan(e)),t&&t.component!==this)return this.renderEventLocationHelper(e,t)},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(e,t){return this.renderHighlight(this.eventToSpan(e)),this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(e,r){var a,o=[],t=this.eventToSegs(e);return t=this.renderFgSegEls(t),a=this.renderSegRows(t),this.rowEls.each(function(e,t){var n,i=O(t),s=O('<div class="fc-helper-skeleton"><table/></div>');n=r&&r.row===e?r.el.position().top:i.find(".fc-content-skeleton tbody").position().top,s.css("top",n).find("table").append(a[e].tbodyEl),i.append(s),o.push(s[0])}),this.helperEls=O(o)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(e,t,n){var i,s,r,a=[];for(t=this.renderFillSegEls(e,t),i=0;i<t.length;i++)s=t[i],r=this.renderFillRow(e,s,n),this.rowEls.eq(s.row).append(r),a.push(r[0]);return this.elsByFill[e]=O(a),t},renderFillRow:function(e,t,n){var i,s,r=this.colCnt,a=t.leftCol,o=t.rightCol+1;return n=n||e.toLowerCase(),s=(i=O('<div class="fc-'+n+'-skeleton"><table><tr/></table></div>')).find("tr"),0<a&&s.append('<td colspan="'+a+'"/>'),s.append(t.el.attr("colspan",o-a)),o<r&&s.append('<td colspan="'+(r-o)+'"/>'),this.bookendCells(s),i}});qe.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),Be.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return Be.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(e){var t=O.grep(e,function(e){return e.event.allDay});return Be.prototype.renderBgSegs.call(this,t)},renderFgSegs:function(e){var n;return e=this.renderFgSegEls(e),n=this.rowStructs=this.renderSegRows(e),this.rowEls.each(function(e,t){O(t).find(".fc-content-skeleton > table").append(n[e].tbodyEl)}),e},unrenderFgSegs:function(){for(var e,t=this.rowStructs||[];e=t.pop();)e.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(e){var t,n,i=[];for(t=this.groupSegRows(e),n=0;n<t.length;n++)i.push(this.renderSegRow(n,t[n]));return i},fgSegHtml:function(e,t){var n,i,s=this.view,r=e.event,a=s.isEventDraggable(r),o=!t&&r.allDay&&e.isStart&&s.isEventResizableFromStart(r),l=!t&&r.allDay&&e.isEnd&&s.isEventResizableFromEnd(r),c=this.getSegClasses(e,a,o||l),d=q(this.getSegSkinCss(e)),u="";return c.unshift("fc-day-grid-event","fc-h-event"),e.isStart&&((n=this.getEventTimeText(r))&&(u='<span class="fc-time">'+B(n)+"</span>")),i='<span class="fc-title">'+(B(r.title||"")||"&nbsp;")+"</span>",'<a class="'+c.join(" ")+'"'+(r.url?' href="'+B(r.url)+'"':"")+(d?' style="'+d+'"':"")+'><div class="fc-content">'+(this.isRTL?i+" "+u:u+" "+i)+"</div>"+(o?'<div class="fc-resizer fc-start-resizer" />':"")+(l?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(e,t){function n(e){for(;r<e;)(c=(g[i-1]||[])[r])?c.attr("rowspan",parseInt(c.attr("rowspan")||1,10)+1):(c=O("<td/>"),a.append(c)),m[i][r]=c,g[i][r]=c,r++}var i,s,r,a,o,l,c,d=this.colCnt,u=this.buildSegLevels(t),h=Math.max(1,u.length),p=O("<tbody/>"),f=[],m=[],g=[];for(i=0;i<h;i++){if(s=u[i],r=0,a=O("<tr/>"),f.push([]),m.push([]),g.push([]),s)for(o=0;o<s.length;o++){for(n((l=s[o]).leftCol),c=O('<td class="fc-event-container"/>').append(l.el),l.leftCol!=l.rightCol?c.attr("colspan",l.rightCol-l.leftCol+1):g[i][r]=c;r<=l.rightCol;)m[i][r]=c,f[i][r]=l,r++;a.append(c)}n(d),this.bookendCells(a),p.append(a)}return{row:e,tbodyEl:p,cellMatrix:m,segMatrix:f,segLevels:u,segs:t}},buildSegLevels:function(e){var t,n,i,s=[];for(this.sortEventSegs(e),t=0;t<e.length;t++){for(n=e[t],i=0;i<s.length&&ae(n,s[i]);i++);(s[n.level=i]||(s[i]=[])).push(n)}for(i=0;i<s.length;i++)s[i].sort(oe);return s},groupSegRows:function(e){var t,n=[];for(t=0;t<this.rowCnt;t++)n.push([]);for(t=0;t<e.length;t++)n[e[t].row].push(e[t]);return n}}),qe.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(e){var t,n,i=this.rowStructs||[];for(t=0;t<i.length;t++)this.unlimitRow(t),!1!==(n=!!e&&("number"==typeof e?e:this.computeRowLevelLimit(t)))&&this.limitRow(t,n)},computeRowLevelLimit:function(e){function t(e,t){s=Math.max(s,O(t).outerHeight())}var n,i,s,r=this.rowEls.eq(e).height(),a=this.rowStructs[e].tbodyEl.children();for(n=0;n<a.length;n++)if(i=a.eq(n).removeClass("fc-limited"),s=0,i.find("> td > :first-child").each(t),i.position().top+s>r)return n;return!1},limitRow:function(t,n){function e(e){for(;_<e;)(l=y.getCellSegs(t,_,n)).length&&(u=s[n-1][_],v=y.renderMoreLink(t,_,l),g=O("<div/>").append(v),u.append(g),w.push(g[0])),_++}var i,s,r,a,o,l,c,d,u,h,p,f,m,g,v,y=this,b=this.rowStructs[t],w=[],_=0;if(n&&n<b.segLevels.length){for(i=b.segLevels[n-1],s=b.cellMatrix,r=b.tbodyEl.children().slice(n).addClass("fc-limited").get(),a=0;a<i.length;a++){for(e((o=i[a]).leftCol),d=[],c=0;_<=o.rightCol;)l=this.getCellSegs(t,_,n),d.push(l),c+=l.length,_++;if(c){for(h=(u=s[n-1][o.leftCol]).attr("rowspan")||1,p=[],f=0;f<d.length;f++)m=O('<td class="fc-more-cell"/>').attr("rowspan",h),l=d[f],v=this.renderMoreLink(t,o.leftCol+f,[o].concat(l)),g=O("<div/>").append(v),m.append(g),p.push(m[0]),w.push(m[0]);u.addClass("fc-limited").after(O(p)),r.push(u[0])}}e(this.colCnt),b.moreEls=O(w),b.limitedEls=O(r)}},unlimitRow:function(e){var t=this.rowStructs[e];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(l,c,d){var u=this,h=this.view;return O('<a class="fc-more"/>').text(this.getMoreLinkText(d.length)).on("click",function(e){var t=h.opt("eventLimitClick"),n=u.getCellDate(l,c),i=O(this),s=u.getCellEl(l,c),r=u.getCellSegs(l,c),a=u.resliceDaySegs(r,n),o=u.resliceDaySegs(d,n);"function"==typeof t&&(t=h.publiclyTrigger("eventLimitClick",null,{date:n,dayEl:s,moreEl:i,segs:a,hiddenSegs:o},e)),"popover"===t?u.showSegPopover(l,c,i,a):"string"==typeof t&&h.calendar.zoomTo(n,t)})},showSegPopover:function(e,t,n,i){var s,r,a=this,o=this.view,l=n.parent();s=1==this.rowCnt?o.el:this.rowEls.eq(e),r={className:"fc-more-popover",content:this.renderSegPopoverContent(e,t,i),parentEl:this.view.el,top:s.offset().top,autoHide:!0,viewportConstrain:o.opt("popoverViewportConstrain"),hide:function(){if(a.popoverSegs)for(var e,t=0;t<a.popoverSegs.length;++t)e=a.popoverSegs[t],o.publiclyTrigger("eventDestroy",e.event,e.event,e.el);a.segPopover.removeElement(),a.segPopover=null,a.popoverSegs=null}},this.isRTL?r.right=l.offset().left+l.outerWidth()+1:r.left=l.offset().left-1,this.segPopover=new Re(r),this.segPopover.show(),this.bindSegHandlersToEl(this.segPopover.el)},renderSegPopoverContent:function(e,t,n){var i,s=this.view,r=s.opt("theme"),a=this.getCellDate(e,t).format(s.opt("dayPopoverFormat")),o=O('<div class="fc-header '+s.widgetHeaderClass+'"><span class="fc-close '+(r?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+B(a)+'</span><div class="fc-clear"/></div><div class="fc-body '+s.widgetContentClass+'"><div class="fc-event-container"></div></div>'),l=o.find(".fc-event-container");for(n=this.renderFgSegEls(n,!0),this.popoverSegs=n,i=0;i<n.length;i++)this.hitsNeeded(),n[i].hit=this.getCellHit(e,t),this.hitsNotNeeded(),l.append(n[i].el);return o},resliceDaySegs:function(e,t){var n=O.map(e,function(e){return e.event}),i=t.clone(),s={start:i,end:i.clone().add(1,"days")};return e=this.eventsToSegs(n,function(e){var t=E(e,s);return t?[t]:[]}),this.sortEventSegs(e),e},getMoreLinkText:function(e){var t=this.view.opt("eventLimitText");return"function"==typeof t?t(e):"+"+e+" "+t},getCellSegs:function(e,t,n){for(var i,s=this.rowStructs[e].segMatrix,r=n||0,a=[];r<s.length;)(i=s[r][t])&&a.push(i),r++;return a}});var Ge=me.TimeGrid=Be.extend(je,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){Be.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatContainerEl=this.el.find(".fc-slats"),this.slatEls=this.slatContainerEl.find("tr"),this.colCoordCache=new Oe({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new Oe({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var e,t,n,i=this.view,s=this.isRTL,r="",a=L.duration(+this.minTime);a<this.maxTime;)e=this.start.clone().time(a),t=V($(a,this.labelInterval)),n='<td class="fc-axis fc-time '+i.widgetContentClass+'" '+i.axisStyleAttr()+">"+(t?"<span>"+B(e.format(this.labelFormat))+"</span>":"")+"</td>",r+='<tr data-time="'+e.format("HH:mm:ss")+'"'+(t?"":' class="fc-minor"')+">"+(s?"":n)+'<td class="'+i.widgetContentClass+'"/>'+(s?n:"")+"</tr>",a.add(this.slotDuration);return r},processOptions:function(){var e,t=this.view,n=t.opt("slotDuration"),i=t.opt("snapDuration");n=L.duration(n),i=i?L.duration(i):n,this.slotDuration=n,this.snapDuration=i,this.snapsPerSlot=n/i,this.minResizeDuration=i,this.minTime=L.duration(t.opt("minTime")),this.maxTime=L.duration(t.opt("maxTime")),e=t.opt("slotLabelFormat"),O.isArray(e)&&(e=e[e.length-1]),this.labelFormat=e||t.opt("smallTimeFormat"),e=t.opt("slotLabelInterval"),this.labelInterval=e?L.duration(e):this.computeLabelInterval(n)},computeLabelInterval:function(e){var t,n,i;for(t=lt.length-1;0<=t;t--)if(V(i=$(n=L.duration(lt[t]),e))&&1<i)return n;return L.duration(e)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(e,t){var n=this.snapsPerSlot,i=this.colCoordCache,s=this.slatCoordCache;if(i.isLeftInBounds(e)&&s.isTopInBounds(t)){var r=i.getHorizontalIndex(e),a=s.getVerticalIndex(t);if(null!=r&&null!=a){var o=s.getTopOffset(a),l=s.getHeight(a),c=(t-o)/l,d=Math.floor(c*n),u=o+d/n*l,h=o+(d+1)/n*l;return{col:r,snap:a*n+d,component:this,left:i.getLeftOffset(r),right:i.getRightOffset(r),top:u,bottom:h}}}},getHitSpan:function(e){var t=this.getCellDate(0,e.col),n=this.computeSnapTime(e.snap);return t.time(n),{start:t,end:t.clone().add(this.snapDuration)}},getHitEl:function(e){return this.colEls.eq(e.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(e){return L.duration(this.minTime+this.snapDuration*e)},spanToSegs:function(e){var t,n=this.sliceRangeByTimes(e);for(t=0;t<n.length;t++)this.isRTL?n[t].col=this.daysPerRow-1-n[t].dayIndex:n[t].col=n[t].dayIndex;return n},sliceRangeByTimes:function(e){var t,n,i,s=[];for(n=0;n<this.daysPerRow;n++)(t=E(e,{start:(i=this.dayDates[n].clone()).clone().time(this.minTime),end:i.clone().time(this.maxTime)}))&&(t.dayIndex=n,s.push(t));return s},updateSize:function(e){this.slatCoordCache.build(),e&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(e,t){return this.computeTimeTop(L.duration(e-t.clone().stripTime()))},computeTimeTop:function(e){var t,n,i=this.slatEls.length,s=(e-this.minTime)/this.slotDuration;return s=Math.max(0,s),s=Math.min(i,s),t=Math.floor(s),n=s-(t=Math.min(t,i-1)),this.slatCoordCache.getTopPosition(t)+this.slatCoordCache.getHeight(t)*n},renderDrag:function(e,t){return t?this.renderEventLocationHelper(e,t):void this.renderHighlight(this.eventToSpan(e))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(e,t){return this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(e,t){return this.renderHelperSegs(this.eventToSegs(e),t)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){this.renderBusinessSegs(this.buildBusinessHourSegs())},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(e){var t,n=this.spanToSegs({start:e,end:e}),i=this.computeDateTop(e,e),s=[];for(t=0;t<n.length;t++)s.push(O('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",i).appendTo(this.colContainerEls.eq(n[t].col))[0]);0<n.length&&s.push(O('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",i).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=O(s)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(e){this.view.opt("selectHelper")?this.renderEventLocationHelper(e):this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(e){this.renderHighlightSegs(this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});Ge.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var e,t,n="";for(e=0;e<this.colCnt;e++)n+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';t=O('<div class="fc-content-skeleton"><table><tr>'+n+"</tr></table></div>"),this.colContainerEls=t.find(".fc-content-col"),this.helperContainerEls=t.find(".fc-helper-container"),this.fgContainerEls=t.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=t.find(".fc-bgevent-container"),this.highlightContainerEls=t.find(".fc-highlight-container"),this.businessContainerEls=t.find(".fc-business-container"),this.bookendCells(t.find("tr")),this.el.append(t)},renderFgSegs:function(e){return e=this.renderFgSegsIntoContainers(e,this.fgContainerEls),this.fgSegs=e},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(e,t){var n,i,s,r=[];for(e=this.renderFgSegsIntoContainers(e,this.helperContainerEls),n=0;n<e.length;n++)i=e[n],t&&t.col===i.col&&(s=t.el,i.el.css({left:s.css("left"),right:s.css("right"),"margin-left":s.css("margin-left"),"margin-right":s.css("margin-right")})),r.push(i.el[0]);return this.helperSegs=e,O(r)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(e){return e=this.renderFillSegEls("bgEvent",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.bgContainerEls),this.bgSegs=e},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(e){e=this.renderFillSegEls("highlight",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.highlightContainerEls),this.highlightSegs=e},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(e){e=this.renderFillSegEls("businessHours",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.businessContainerEls),this.businessSegs=e},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(e){var t,n=[];for(t=0;t<this.colCnt;t++)n.push([]);for(t=0;t<e.length;t++)n[e[t].col].push(e[t]);return n},attachSegsByCol:function(e,t){var n,i,s;for(n=0;n<this.colCnt;n++)for(i=e[n],s=0;s<i.length;s++)t.eq(n).append(i[s].el)},unrenderNamedSegs:function(e){var t,n=this[e];if(n){for(t=0;t<n.length;t++)n[t].el.remove();this[e]=null}},renderFgSegsIntoContainers:function(e,t){var n,i;for(e=this.renderFgSegEls(e),n=this.groupSegsByCol(e),i=0;i<this.colCnt;i++)this.updateFgSegCoords(n[i]);return this.attachSegsByCol(n,t),e},fgSegHtml:function(e,t){var n,i,s,r=this.view,a=e.event,o=r.isEventDraggable(a),l=!t&&e.isStart&&r.isEventResizableFromStart(a),c=!t&&e.isEnd&&r.isEventResizableFromEnd(a),d=this.getSegClasses(e,o,l||c),u=q(this.getSegSkinCss(e));return d.unshift("fc-time-grid-event","fc-v-event"),r.isMultiDayEvent(a)?(e.isStart||e.isEnd)&&(n=this.getEventTimeText(e),i=this.getEventTimeText(e,"LT"),s=this.getEventTimeText(e,null,!1)):(n=this.getEventTimeText(a),i=this.getEventTimeText(a,"LT"),s=this.getEventTimeText(a,null,!1)),'<a class="'+d.join(" ")+'"'+(a.url?' href="'+B(a.url)+'"':"")+(u?' style="'+u+'"':"")+'><div class="fc-content">'+(n?'<div class="fc-time" data-start="'+B(s)+'" data-full="'+B(i)+'"><span>'+B(n)+"</span></div>":"")+(a.title?'<div class="fc-title">'+B(a.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(c?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(e){this.computeSegVerticals(e),this.assignSegVerticals(e)},computeSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},assignSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).el.css(this.generateSegVerticalCss(n))},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},updateFgSegCoords:function(e){this.computeSegVerticals(e),this.computeFgSegHorizontals(e),this.assignSegVerticals(e),this.assignFgSegHorizontals(e)},computeFgSegHorizontals:function(e){var t,n,i;if(this.sortEventSegs(e),function(e){var t,n,i,s,r;for(t=0;t<e.length;t++)for(n=e[t],i=0;i<n.length;i++)for((s=n[i]).forwardSegs=[],r=t+1;r<e.length;r++)ce(s,e[r],s.forwardSegs)}(t=function(e){var t,n,i,s=[];for(t=0;t<e.length;t++){for(n=e[t],i=0;i<s.length&&ce(n,s[i]).length;i++);(s[n.level=i]||(s[i]=[])).push(n)}return s}(e)),n=t[0]){for(i=0;i<n.length;i++)le(n[i]);for(i=0;i<n.length;i++)this.computeFgSegForwardBack(n[i],0,0)}},computeFgSegForwardBack:function(e,t,n){var i,s=e.forwardSegs;if(void 0===e.forwardCoord)for(s.length?(this.sortForwardSegs(s),this.computeFgSegForwardBack(s[0],t+1,n),e.forwardCoord=s[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1),i=0;i<s.length;i++)this.computeFgSegForwardBack(s[i],0,e.forwardCoord)},sortForwardSegs:function(e){e.sort(Y(this,"compareForwardSegs"))},compareForwardSegs:function(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||this.compareEventSegs(e,t)},assignFgSegHorizontals:function(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).el.css(this.generateFgSegHorizontalCss(n)),n.bottom-n.top<30&&n.el.addClass("fc-short")},generateFgSegHorizontalCss:function(e){var t,n,i=this.view.opt("slotEventOverlap"),s=e.backwardCoord,r=e.forwardCoord,a=this.generateSegVerticalCss(e);return i&&(r=Math.min(1,s+2*(r-s))),this.isRTL?(t=1-r,n=s):(t=s,n=1-r),a.zIndex=e.level+1,a.left=100*t+"%",a.right=100*n+"%",i&&e.forwardPressure&&(a[this.isRTL?"marginLeft":"marginRight"]=20),a}});var We=me.View=Q.extend(He,Ie,{type:null,name:null,title:null,calendar:null,options:null,el:null,isDateSet:!1,isDateRendered:!1,dateRenderQueue:null,isEventsBound:!1,isEventsSet:!1,isEventsRendered:!1,eventRenderQueue:null,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(e,t,n,i){this.calendar=e,this.type=this.name=t,this.options=n,this.intervalDuration=i||L.duration(1,"day"),this.nextDayThreshold=L.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=S(this.opt("eventOrder")),this.dateRenderQueue=new J,this.eventRenderQueue=new J(this.opt("eventRenderWait")),this.initialize()},initialize:function(){},opt:function(e){return this.options[e]},publiclyTrigger:function(e,t){var n=this.calendar;return n.publiclyTrigger.apply(n,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},rejectOn:function(i,s){var r=this;return new K(function(t,e){function n(){r.off(i,e)}r.one(i,e),s.then(function(e){n(),t(e)},function(){n(),e()})})},setRange:function(e){O.extend(this,e),this.updateTitle()},computeRange:function(e){var t,n,i=C(this.intervalDuration),s=e.clone().startOf(i),r=s.clone().add(this.intervalDuration);return/year|month|week|day/.test(i)?(s.stripTime(),r.stripTime()):(s.hasTime()||(s=this.calendar.time(0)),r.hasTime()||(r=this.calendar.time(0))),t=s.clone(),t=this.skipHiddenDays(t),n=r.clone(),{intervalUnit:i,intervalStart:s,intervalEnd:r,start:t,end:n=this.skipHiddenDays(n,-1,!0)}},computePrevDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(e,t){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(e)&&(e=this.skipHiddenDays(e,t)).startOf("day"),e},updateTitle:function(){this.title=this.computeTitle(),this.calendar.setToolbarsTitle(this.title)},computeTitle:function(){var e,t;return"year"===this.intervalUnit||"month"===this.intervalUnit?(e=this.intervalStart,t=this.intervalEnd):(e=this.start,t=this.end),this.formatRange({start:this.calendar.applyTimezone(e),end:this.calendar.applyTimezone(t)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):1<this.intervalDuration.as("days")?"ll":"LL"},formatRange:function(e,t,n){var i=e.end;return i.hasTime()||(i=i.clone().subtract(1)),$e(e.start,i,t,n,this.opt("isRTL"))},getAllDayHtml:function(){return this.opt("allDayHtml")||B(this.opt("allDayText"))},buildGotoAnchorHtml:function(e,t,n){var i,s,r,a,o,l;return O.isPlainObject(e)?(i=e.date,s=e.type,r=e.forceOff):i=e,a={date:(i=me.moment(i)).format("YYYY-MM-DD"),type:s||"day"},"string"==typeof t&&(n=t,t=null),t=t?" "+(o=t,l=[],O.each(o,function(e,t){null!=t&&l.push(e+'="'+B(t)+'"')}),l.join(" ")):"",n=n||"",!r&&this.opt("navLinks")?"<a"+t+' data-goto="'+B(JSON.stringify(a))+'">'+n+"</a>":"<span"+t+">"+n+"</span>"},setElement:function(e){this.el=e,this.bindGlobalHandlers(),this.renderSkeleton()},removeElement:function(){this.unsetDate(),this.unrenderSkeleton(),this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},unrenderSkeleton:function(){},setDate:function(e){var t=this.isDateSet;this.isDateSet=!0,this.handleDate(e,t),this.trigger(t?"dateReset":"dateSet",e)},unsetDate:function(){this.isDateSet&&(this.isDateSet=!1,this.handleDateUnset(),this.trigger("dateUnset"))},handleDate:function(e,t){var n=this;this.unbindEvents(),this.requestDateRender(e).then(function(){n.bindEvents()})},handleDateUnset:function(){this.unbindEvents(),this.requestDateUnrender()},requestDateRender:function(e){var t=this;return this.dateRenderQueue.add(function(){return t.executeDateRender(e)})},requestDateUnrender:function(){var e=this;return this.dateRenderQueue.add(function(){return e.executeDateUnrender()})},executeDateRender:function(e){var t=this;return e?this.captureInitialScroll():this.captureScroll(),this.freezeHeight(),this.executeDateUnrender().then(function(){e&&t.setRange(t.computeRange(e)),t.render&&t.render(),t.renderDates(),t.updateSize(),t.renderBusinessHours(),t.startNowIndicator(),t.thawHeight(),t.releaseScroll(),t.isDateRendered=!0,t.onDateRender(),t.trigger("dateRender")})},executeDateUnrender:function(){var e=this;return e.isDateRendered?this.requestEventsUnrender().then(function(){e.unselect(),e.stopNowIndicator(),e.triggerUnrender(),e.unrenderBusinessHours(),e.unrenderDates(),e.destroy&&e.destroy(),e.isDateRendered=!1,e.trigger("dateUnrender")}):K.resolve()},onDateRender:function(){this.triggerRender()},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.publiclyTrigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.publiclyTrigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo(Pe.get(),{touchstart:this.processUnselect,mousedown:this.handleDocumentMousedown})},unbindGlobalHandlers:function(){this.stopListeningTo(Pe.get())},initThemingProps:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header",this.widgetContentClass=e+"-widget-content",this.highlightStateClass=e+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var e,t,n,i=this;this.opt("nowIndicator")&&((e=this.getNowIndicatorUnit())&&(t=Y(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,n=this.initialNowDate.clone().startOf(e).add(1,e)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){i.nowIndicatorTimeoutID=null,t(),n=+L.duration(1,e),n=Math.max(100,n),i.nowIndicatorIntervalID=setInterval(t,n)},n)))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},updateSize:function(e){e&&this.captureScroll(),this.updateHeight(e),this.updateWidth(e),this.updateNowIndicator(),e&&this.releaseScroll()},updateWidth:function(e){},updateHeight:function(e){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(e,t){},capturedScroll:null,capturedScrollDepth:0,captureScroll:function(){return!this.capturedScrollDepth++&&(this.capturedScroll=this.isDateRendered?this.queryScroll():{},!0)},captureInitialScroll:function(e){this.captureScroll()&&(this.capturedScroll.isInitial=!0,e?O.extend(this.capturedScroll,e):this.capturedScroll.isComputed=!0)},releaseScroll:function(){var e=this.capturedScroll,t=this.discardScroll();e.isComputed&&(t?O.extend(e,this.computeInitialScroll()):e=null),e&&(e.isInitial?this.hardSetScroll(e):this.setScroll(e))},discardScroll:function(){return!--this.capturedScrollDepth&&!(this.capturedScroll=null)},computeInitialScroll:function(){return{}},queryScroll:function(){return{}},hardSetScroll:function(e){var t=this,n=function(){t.setScroll(e)};n(),setTimeout(n,0)},setScroll:function(e){},freezeHeight:function(){this.calendar.freezeContentHeight()},thawHeight:function(){this.calendar.thawContentHeight()},bindEvents:function(){var t=this;this.isEventsBound||(this.isEventsBound=!0,this.rejectOn("eventsUnbind",this.requestEvents()).then(function(e){t.listenTo(t.calendar,"eventsReset",t.setEvents),t.setEvents(e)}))},unbindEvents:function(){this.isEventsBound&&(this.isEventsBound=!1,this.stopListeningTo(this.calendar,"eventsReset"),this.unsetEvents(),this.trigger("eventsUnbind"))},setEvents:function(e){var t=this.isEventSet;this.isEventsSet=!0,this.handleEvents(e,t),this.trigger(t?"eventsReset":"eventsSet",e)},unsetEvents:function(){this.isEventsSet&&(this.isEventsSet=!1,this.handleEventsUnset(),this.trigger("eventsUnset"))},whenEventsSet:function(){var t=this;return this.isEventsSet?K.resolve(this.getCurrentEvents()):new K(function(e){t.one("eventsSet",e)})},handleEvents:function(e,t){this.requestEventsRender(e)},handleEventsUnset:function(){this.requestEventsUnrender()},requestEventsRender:function(e){var t=this;return this.eventRenderQueue.add(function(){return t.executeEventsRender(e)})},requestEventsUnrender:function(){var e=this;return this.isEventsRendered?this.eventRenderQueue.addQuickly(function(){return e.executeEventsUnrender()}):K.resolve()},requestCurrentEventsRender:function(){return this.isEventsSet?void this.requestEventsRender(this.getCurrentEvents()):K.reject()},executeEventsRender:function(e){var t=this;return this.captureScroll(),this.freezeHeight(),this.executeEventsUnrender().then(function(){t.renderEvents(e),t.thawHeight(),t.releaseScroll(),t.isEventsRendered=!0,t.onEventsRender(),t.trigger("eventsRender")})},executeEventsUnrender:function(){return this.isEventsRendered&&(this.onBeforeEventsUnrender(),this.captureScroll(),this.freezeHeight(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.thawHeight(),this.releaseScroll(),this.isEventsRendered=!1,this.trigger("eventsUnrender")),K.resolve()},onEventsRender:function(){this.renderedEventSegEach(function(e){this.publiclyTrigger("eventAfterRender",e.event,e.event,e.el)}),this.publiclyTrigger("eventAfterAllRender")},onBeforeEventsUnrender:function(){this.renderedEventSegEach(function(e){this.publiclyTrigger("eventDestroy",e.event,e.event,e.el)})},renderEvents:function(e){},unrenderEvents:function(){},requestEvents:function(){return this.calendar.requestEvents(this.start,this.end)},getCurrentEvents:function(){return this.calendar.getPrunedEventCache()},resolveEventEl:function(e,t){var n=this.publiclyTrigger("eventRender",e,e,t);return!1===n?t=null:n&&!0!==n&&(t=O(n)),t},showEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","hidden")},e)},renderedEventSegEach:function(e,t){var n,i=this.getEventSegs();for(n=0;n<i.length;n++)t&&i[n].event._id!==t._id||i[n].el&&e.call(this,i[n])},getEventSegs:function(){return[]},isEventDraggable:function(e){return this.isEventStartEditable(e)},isEventStartEditable:function(e){return N(e.startEditable,(e.source||{}).startEditable,this.opt("eventStartEditable"),this.isEventGenerallyEditable(e))},isEventGenerallyEditable:function(e){return N(e.editable,(e.source||{}).editable,this.opt("editable"))},reportSegDrop:function(e,t,n,i,s){var r=this.calendar,a=r.mutateSeg(e,t,n);this.triggerEventDrop(e.event,a.dateDelta,function(){a.undo(),r.reportEventChange()},i,s),r.reportEventChange()},triggerEventDrop:function(e,t,n,i,s){this.publiclyTrigger("eventDrop",i[0],e,t,n,s,{})},reportExternalDrop:function(e,t,n,i,s){var r,a,o=e.eventProps;o&&(r=O.extend({},o,t),a=this.calendar.renderEvent(r,e.stick)[0]),this.triggerExternalDrop(a,t,n,i,s)},triggerExternalDrop:function(e,t,n,i,s){this.publiclyTrigger("drop",n[0],t.start,i,s),e&&this.publiclyTrigger("eventReceive",null,e)},renderDrag:function(e,t){},unrenderDrag:function(){},isEventResizableFromStart:function(e){return this.opt("eventResizableFromStart")&&this.isEventResizable(e)},isEventResizableFromEnd:function(e){return this.isEventResizable(e)},isEventResizable:function(e){var t=e.source||{};return N(e.durationEditable,t.durationEditable,this.opt("eventDurationEditable"),e.editable,t.editable,this.opt("editable"))},reportSegResize:function(e,t,n,i,s){var r=this.calendar,a=r.mutateSeg(e,t,n);this.triggerEventResize(e.event,a.durationDelta,function(){a.undo(),r.reportEventChange()},i,s),r.reportEventChange()},triggerEventResize:function(e,t,n,i,s){this.publiclyTrigger("eventResize",i[0],e,t,n,s,{})},select:function(e,t){this.unselect(t),this.renderSelection(e),this.reportSelection(e,t)},renderSelection:function(e){},reportSelection:function(e,t){this.isSelected=!0,this.triggerSelect(e,t)},triggerSelect:function(e,t){this.publiclyTrigger("select",null,this.calendar.applyTimezone(e.start),this.calendar.applyTimezone(e.end),t)},unselect:function(e){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.publiclyTrigger("unselect",null,e))},unrenderSelection:function(){},selectEvent:function(e){this.selectedEvent&&this.selectedEvent===e||(this.unselectEvent(),this.renderedEventSegEach(function(e){e.el.addClass("fc-selected")},e),this.selectedEvent=e)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(e){e.el.removeClass("fc-selected")},this.selectedEvent),this.selectedEvent=null)},isEventSelected:function(e){return this.selectedEvent&&this.selectedEvent._id===e._id},handleDocumentMousedown:function(e){m(e)&&this.processUnselect(e)},processUnselect:function(e){this.processRangeUnselect(e),this.processEventUnselect(e)},processRangeUnselect:function(e){var t;this.isSelected&&this.opt("unselectAuto")&&((t=this.opt("unselectCancel"))&&O(e.target).closest(t).length||this.unselect(e))},processEventUnselect:function(e){this.selectedEvent&&(O(e.target).closest(".fc-selected").length||this.unselectEvent())},triggerDayClick:function(e,t,n){this.publiclyTrigger("dayClick",t,this.calendar.applyTimezone(e.start),n)},initHiddenDays:function(){var e,t=this.opt("hiddenDays")||[],n=[],i=0;for(!1===this.opt("weekends")&&t.push(0,6),e=0;e<7;e++)(n[e]=-1!==O.inArray(e,t))||i++;if(!i)throw"invalid hiddenDays";this.isHiddenDayHash=n},isHiddenDay:function(e){return L.isMoment(e)&&(e=e.day()),this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,n){var i=e.clone();for(t=t||1;this.isHiddenDayHash[(i.day()+(n?t:0)+7)%7];)i.add(t,"days");return i},computeDayRange:function(e){var t,n=e.start.clone().stripTime(),i=e.end,s=null;return i&&(s=i.clone().stripTime(),(t=+i.time())&&t>=this.nextDayThreshold&&s.add(1,"days")),(!i||s<=n)&&(s=n.clone().add(1,"days")),{start:n,end:s}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return 1<t.end.diff(t.start,"days")}}),Ve=me.Scroller=Q.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(e){e=e||{},this.overflowX=e.overflowX||e.overflow||"auto",this.overflowY=e.overflowY||e.overflow||"auto"},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=O('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto"),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(e){var t=this.overflowX,n=this.overflowY;e=e||this.getScrollbarWidths(),"auto"===t&&(t=e.top||e.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===n&&(n=e.left||e.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":t,"overflow-y":n})},setHeight:function(e){this.scrollEl.height(e)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(e){this.scrollEl.scrollTop(e)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return o(this.scrollEl)}});de.prototype.proxyCall=function(t){var n=Array.prototype.slice.call(arguments,1),i=[];return this.items.forEach(function(e){i.push(e[t].apply(e,n))}),i};var Ye=me.Calendar=Q.extend({dirDefaults:null,localeDefaults:null,overrides:null,dynamicOverrides:null,options:null,viewSpecCache:null,view:null,header:null,footer:null,loadingLevel:0,constructor:function(n,e){function l(e){e._locale=b}function s(){return n.is(":visible")}function i(e,t){H++;var n,i=x&&e&&x.type!==e;i&&(g(),r()),!x&&e&&((x=w.view=M[e]||(M[e]=w.instantiateView(e))).setElement(O("<div class='fc-view fc-"+e+"-view' />").appendTo(D)),_.proxyCall("activateButton",e)),x&&($=x.massageCurrentDate($),x.isDateSet&&$>=x.intervalStart&&$<x.intervalEnd||s()&&(t&&x.captureInitialScroll(t),x.setDate($,t),t&&x.releaseScroll(),(n=w.getNow())>=x.intervalStart&&n<x.intervalEnd?_.proxyCall("disableButton","today"):_.proxyCall("enableButton","today"))),i&&v(),H--}function r(){_.proxyCall("deactivateButton",x.type),x.removeElement(),x=w.view=null}function a(e){if(s())return e&&t(),H++,x.updateSize(!0),H--,!0}function o(){s()&&t()}function t(){var e=w.options.contentHeight,t=w.options.height;E="number"==typeof e?e:"function"==typeof e?e():"number"==typeof t?t-c():"function"==typeof t?t()-c():"parent"===t?n.parent().height()-c():Math.round(D.width()/Math.max(w.options.aspectRatio,.5))}function c(){return _.items.reduce(function(e,t){return e+(t.el?t.el.outerHeight(!0):0)},0)}function d(e){!H&&e.target===window&&x.start&&a(!0)&&x.publiclyTrigger("windowResize",k)}function u(){return{extraClasses:"fc-header-toolbar",layout:w.options.header}}function h(){return{extraClasses:"fc-footer-toolbar",layout:w.options.footer}}function p(){S.setToolbarOptions(u()),S.render(),S.el&&n.prepend(S.el)}function f(){T.setToolbarOptions(h()),T.render(),T.el&&n.append(T.el)}function m(e,t){var n;t=t||"day",n=w.getViewSpec(t)||w.getUnitViewSpec(t),$=e.clone(),i(n?n.type:null)}function g(){I++||D.css({width:"100%",height:D.height(),overflow:"hidden"})}function v(){--I||D.css({width:"",height:"",overflow:""})}function y(e){var t,n=0;for(t in e)w.dynamicOverrides[t]=e[t];for(t in w.viewSpecCache={},w.populateOptionsHash(),e)w.triggerOptionHandlers(t),n++;if(1===n){if("height"===t||"contentHeight"===t||"aspectRatio"===t)return void a(!0);if("defaultDate"===t)return;if("businessHours"===t)return void(x&&(x.unrenderBusinessHours(),x.renderBusinessHours()));if("timezone"===t)return w.rezoneArrayEventSources(),void w.refetchEvents()}p(),f(),M={},function(){H++,g();var e=x.type,t=x.queryScroll();r(),o(),i(e,t),v(),H--}()}var b,w=this;Pe.needed(),w.render=function(){D?s()&&(o(),i()):function(){n.addClass("fc"),n.on("click.fc","a[data-goto]",function(e){var t=O(this),n=t.data("goto"),i=w.moment(n.date),s=n.type,r=x.opt("navLink"+G(s)+"Click");"function"==typeof r?r(i,e):("string"==typeof r&&(s=r),m(i,s))}),w.bindOption("theme",function(e){n.toggleClass("ui-widget",e),n.toggleClass("fc-unthemed",!e)}),w.bindOptions(["isRTL","locale"],function(e){n.toggleClass("fc-ltr",!e),n.toggleClass("fc-rtl",e)}),D=O("<div class='fc-view-container'/>").prependTo(n);var e=[new ue(w,u()),new ue(w,h())];_=new de(e),S=w.header=e[0],T=w.footer=e[1],p(),f(),i(w.options.defaultView),w.options.handleWindowResize&&(C=U(d,w.options.windowResizeDelay),O(window).resize(C))}()},w.destroy=function(){x&&x.removeElement(),_.proxyCall("removeElement"),D.remove(),n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),n.off(".fc"),C&&O(window).unbind("resize",C),Pe.unneeded()},w.rerenderEvents=function(){s()&&w.reportEventChange()},w.changeView=i,w.select=function(e,t){x.select(w.buildSelectSpan.apply(w,arguments))},w.unselect=function(){x&&x.unselect()},w.prev=function(){$=x.computePrevDate($),i()},w.next=function(){$=x.computeNextDate($),i()},w.prevYear=function(){$.add(-1,"years"),i()},w.nextYear=function(){$.add(1,"years"),i()},w.today=function(){$=w.getNow(),i()},w.gotoDate=function(e){$=w.moment(e).stripZone(),i()},w.incrementDate=function(e){$.add(L.duration(e)),i()},w.zoomTo=m,w.getDate=function(){return w.applyTimezone($)},w.getCalendar=function(){return w},w.getView=function(){return x},w.option=function(e,t){var n;if("string"==typeof e){if(void 0===t)return w.options[e];(n={})[e]=t,y(n)}else"object"==typeof e&&y(e)},w.publiclyTrigger=function(e,t){var n=Array.prototype.slice.call(arguments,2);if(t=t||k,this.triggerWith(e,t,n),w.options[e])return w.options[e].apply(t,n)},w.dynamicOverrides={},w.viewSpecCache={},w.optionHandlers={},w.overrides=O.extend({},e),w.populateOptionsHash(),w.bindOptions(["locale","monthNames","monthNamesShort","dayNames","dayNamesShort","firstDay","weekNumberCalculation"],function(e,t,n,i,s,r,a){if("iso"===a&&(a="ISO"),b=R(pe(e)),t&&(b._months=t),n&&(b._monthsShort=n),i&&(b._weekdays=i),s&&(b._weekdaysShort=s),null==r&&"ISO"===a&&(r=1),null!=r){var o=R(b._week);o.dow=r,b._week=o}"ISO"!==a&&"local"!==a&&"function"!=typeof a||(b._fullCalendar_weekCalc=a),$&&l($)}),w.defaultAllDayEventDuration=L.duration(w.options.defaultAllDayEventDuration),w.defaultTimedEventDuration=L.duration(w.options.defaultTimedEventDuration),w.moment=function(){var e;return"local"===w.options.timezone?(e=me.moment.apply(null,arguments)).hasTime()&&e.local():e="UTC"===w.options.timezone?me.moment.utc.apply(null,arguments):me.moment.parseZone.apply(null,arguments),l(e),e},w.localizeMoment=l,w.getIsAmbigTimezone=function(){return"local"!==w.options.timezone&&"UTC"!==w.options.timezone},w.applyTimezone=function(e){if(!e.hasTime())return e.clone();var t,n=w.moment(e.toArray()),i=e.time()-n.time();return i&&(t=n.clone().add(i),e.time()-t.time()==0&&(n=t)),n},w.getNow=function(){var e=w.options.now;return"function"==typeof e&&(e=e()),w.moment(e).stripZone()},w.getEventEnd=function(e){return e.end?e.end.clone():w.getDefaultEventEnd(e.allDay,e.start)},w.getDefaultEventEnd=function(e,t){var n=t.clone();return e?n.stripTime().add(w.defaultAllDayEventDuration):n.add(w.defaultTimedEventDuration),w.getIsAmbigTimezone()&&n.stripZone(),n},w.humanizeDuration=function(e){return e.locale(w.options.locale).humanize()},function(){function l(){k=function(e){var t,n,i=[];for(t=0;t<e.length;t++)(n=e[t]).start.clone().stripZone()<$&&E.getEventEnd(n).stripZone()>C&&i.push(n);return i}(R),E.trigger("eventsReset",k)}function n(e,t){return!C||e<C||$<t}function i(e,t){return C=e,$=t,s()}function s(){return r(H,"reset")}function r(e,t){var n,i;for("reset"===t?R=[]:"add"!==t&&(R=f(R,e)),n=0;n<e.length;n++)"pending"!==(i=e[n])._status&&I++,i._fetchId=(i._fetchId||0)+1,i._status="pending";for(n=0;n<e.length;n++)a(i=e[n],i._fetchId);return I?new K(function(e){E.one("eventsReceived",e)}):K.resolve(k)}function a(r,a){!function e(t,n){var i,s,r=me.sourceFetchers;for(i=0;i<r.length;i++){if(!0===(s=r[i].call(E,t,C.clone(),$.clone(),E.options.timezone,n)))return;if("object"==typeof s)return void e(s,n)}var a=t.events;if(a)O.isFunction(a)?(E.pushLoading(),a.call(E,C.clone(),$.clone(),E.options.timezone,function(e){n(e),E.popLoading()})):O.isArray(a)?n(a):n();else{var o=t.url;if(o){var l,c=t.success,d=t.error,u=t.complete;l=O.isFunction(t.data)?t.data():t.data;var h=O.extend({},l||{}),p=N(t.startParam,E.options.startParam),f=N(t.endParam,E.options.endParam),m=N(t.timezoneParam,E.options.timezoneParam);p&&(h[p]=C.format()),f&&(h[f]=$.format()),E.options.timezone&&"local"!=E.options.timezone&&(h[m]=E.options.timezone),E.pushLoading(),O.ajax(O.extend({},Ke,t,{data:h,success:function(e){e=e||[];var t=P(c,this,arguments);O.isArray(t)&&(e=t),n(e)},error:function(){P(d,this,arguments),n()},complete:function(){P(u,this,arguments),E.popLoading()}}))}else n()}}(r,function(e){var t,n,i,s=O.isArray(r.events);if(a===r._fetchId&&"rejected"!==r._status){if(r._status="resolved",e)for(t=0;t<e.length;t++)n=e[t],(i=s?n:w(n,r))&&R.push.apply(R,D(i));o()}})}function o(){--I||(l(),E.trigger("eventsReceived",k))}function c(e){var t,n,i=me.sourceNormalizers;if(O.isFunction(e)||O.isArray(e)?t={events:e}:"string"==typeof e?t={url:e}:"object"==typeof e&&(t=O.extend({},e)),t){for(t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[],O.isArray(t.events)&&(t.origArray=t.events,t.events=O.map(t.events,function(e){return w(e,t)})),n=0;n<i.length;n++)i[n].call(E,t);return t}}function t(t,e){var n,i,s;for(n=0;n<t.length;n++)i=t[n],s="pending"===i._status,i._status="rejected",s&&o();e?(H=[],R=[]):(H=O.grep(H,function(e){for(n=0;n<t.length;n++)if(e===t[n])return!1;return!0}),R=f(R,t)),l()}function d(t){return O.grep(H,function(e){return e.id&&e.id===t})[0]}function u(e){e?O.isArray(e)||(e=[e]):e=[];var t,n=[];for(t=0;t<e.length;t++)n.push.apply(n,h(e[t]));return n}function h(i){var e,t;for(e=0;e<H.length;e++)if((t=H[e])===i)return[t];return(t=d(i))?[t]:O.grep(H,function(e){return n=e,(t=i)&&n&&p(t)==p(n);var t,n})}function p(e){return("object"==typeof e?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function f(e,n){return O.grep(e,function(e){for(var t=0;t<n.length;t++)if(e.source===n[t])return!1;return!0})}function m(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).start=E.moment(n.start),n.end?n.end=E.moment(n.end):n.end=null,x(n,g(n));l()}function g(e){var i={};return O.each(e,function(e,t){var n;y(e)&&void 0!==t&&(n=t,/undefined|null|boolean|number|string/.test(O.type(n)))&&(i[e]=t)}),i}function y(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function v(e,t){var n,i,s,r,a,o=[];for(s=0;s<e.length;s++)if(i=w(e[s])){for(n=D(i),r=0;r<n.length;r++)(a=n[r]).source||(t&&(M.events.push(a),a.source=M),R.push(a));o=o.concat(n)}return o.length&&l(),o}function b(t){return O.isFunction(t)?O.grep(R,t):null!=t?(t+="",O.grep(R,function(e){return e._id==t})):R}function w(e,t){var n,i,s,r={};if(E.options.eventDataTransform&&(e=E.options.eventDataTransform(e)),t&&t.eventDataTransform&&(e=t.eventDataTransform(e)),O.extend(r,e),t&&(r.source=t),r._id=e._id||(void 0===e.id?"_fc"+Je++:e.id+""),e.className?"string"==typeof e.className?r.className=e.className.split(/\s+/):r.className=e.className:r.className=[],n=e.start||e.date,i=e.end,A(n)&&(n=L.duration(n)),A(i)&&(i=L.duration(i)),e.dow||L.isDuration(n)||L.isDuration(i))r.start=n?L.duration(n):null,r.end=i?L.duration(i):null,r._recurring=!0;else{if(n&&!(n=E.moment(n)).isValid())return!1;i&&((i=E.moment(i)).isValid()||(i=null)),void 0===(s=e.allDay)&&(s=N(t?t.allDayDefault:void 0,E.options.allDayDefault)),_(n,i,s,r)}return E.normalizeEvent(r),r}function _(e,t,n,i){i.start=e,i.end=t,i.allDay=n,S(i),fe(i)}function S(e){T(e),e.end&&!e.end.isAfter(e.start)&&(e.end=null),e.end||(E.options.forceEventDuration?e.end=E.getDefaultEventEnd(e.allDay,e.start):e.end=null)}function T(e){null==e.allDay&&(e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())),e.allDay?(e.start.stripTime(),e.end&&e.end.stripTime()):(e.start.hasTime()||(e.start=E.applyTimezone(e.start.time(0))),e.end&&!e.end.hasTime()&&(e.end=E.applyTimezone(e.end.time(0))))}function D(e,t,n){var i,s,r,a,o,l,c,d,u,h=[];if(t=t||C,n=n||$,e)if(e._recurring){if(s=e.dow)for(i={},r=0;r<s.length;r++)i[s[r]]=!0;for(a=t.clone().stripTime();a.isBefore(n);)i&&!i[a.day()]||(o=e.start,l=e.end,c=a.clone(),d=null,o&&(c=c.time(o)),l&&(d=a.clone().time(l)),u=O.extend({},e),_(c,d,!o&&!l,u),h.push(u)),a.add(1,"days")}else h.push(e);return h}function x(e,s,r){function t(e,t){return r?F(e,t,r):s.allDay?(n=e,i=t,L.duration({days:n.clone().stripTime().diff(i.clone().stripTime(),"days")})):z(e,t);var n,i}var n,i,a,o,l,c,d,u,h,p,f,m,g,v={};return(s=s||{}).start||(s.start=e.start.clone()),void 0===s.end&&(s.end=e.end?e.end.clone():null),null==s.allDay&&(s.allDay=e.allDay),S(s),S(n={start:e._start.clone(),end:e._end?e._end.clone():E.getDefaultEventEnd(e._allDay,e._start),allDay:s.allDay}),i=null!==e._end&&null===s.end,a=t(s.start,n.start),s.end?(o=t(s.end,n.end),l=o.subtract(a)):l=null,O.each(s,function(e,t){y(e)&&void 0!==t&&(v[e]=t)}),c=b(e._id),d=i,u=s.allDay,h=a,p=l,f=v,m=E.getIsAmbigTimezone(),g=[],h&&!h.valueOf()&&(h=null),p&&!p.valueOf()&&(p=null),O.each(c,function(e,t){var n,i;n={start:t.start.clone(),end:t.end?t.end.clone():null,allDay:t.allDay},O.each(f,function(e){n[e]=t[e]}),S(i={start:t._start,end:t._end,allDay:u}),d?i.end=null:p&&!i.end&&(i.end=E.getDefaultEventEnd(i.allDay,i.start)),h&&(i.start.add(h),i.end&&i.end.add(h)),p&&i.end.add(p),m&&!i.allDay&&(h||p)&&(i.start.stripZone(),i.end&&i.end.stripZone()),O.extend(t,f,i),fe(t),g.push(function(){O.extend(t,n),fe(t)})}),{dateDelta:a,durationDelta:l,undo:function(){for(var e=0;e<g.length;e++)g[e]()}}}var E=this;E.requestEvents=function(e,t){return!E.options.lazyFetching||n(e,t)?i(e,t):K.resolve(k)},E.reportEventChange=l,E.isFetchNeeded=n,E.fetchEvents=i,E.fetchEventSources=r,E.refetchEvents=s,E.refetchEventSources=function(e){return r(u(e))},E.getEventSources=function(){return H.slice(1)},E.getEventSourceById=d,E.addEventSource=function(e){var t=c(e);t&&(H.push(t),r([t],"add"))},E.removeEventSource=function(e){t(h(e))},E.removeEventSources=function(e){null==e?t(H,!0):t(u(e))},E.updateEvent=function(e){m([e])},E.updateEvents=m,E.renderEvent=function(e,t){return v([e],t)},E.renderEvents=v,E.removeEvents=function(e){var t,n;for(null==e?e=function(){return!0}:O.isFunction(e)||(t=e+"",e=function(e){return e._id==t}),R=O.grep(R,e,!0),n=0;n<H.length;n++)O.isArray(H[n].events)&&(H[n].events=O.grep(H[n].events,e,!0));l()},E.clientEvents=b,E.mutateEvent=x,E.normalizeEventDates=S,E.normalizeEventTimes=T;var C,$,k,M={events:[]},H=[M],I=0,R=[];O.each((E.options.events?[E.options.events]:[]).concat(E.options.eventSources||[]),function(e,t){var n=c(t);n&&H.push(n)}),E.getEventCache=function(){return R},E.getPrunedEventCache=function(){return k},E.rezoneArrayEventSources=function(){var e,t,n,i;for(e=0;e<H.length;e++)if(t=H[e].events,O.isArray(t))for(n=0;n<t.length;n++)(i=t[n]).start=E.moment(i.start),i.end&&(i.end=E.moment(i.end)),fe(i)},E.buildEventFromInput=w,E.expandEvent=D}.call(w);var _,S,T,D,x,E,C,$,k=n[0],M={},H=0;$=null!=w.options.defaultDate?w.moment(w.options.defaultDate).stripZone():w.getNow(),w.getSuggestedViewHeight=function(){return void 0===E&&o(),E},w.isHeightAuto=function(){return"auto"===w.options.contentHeight||"auto"===w.options.height},w.setToolbarsTitle=function(e){_.proxyCall("updateTitle",e)},w.freezeContentHeight=g,w.thawContentHeight=v;var I=0;w.initialize()},initialize:function(){},populateOptionsHash:function(){var e,t,n;e=N(this.dynamicOverrides.locale,this.overrides.locale),(t=Ue[e])||(e=Ye.defaults.locale,t=Ue[e]||{}),n=N(this.dynamicOverrides.isRTL,this.overrides.isRTL,t.isRTL,Ye.defaults.isRTL)?Ye.rtlDefaults:{},this.dirDefaults=n,this.localeDefaults=t,this.options=d([Ye.defaults,n,t,this.overrides,this.dynamicOverrides]),he(this.options)},getViewSpec:function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))},getUnitViewSpec:function(e){var t,n,i;if(-1!=O.inArray(e,we))for(t=this.header.getViewsWithButtons(),O.each(me.views,function(e){t.push(e)}),n=0;n<t.length;n++)if((i=this.getViewSpec(t[n]))&&i.singleUnit==e)return i},buildViewSpec:function(e){for(var t,n,i,s,r=this.overrides.views||{},a=[],o=[],l=[],c=e;c;)t=ge[c],n=r[c],c=null,"function"==typeof t&&(t={class:t}),t&&(a.unshift(t),o.unshift(t.defaults||{}),i=i||t.duration,c=c||t.type),n&&(l.unshift(n),i=i||n.duration,c=c||n.type);return(t=M(a)).type=e,!!t.class&&(i&&((i=L.duration(i)).valueOf()&&(s=C(t.duration=i),1===i.as(s)&&(t.singleUnit=s,l.unshift(r[s]||{})))),t.defaults=d(o),t.overrides=d(l),this.buildViewSpecOptions(t),this.buildViewSpecButtonText(t,e),t)},buildViewSpecOptions:function(e){e.options=d([Ye.defaults,e.defaults,this.dirDefaults,this.localeDefaults,this.overrides,e.overrides,this.dynamicOverrides]),he(e.options)},buildViewSpecButtonText:function(n,i){function e(e){var t=e.buttonText||{};return t[i]||(n.buttonTextKey?t[n.buttonTextKey]:null)||(n.singleUnit?t[n.singleUnit]:null)}n.buttonTextOverride=e(this.dynamicOverrides)||e(this.overrides)||n.overrides.buttonText,n.buttonTextDefault=e(this.localeDefaults)||e(this.dirDefaults)||n.defaults.buttonText||e(Ye.defaults)||(n.duration?this.humanizeDuration(n.duration):null)||i},instantiateView:function(e){var t=this.getViewSpec(e);return new t.class(this,e,t.options,t.duration)},isValidViewType:function(e){return Boolean(this.getViewSpec(e))},pushLoading:function(){this.loadingLevel++||this.publiclyTrigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.publiclyTrigger("loading",null,!1,this.view)},buildSelectSpan:function(e,t){var n=this.moment(e).stripZone();return{start:n,end:t?this.moment(t).stripZone():n.hasTime()?n.clone().add(this.defaultTimedEventDuration):n.clone().add(this.defaultAllDayEventDuration)}}});Ye.mixin(He),Ye.mixin({optionHandlers:null,bindOption:function(e,t){this.bindOptions([e],t)},bindOptions:function(e,t){var n,i={func:t,names:e};for(n=0;n<e.length;n++)this.registerOptionHandlerObj(e[n],i);this.triggerOptionHandlerObj(i)},registerOptionHandlerObj:function(e,t){(this.optionHandlers[e]||(this.optionHandlers[e]=[])).push(t)},triggerOptionHandlers:function(e){var t,n=this.optionHandlers[e]||[];for(t=0;t<n.length;t++)this.triggerOptionHandlerObj(n[t])},triggerOptionHandlerObj:function(e){var t,n=e.names,i=[];for(t=0;t<n.length;t++)i.push(this.options[n[t]]);e.func.apply(this,i)}}),Ye.defaults={titleRangeSeparator:" – ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},allDayText:"all-day",theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3},Ye.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},Ye.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var Ue=me.locales={};me.datepickerLocale=function(e,t,n){var i=Ue[e]||(Ue[e]={});i.isRTL=n.isRTL,i.weekNumberTitle=n.weekHeader,O.each(Ze,function(e,t){i[e]=t(n)}),O.datepicker&&(O.datepicker.regional[t]=O.datepicker.regional[e]=n,O.datepicker.regional.en=O.datepicker.regional[""],O.datepicker.setDefaults(n))},me.locale=function(e,t){var n,i;n=Ue[e]||(Ue[e]={}),t&&(n=Ue[e]=d([n,t])),i=pe(e),O.each(Qe,function(e,t){null==n[e]&&(n[e]=t(i,n))}),Ye.defaults.locale=e};var Ze={buttonText:function(e){return{prev:j(e.prevText),next:j(e.nextText),today:j(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}},Qe={dayOfMonthFormat:function(e,t){var n=e.longDateFormat("l");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),t.isRTL?n+=" ddd":n="ddd "+n,n},mediumTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(e){return e.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}},Xe={smallDayDateFormat:function(e){return e.isRTL?"D dd":"dd D"},weekFormat:function(e){return e.isRTL?"w[ "+e.weekNumberTitle+"]":"["+e.weekNumberTitle+" ]w"},smallWeekFormat:function(e){return e.isRTL?"w["+e.weekNumberTitle+"]":"["+e.weekNumberTitle+"]w"}};me.locale("en",Ye.englishDefaults),me.sourceNormalizers=[];var Ke={dataType:"json",cache:!(me.sourceFetchers=[])},Je=1;Ye.prototype.mutateSeg=function(e,t){return this.mutateEvent(e.event,t)},Ye.prototype.normalizeEvent=function(e){},Ye.prototype.spanContainsSpan=function(e,t){var n=e.start.clone().stripZone(),i=this.getEventEnd(e).stripZone();return t.start>=n&&t.end<=i},Ye.prototype.getPeerEvents=function(e,t){var n,i,s=this.getEventCache(),r=[];for(n=0;n<s.length;n++)i=s[n],t&&t._id===i._id||r.push(i);return r},Ye.prototype.isEventSpanAllowed=function(e,t){var n=t.source||{},i=N(t.constraint,n.constraint,this.options.eventConstraint),s=N(t.overlap,n.overlap,this.options.eventOverlap);return this.isSpanAllowed(e,i,s,t)&&(!this.options.eventAllow||!1!==this.options.eventAllow(e,t))},Ye.prototype.isExternalSpanAllowed=function(e,t,n){var i,s;return n&&(i=O.extend({},n,t),s=this.expandEvent(this.buildEventFromInput(i))[0]),s?this.isEventSpanAllowed(e,s):this.isSelectionSpanAllowed(e)},Ye.prototype.isSelectionSpanAllowed=function(e){return this.isSpanAllowed(e,this.options.selectConstraint,this.options.selectOverlap)&&(!this.options.selectAllow||!1!==this.options.selectAllow(e))},Ye.prototype.isSpanAllowed=function(e,t,n,i){var s,r,a,o,l,c;if(null!=t&&(s=this.constraintToEvents(t))){for(r=!1,o=0;o<s.length;o++)if(this.spanContainsSpan(s[o],e)){r=!0;break}if(!r)return!1}for(a=this.getPeerEvents(e,i),o=0;o<a.length;o++)if(l=a[o],this.eventIntersectsRange(l,e)){if(!1===n)return!1;if("function"==typeof n&&!n(l,i))return!1;if(i){if(!1===(c=N(l.overlap,(l.source||{}).overlap)))return!1;if("function"==typeof c&&!c(i,l))return!1}}return!0},Ye.prototype.constraintToEvents=function(e){return"businessHours"===e?this.getCurrentBusinessHourEvents():"object"==typeof e?null!=e.start?this.expandEvent(this.buildEventFromInput(e)):null:this.clientEvents(e)},Ye.prototype.eventIntersectsRange=function(e,t){var n=e.start.clone().stripZone(),i=this.getEventEnd(e).stripZone();return t.start<i&&t.end>n};var et={id:"_fcBusinessHours",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};Ye.prototype.getCurrentBusinessHourEvents=function(e){return this.computeBusinessHourEvents(e,this.options.businessHours)},Ye.prototype.computeBusinessHourEvents=function(e,t){return!0===t?this.expandBusinessHourEvents(e,[{}]):O.isPlainObject(t)?this.expandBusinessHourEvents(e,[t]):O.isArray(t)?this.expandBusinessHourEvents(e,t,!0):[]},Ye.prototype.expandBusinessHourEvents=function(e,t,n){var i,s,r=this.getView(),a=[];for(i=0;i<t.length;i++)s=t[i],n&&!s.dow||(s=O.extend({},et,s),e&&(s.start=null,s.end=null),a.push.apply(a,this.expandEvent(this.buildEventFromInput(s),r.start,r.end)));return a};var tt=me.BasicView=We.extend({scroller:null,dayGridClass:qe,dayGrid:null,dayNumbersVisible:!1,colWeekNumbersVisible:!1,cellWeekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new Ve({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){return new(this.dayGridClass.extend(nt))(this)},setRange:function(e){We.prototype.setRange.call(this,e),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(e)},computeRange:function(e){var t=We.prototype.computeRange.call(this,e);return/year|month/.test(t.intervalUnit)&&(t.start.startOf("week"),t.start=this.skipHiddenDays(t.start),t.end.weekday()&&(t.end.add(1,"week").startOf("week"),t.end=this.skipHiddenDays(t.end,-1,!0))),t},renderDates:function(){this.dayNumbersVisible=1<this.dayGrid.rowCnt,this.opt("weekNumbers")&&(this.opt("weekNumbersWithinDays")?(this.cellWeekNumbersVisible=!0,this.colWeekNumbersVisible=!1):(this.cellWeekNumbersVisible=!1,this.colWeekNumbersVisible=!0)),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.cellWeekNumbersVisible||this.colWeekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var e=this.scroller.el.addClass("fc-day-grid-container"),t=O('<div class="fc-day-grid" />').appendTo(e);this.el.find(".fc-body > tr > td").append(e),this.dayGrid.setElement(t),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.dayGrid.unrenderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&"number"!=typeof e},updateWidth:function(){this.colWeekNumbersVisible&&(this.weekNumberWidth=e(this.el.find(".fc-week-number")))},setHeight:function(e,t){var n,i,s=this.opt("eventLimit");this.scroller.clear(),a(this.headRowEl),this.dayGrid.removeSegPopover(),s&&"number"==typeof s&&this.dayGrid.limitRows(s),n=this.computeScrollerHeight(e),this.setGridHeight(n,t),s&&"number"!=typeof s&&this.dayGrid.limitRows(s),t||(this.scroller.setHeight(n),((i=this.scroller.getScrollbarWidths()).left||i.right)&&(r(this.headRowEl,i),n=this.computeScrollerHeight(e),this.scroller.setHeight(n)),this.scroller.lockOverflow(i))},computeScrollerHeight:function(e){return e-t(this.el,this.scroller.el)},setGridHeight:function(e,t){t?i(this.dayGrid.rowEls):n(this.dayGrid.rowEls,e,!0)},computeInitialScroll:function(){return{top:0}},queryScroll:function(){return{top:this.scroller.getScrollTop()}},setScroll:function(e){this.scroller.setScrollTop(e.top)},hitsNeeded:function(){this.dayGrid.hitsNeeded()},hitsNotNeeded:function(){this.dayGrid.hitsNotNeeded()},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(e,t){return this.dayGrid.queryHit(e,t)},getHitSpan:function(e){return this.dayGrid.getHitSpan(e)},getHitEl:function(e){return this.dayGrid.getHitEl(e)},renderEvents:function(e){this.dayGrid.renderEvents(e),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),nt={renderHeadIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<th class="fc-week-number '+e.widgetHeaderClass+'" '+e.weekNumberStyleAttr()+"><span>"+B(e.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(e){var t=this.view,n=this.getCellDate(e,0);return t.colWeekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+">"+t.buildGotoAnchorHtml({date:n,type:"week",forceOff:1===this.colCnt},n.format("w"))+"</td>":""},renderBgIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<td class="fc-week-number '+e.widgetContentClass+'" '+e.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+"></td>":""}},it=me.MonthView=tt.extend({computeRange:function(e){var t,n=tt.prototype.computeRange.call(this,e);return this.isFixedWeeks()&&(t=Math.ceil(n.end.diff(n.start,"weeks",!0)),n.end.add(6-t,"weeks")),n},setGridHeight:function(e,t){t&&(e*=this.rowCnt/6),n(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){return this.opt("fixedWeekCount")}});ge.basic={class:tt},ge.basicDay={type:"basic",duration:{days:1}},ge.basicWeek={type:"basic",duration:{weeks:1}},ge.month={class:it,duration:{months:1},defaults:{fixedWeekCount:!0}};var st=me.AgendaView=We.extend({scroller:null,timeGridClass:Ge,timeGrid:null,dayGridClass:qe,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new Ve({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){return new(this.timeGridClass.extend(rt))(this)},instantiateDayGrid:function(){return new(this.dayGridClass.extend(at))(this)},setRange:function(e){We.prototype.setRange.call(this,e),this.timeGrid.setRange(e),this.dayGrid&&this.dayGrid.setRange(e)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var e=this.scroller.el.addClass("fc-time-grid-container"),t=O('<div class="fc-time-grid" />').appendTo(e);this.el.find(".fc-body > tr > td").append(e),this.timeGrid.setElement(t),this.timeGrid.renderDates(),this.bottomRuleEl=O('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td></tr></tbody></table>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(e){this.timeGrid.renderNowIndicator(e)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(e){this.timeGrid.updateSize(e),We.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=e(this.el.find(".fc-axis"))},setHeight:function(e,t){var n,i,s;this.bottomRuleEl.hide(),this.scroller.clear(),a(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),(n=this.opt("eventLimit"))&&"number"!=typeof n&&(n=ot),n&&this.dayGrid.limitRows(n)),t||(i=this.computeScrollerHeight(e),this.scroller.setHeight(i),((s=this.scroller.getScrollbarWidths()).left||s.right)&&(r(this.noScrollRowEls,s),i=this.computeScrollerHeight(e),this.scroller.setHeight(i)),this.scroller.lockOverflow(s),this.timeGrid.getTotalSlatHeight()<i&&this.bottomRuleEl.show())},computeScrollerHeight:function(e){return e-t(this.el,this.scroller.el)},computeInitialScroll:function(){var e=L.duration(this.opt("scrollTime")),t=this.timeGrid.computeTimeTop(e);return(t=Math.ceil(t))&&t++,{top:t}},queryScroll:function(){return{top:this.scroller.getScrollTop()}},setScroll:function(e){this.scroller.setScrollTop(e.top)},hitsNeeded:function(){this.timeGrid.hitsNeeded(),this.dayGrid&&this.dayGrid.hitsNeeded()},hitsNotNeeded:function(){this.timeGrid.hitsNotNeeded(),this.dayGrid&&this.dayGrid.hitsNotNeeded()},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(e,t){var n=this.timeGrid.queryHit(e,t);return!n&&this.dayGrid&&(n=this.dayGrid.queryHit(e,t)),n},getHitSpan:function(e){return e.component.getHitSpan(e)},getHitEl:function(e){return e.component.getHitEl(e)},renderEvents:function(e){var t,n=[],i=[];for(t=0;t<e.length;t++)e[t].allDay?n.push(e[t]):i.push(e[t]);this.timeGrid.renderEvents(i),this.dayGrid&&this.dayGrid.renderEvents(n),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return e.start.hasTime()?this.timeGrid.renderDrag(e,t):this.dayGrid?this.dayGrid.renderDrag(e,t):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(e){e.start.hasTime()||e.end.hasTime()?this.timeGrid.renderSelection(e):this.dayGrid&&this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),rt={renderHeadIntroHtml:function(){var e,t=this.view;return t.opt("weekNumbers")?(e=this.start.format(t.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+t.widgetHeaderClass+'" '+t.axisStyleAttr()+">"+t.buildGotoAnchorHtml({date:this.start,type:"week",forceOff:1<this.colCnt},B(e))+"</th>"):'<th class="fc-axis '+t.widgetHeaderClass+'" '+t.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},at={renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"><span>"+e.getAllDayHtml()+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},ot=5,lt=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];ge.agenda={class:st,defaults:{allDaySlot:!0,slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},ge.agendaDay={type:"agenda",duration:{days:1}},ge.agendaWeek={type:"agenda",duration:{weeks:1}};var ct=We.extend({grid:null,scroller:null,initialize:function(){this.grid=new dt(this),this.scroller=new Ve({overflowX:"hidden",overflowY:"auto"})},setRange:function(e){We.prototype.setRange.call(this,e),this.grid.setRange(e)},renderSkeleton:function(){this.el.addClass("fc-list-view "+this.widgetContentClass),this.scroller.render(),this.scroller.el.appendTo(this.el),this.grid.setElement(this.scroller.scrollEl)},unrenderSkeleton:function(){this.scroller.destroy()},setHeight:function(e,t){this.scroller.setHeight(this.computeScrollerHeight(e))},computeScrollerHeight:function(e){return e-t(this.el,this.scroller.el)},renderEvents:function(e){this.grid.renderEvents(e)},unrenderEvents:function(){this.grid.unrenderEvents()},isEventResizable:function(e){return!1},isEventDraggable:function(e){return!1}}),dt=Be.extend({segSelector:".fc-list-item",hasDayInteractions:!1,spanToSegs:function(e){for(var t,n=this.view,i=n.start.clone().time(0),s=0,r=[];i<n.end;)if((t=E(e,{start:i,end:i.clone().add(1,"day")}))&&(t.dayIndex=s,r.push(t)),i.add(1,"day"),s++,t&&!t.isEnd&&e.end.hasTime()&&e.end<i.clone().add(this.view.nextDayThreshold)){t.end=e.end.clone(),t.isEnd=!0;break}return r},computeEventTimeFormat:function(){return this.view.opt("mediumTimeFormat")},handleSegClick:function(e,t){var n;Be.prototype.handleSegClick.apply(this,arguments),O(t.target).closest("a[href]").length||(n=e.event.url)&&!t.isDefaultPrevented()&&(window.location.href=n)},renderFgSegs:function(e){return(e=this.renderFgSegEls(e)).length?this.renderSegList(e):this.renderEmptyMessage(),e},renderEmptyMessage:function(){this.el.html('<div class="fc-list-empty-wrap2"><div class="fc-list-empty-wrap1"><div class="fc-list-empty">'+B(this.view.opt("noEventsMessage"))+"</div></div></div>")},renderSegList:function(e){var t,n,i,s=this.groupSegsByDay(e),r=O('<table class="fc-list-table"><tbody/></table>'),a=r.find("tbody");for(t=0;t<s.length;t++)if(n=s[t])for(a.append(this.dayHeaderHtml(this.view.start.clone().add(t,"days"))),this.sortEventSegs(n),i=0;i<n.length;i++)a.append(n[i].el);this.el.empty().append(r)},groupSegsByDay:function(e){var t,n,i=[];for(t=0;t<e.length;t++)(i[(n=e[t]).dayIndex]||(i[n.dayIndex]=[])).push(n);return i},dayHeaderHtml:function(e){var t=this.view,n=t.opt("listDayFormat"),i=t.opt("listDayAltFormat");return'<tr class="fc-list-heading" data-date="'+e.format("YYYY-MM-DD")+'"><td class="'+t.widgetHeaderClass+'" colspan="3">'+(n?t.buildGotoAnchorHtml(e,{class:"fc-list-heading-main"},B(e.format(n))):"")+(i?t.buildGotoAnchorHtml(e,{class:"fc-list-heading-alt"},B(e.format(i))):"")+"</td></tr>"},fgSegHtml:function(e){var t,n=this.view,i=["fc-list-item"].concat(this.getSegCustomClasses(e)),s=this.getSegBackgroundColor(e),r=e.event,a=r.url;return t=r.allDay?n.getAllDayHtml():n.isMultiDayEvent(r)?e.isStart||e.isEnd?B(this.getEventTimeText(e)):n.getAllDayHtml():B(this.getEventTimeText(r)),a&&i.push("fc-has-url"),'<tr class="'+i.join(" ")+'">'+(this.displayEventTime?'<td class="fc-list-item-time '+n.widgetContentClass+'">'+(t||"")+"</td>":"")+'<td class="fc-list-item-marker '+n.widgetContentClass+'"><span class="fc-event-dot"'+(s?' style="background-color:'+s+'"':"")+'></span></td><td class="fc-list-item-title '+n.widgetContentClass+'"><a'+(a?' href="'+B(a)+'"':"")+">"+B(e.event.title||"")+"</a></td></tr>"}});return ge.list={class:ct,buttonTextKey:"list",defaults:{buttonText:"list",listDayFormat:"LL",noEventsMessage:"No events to display"}},ge.listDay={type:"list",duration:{days:1},defaults:{listDayFormat:"dddd"}},ge.listWeek={type:"list",duration:{weeks:1},defaults:{listDayFormat:"dddd",listDayAltFormat:"LL"}},ge.listMonth={type:"list",duration:{month:1},defaults:{listDayAltFormat:"dddd"}},ge.listYear={type:"list",duration:{year:1},defaults:{listDayAltFormat:"dddd"}},me}),function(p,f){p.fn.extend({FullCalendarExt:function(e){var t="token="+p("#cal_token").val(),n={calendarSelector:"#calendar",loadingSelector:"#loading",lang:"fr",token:"",ajaxJsonFetch:"includes/cal_events.php?"+t+("&user_id="+p("#agent_id").val()),ajaxUiUpdate:"includes/cal_update.php?"+t,ajaxEventQuickSave:"includes/cal_quicksave.php?"+t,ajaxEventDelete:"includes/cal_delete.php?"+t,ajaxEventEdit:"includes/cal_edit_update.php?"+t,ajaxEventExport:"includes/cal_export.php?"+t,ajaxRepeatCheck:"includes/cal_check_rep_events.php?"+t,ajaxRetrieveDescription:"includes/cal_description.php?"+t,ajaxImport:"importer.php?"+t,jsonConfig:"includes/form.json",modalSelector:"#calendarModal",modalPromptSelector:"#cal_prompt",modalEditPromptSelector:"#cal_edit_prompt_save",formSearchSelector:"form#search",formAddEventSelector:"form#add_event",formFilterSelector:"form#filter-category select",formEditEventSelector:"form#edit_event",formSearchSelector:"form#search",newEventText:"Add New Availabality",successAddEventMessage:"Successfully Added Availabality",successDeleteEventMessage:"Successfully Deleted Availabality",successUpdateEventMessage:"Successfully Updated Availabality",failureAddEventMessage:"Failed To Add Availabality",failureDeleteEventMessage:"Failed To Delete Availabality",failureUpdateEventMessage:"Failed To Update Availabality",generalFailureMessage:"Failed To Execute Action",ajaxError:"Failed to load content",emptyForm:"Form cannot be empty",eventText:"Availabality: ",repetitiveEventActionText:"This is a repetitive availabality, what do you want to do?",isRTL:!1,weekNumberTitle:"W",defaultColor:"#587ca3",weekType:"agendaWeek",dayType:"agendaDay",listType:"listWeek",editable:!0,ignoreTimezone:!0,lazyFetching:!0,filter:!0,quickSave:!0,navLinks:!0,firstDay:0,gcal:!1,gcalUrlText:"View on Google",version:"modal",defaultView:"month",aspectRatio:1.35,weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",hiddenDays:[],theme:!1,themePrev:"circle-triangle-w",themeNext:"circle-triangle-e",titleFormatMonth:"",titleFormatWeek:"",titleFormatDay:"",columnFormatMonth:"",columnFormatWeek:"",columnFormatDay:"",timeFormat:"H:mm",weekMode:!0,allDaySlot:!0,allDayText:"all-day",axisFormat:"h(:mm)a",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0,enableDrop:!0,enableResize:!0,savedRedirect:"index.php",removedRedirect:"index.php",updatedRedirect:"index.php",ajaxLoaderMarkup:'<div class="loadingDiv"></div>',prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow",otherSource:!1,modalFormBody:p("#modal-form-body").html(),icons_title:!1,eventLimit:!0,eventLimitClick:"popover",palette:[["#0b57a4","#8bbdeb","#000000","#2a82d7","#148aa5","#3714a4","#587ca3","#a50516"],["#fb3c8f","#1b4f15","#1b4f15","#686868","#3aa03a","#ff0080","#fee233","#fc1cad"],["#7f2b14","#000066","#2b4726","#fd7222","#fc331c","#af31f2","#fc0d1b","#2b8a6d"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"]]},u=p.extend(n,e);if(1==u.gcal&&(u.weekType="",u.dayType=""),p(u.calendarSelector).fullCalendar({locale:u.lang,editable:u.editable,eventLimit:u.eventLimit,eventLimitClick:u.eventLimitClick,navLinks:u.navLinks,defaultView:u.defaultView,aspectRatio:u.aspectRatio,weekends:u.weekends,weekNumbers:u.weekNumbers,weekNumberCalculation:u.weekNumberCalculation,weekNumberTitle:u.weekNumberTitle,views:{month:{titleFormat:u.titleFormatMonth,columnFormat:u.columnFormatMonth},week:{titleFormat:u.titleFormatWeek,columnFormat:u.columnFormatWeek},day:{titleFormat:u.titleFormatDay,columnFormat:u.columnFormatDay}},isRTL:u.isRTL,hiddenDays:u.hiddenDays,theme:u.theme,buttonIcons:{prev:u.prev,next:u.next,prevYear:u.prevYear,nextYear:u.nextYear},themeButtonIcons:{prev:u.themePrev,next:u.themeNext},allDaySlot:u.allDaySlot,allDayText:u.allDayText,slotLabelFormat:u.axisFormat,slotDuration:u.slotDuration,minTime:u.minTime,maxTime:u.maxTime,slotEventOverlap:u.slotEventOverlap,fixedWeekCount:u.weekMode,timeFormat:u.timeFormat,header:{left:"prev,next",center:"title",right:"month,"+u.weekType+","+u.dayType+","+u.listType},monthNames:u.monthNames,monthNamesShort:u.monthNamesShort,dayNames:u.dayNames,dayNamesShort:u.dayNamesShort,buttonText:{today:u.today,month:u.month,week:u.week,day:u.day},ignoreTimezone:u.ignoreTimezone,firstDay:u.firstDay,lazyFetching:u.lazyFetching,selectable:u.quickSave,selectHelper:u.quickSave,eventStartEditable:u.enableDrop,eventDurationEditable:u.enableResize,loading:function(e){0==e?p(u.loadingSelector).hide():1==e&&p(u.loadingSelector).show()},select:function(e,t,n,i){calendar.view=i.name,"modal"==u.version&&(calendar.quickModal(e,t,n),p(u.calendarSelector).fullCalendar("unselect")),"month"!==i.name&&moment(e._d).format("HH:mm")!==moment(t._d).format("HH:mm")&&(p('#event-type option[value="false"]').prop("selected",!0),p("#event-type-select").show(),p("#event-type-selected").show())},eventSources:[u.otherSource,{url:u.ajaxJsonFetch}],eventDrop:function(e){var t=moment(e.start).format("YYYY-MM-DD"),n=moment(e.start).format("HH:mm"),i=moment(e.end).format("YYYY-MM-DD"),s=moment(e.end).format("HH:mm"),r=moment(e.end).isValid();null===e.end||"null"===e.end||0==r?Eend=t+" "+n:Eend=i+" "+s,EaD=e.allDay;var a="start="+t+" "+n+"&end="+Eend+"&id="+e.id+"&allDay="+EaD+"&original_id="+e.original_id;p.post(u.ajaxUiUpdate,a,function(e){p(u.calendarSelector).fullCalendar("refetchEvents")})},eventResize:function(e){var t=moment(e.start).format("YYYY-MM-DD"),n=moment(e.start).format("HH:mm"),i=moment(e.end).format("YYYY-MM-DD"),s=moment(e.end).format("HH:mm"),r=moment(e.end).isValid();null===e.end||"null"===e.end||0==r?(Eend=t+" "+n,EaD="false"):(Eend=i+" "+s,EaD=e.allDay);var a="start="+t+" "+n+"&end="+Eend+"&id="+e.id+"&allDay="+EaD+"&original_id="+e.original_id;p.post(u.ajaxUiUpdate,a,function(e){p(u.calendarSelector).fullCalendar("refetchEvents")})},eventRender:function(e,t,n){if(t.attr("href"))t.attr("data-toggle","modal"),t.attr("href","javascript:void(0)"),t.attr("onclick",'calendar.openModalGcal("'+e.title+'","'+e.url+'");');else{if(1==u.icons_title){var i=t.find(".fc-title").text().replace(/\[(.*?)\]/gi,'<i class="$1"></i>');t.find(".fc-title").html(i)}var s=e.color,r=moment(e.start).format("YYYY-MM-DD"),a=moment(e.start).format("HH:mm"),o=moment(e.end).format("YYYY-MM-DD"),l=moment(e.end).format("HH:mm");if(0==moment(e.end).isValid())o=r,l=a;null!==e.end&&"month"==n.name&&("H:mm"!=u.timeFormat&&"h:mm"!=u.timeFormat||(timeformat=e.start.format("H:mm")+" - "+e.end.format("H:mm"),t.find(".fc-time").html(timeformat))),"modal"==u.version&&(t.attr("data-toggle","modal"),t.attr("href","javascript:void(0)"),t.attr("onclick",'calendar.openModal("'+e.title+'","'+e.url+'","'+e.original_id+'","'+e.id+'","'+e.start+'","'+e.end+'","'+s+'","'+r+'","'+a+'","'+o+'","'+l+'");'))}}}),calendar.openModal=function(d,e,t,n,i,s,r,a,o,l,c){1==u.icons_title&&(d=d.replace(/\[(.*?)\]/gi,'<i class="$1"></i>')),p("#modal-form-body").hide(),p("#details-body").show(),calendar.title=d,calendar.id=t,calendar.rep_id=n,calendar.eventStart=i,calendar.eventEnd=s,ExpS=a+" "+o,ExpE=l+" "+c,p.ajax({type:"POST",url:u.ajaxRetrieveDescription,data:{id:calendar.id,mode:"edit"},cache:!1,beforeSend:function(){p(".loadingDiv").show(),p(".modal-footer").hide()},error:function(){p(".loadingDiv").hide(),alert(u.ajaxError)},success:function(e){p(".loadingDiv").hide();var t=p.parseJSON(e),n=t.description.replace("$null",""),i=t.color.replace("$null",""),s=t.category.replace("$null","");calendar.description_editable=t.description_editable.replace("&amp;","&"),calendar.description=n.replace("&amp;","&"),calendar.category=s.replace("&amp;","&"),calendar.color=i,calendar.data=t;var r=JSON.parse(JSON.stringify(t));p("#details-body-title").html(d),calendar.removeObjProp(r,["all-day","categorie","categories","category","color","description","description_editable","end","start","id","repeat_id","repeat_type","title","url","user_id"]);var a="";if(p.ajax({async:!1,url:u.jsonConfig,success:function(e){$json=e}}),0<p(".custom-fields").children().length&&0<Object.keys(r).length)for(var o in Object.keys(r).every(function(e){return""===r[e]||null===r[e]})||(a="<hr />"),r){var l=r[o];"file"==o&&(l=l!==f&&"undefined"!==l?'<a href="'+l+'">'+l+"</a>":"");var c=h($json,"<"+o+">");0<l.length&&(a+="<h5><strong>"+c+"</strong></h5><p>"+l+'</p><p class="custom-field-sep" style="margin-bottom: 0; height: 2px;">&nbsp;</p>')}p("#details-body-content").html(n+a),p("#export-event, #delete-event, #edit-event").show(),p("#save-changes, #add-event").hide(),p(".modal-footer").show(),p(u.modalSelector).modal("show")}}),p("#delete-event").off().on("click",function(e){calendar.remove(calendar.id),e.preventDefault()}),p("#export-event").off().on("click",function(e){calendar.exportIcal(calendar.id,calendar.title,calendar.description,ExpS,ExpE),e.preventDefault()}),p("#edit-event").off().on("click",function(e){document.getElementById("modal-form-body").reset(),p("#modal-form-body").html(u.modalFormBody),p("#export-event, #delete-event, #edit-event, #add-event").hide(),p("#save-changes").show().css("width","100%"),p("#details-body, #event-type-select").hide(),p("#repeat-type-select, #repeat-type-selected").hide(),p("#event-type-selected").show(),p("#modal-form-body").show(),p(u.modalSelector).modal("show"),p("#modal-form-body :input").each(function(){var e=p(this).attr("name");switch(p(this)[0].tagName){case"SELECT":(n=calendar.data[e])!==f&&p('option[value="'+n.replace("&amp;","&")+'"]').attr("selected","selected");break;case"INPUT":e=e.replace(/\[.*?\]/g,"");var t=p(this).attr("type"),n=calendar.data[e];if("checkbox"==t&&n!==f)for(var i=n.split(","),s=0;s<i.length;s++)p('input[value="'+i[s].trim()+'"]').attr("checked","checked");"radio"==t&&n!==f&&p('input[value="'+n+'"]').attr("checked","checked"),"file"==t&&n!==f&&"undefined"!==n&&p(this).before('<p class="file-attachment"><a href="'+n+'">'+n+"</a></p>"),"text"==t&&(p('input[name="'+e+'"]').val(calendar.data[e]),p("input[name=title]").val(calendar.data.title),p("#colorp").spectrum("set",calendar.data.color),p("#startDate").val(a),p("input#startTime").val(o),p("#endDate").val(l),p("input#endTime").val(c));break;case"TEXTAREA":n=calendar.data[e];p('textarea[name="'+e+'"]').val(n),p('textarea[name="description"]').val(calendar.data.description_editable);break;default:p(':input[name="'+e+'"]').val(calendar.data[e])}}),p("#save-changes").off().on("click",function(e){0==p("input[name=title]").val().length?alert(u.emptyForm):(editFormData=new FormData(p("#modal-form-body").get(0)),p("#file")[0]&&editFormData.append("file",p("#file")[0].files[0]),calendar.update(t,editFormData)),e.preventDefault()})})},calendar.openModalGcal=function(e,t){p("#modal-form-body").hide(),p("#details-body").show(),p("#details-body-title").html(e),p("#details-body-content").html('<a target="_blank" href="'+t+'">'+u.gcalUrlText+"</a>"),p("#export-event, #delete-event, #edit-event").hide(),p("#save-changes, #add-event").hide(),p(".modal-footer").hide(),p(u.modalSelector).modal("show")},calendar.quickModal=function(e,t,n){document.getElementById("modal-form-body").reset(),p("#modal-form-body").html(u.modalFormBody);var i=moment(e).format("YYYY-MM-DD"),s=moment(e).format("HH:mm"),r=moment(t).format("YYYY-MM-DD"),a=moment(t).format("HH:mm");if(0==moment(t).isValid())r=i,a=s;p("#startDate").val(i),p("#startTime").val(s),p("#endDate").val(r),p("#endTime").val(a),p("#details-body").hide(),p("#event-type-select").show(),p("#event-type-selected").hide(),p("#repeat-type-select").show(),p("#repeat-type-selected").hide(),p("#export-event, #delete-event, #edit-event, #save-changes").hide(),p("#add-event").show().css("width","100%"),p(".modal-footer").show(),p("#modal-form-body").show(),p("#details-body-title").html(u.newEventText),p(u.modalSelector).modal("show"),p("#event-type").on("change",function(){var e=p(this).val();"false"==e?(p("#event-type-select").show(),p("#event-type-selected").show()):"true"==e&&(p("#event-type-select").show(),p("#event-type-selected").hide())}),p("#repeat_select").on("change",function(){var e=p(this).val();"no"!==e?(p("#repeat-type-select").show(),p("#repeat-type-selected").show()):"no"==e&&(p("#repeat-type-select").show(),p("#repeat-type-selected").hide())}),p("#add-event").off().on("click",function(e){0==p("input[name=title]").val().length?alert(u.emptyForm):(formData=new FormData(p("#modal-form-body").get(0)),p("#file")[0]&&formData.append("file",p("#file")[0].files[0]),calendar.quickSave(formData)),e.preventDefault()})},calendar.quickSave=function(e){p.ajax({url:u.ajaxEventQuickSave,data:e,type:"POST",cache:!1,processData:!1,contentType:!1,beforeSend:function(){p(".loadingDiv").show(),p(".modal-footer").hide()},error:function(){p(".loadingDiv").hide(),alert(u.ajaxError)},success:function(e){p(".loadingDiv").hide(),1==e?(p(u.modalSelector).modal("hide"),p(u.calendarSelector).fullCalendar("refetchEvents")):(alert(u.failureAddEventMessage),p(".modal-footer").show())}})},calendar.update=function(t,n){var e="id="+t;p.ajax({type:"POST",url:u.ajaxRepeatCheck,data:e,cache:!1,beforeSend:function(){p(".loadingDiv").show()},error:function(){p(".loadingDiv").hide(),alert(u.ajaxError)},success:function(e){p(".loadingDiv").hide(),"REP_FOUND"==e?(p(u.modalSelector).modal("hide"),p(u.modalEditPromptSelector+" .modal-header").html('<h4 class="modal-title">'+u.eventText+calendar.title+"</h4>"),p(u.modalEditPromptSelector+" .modal-body-custom").css("padding","15px").html(u.repetitiveEventActionText),p(u.modalEditPromptSelector).modal("show"),p('[data-option="save-this"]').unbind("click").on("click",function(e){calendar.update_this(t,n),p(u.modalEditPromptSelector).modal("hide"),p(u.modalSelector).modal("hide"),e.preventDefault()}),p('[data-option="save-repetitives"]').unbind("click").on("click",function(e){calendar.update_this(t,n,"true"),p(u.modalEditPromptSelector).modal("hide"),p(u.modalSelector).modal("hide"),e.preventDefault()})):calendar.update_this(t,n)},error:function(e){alert(u.generalFailureMessage)}})},calendar.update_this=function(e,t,n){n===f?editFormData.append("id",e):(editFormData.append("id",e),editFormData.append("rep_id",calendar.rep_id),editFormData.append("method","repetitive_event")),p.ajax({type:"POST",url:u.ajaxEventEdit,data:t,cache:!1,processData:!1,contentType:!1,beforeSend:function(){p(".loadingDiv").show()},error:function(){p(".loadingDiv").hide(),alert(u.ajaxError)},success:function(e){p(".loadingDiv").hide(),""==e?(p(u.modalSelector).modal("hide"),p(u.calendarSelector).fullCalendar("refetchEvents")):alert(u.failureUpdateEventMessage)},error:function(e){alert(u.failureUpdateEventMessage)}})},calendar.remove=function(n){var t="id="+n;p.ajax({type:"POST",url:u.ajaxRepeatCheck,data:{id:n},cache:!1,beforeSend:function(){p(".loadingDiv").show()},error:function(){p(".loadingDiv").hide(),alert(u.ajaxError)},success:function(e){p(".loadingDiv").hide(),"REP_FOUND"==e?(p(u.modalSelector).modal("hide"),p(u.modalPromptSelector+" .modal-header").html('<h4 class="modal-title">'+u.eventText+calendar.title+"</h4>"),p(u.modalPromptSelector+" .modal-body").html(u.repetitiveEventActionText),p(u.modalPromptSelector).modal("show"),p('[data-option="remove-this"]').unbind("click").on("click",function(e){calendar.remove_this(t),p(u.modalPromptSelector).modal("hide"),e.preventDefault()}),p('[data-option="remove-repetitives"]').unbind("click").on("click",function(e){var t="id="+n+"&rep_id="+calendar.rep_id+"&method=repetitive_event";calendar.remove_this(t),p(u.modalPromptSelector).modal("hide"),e.preventDefault()})):calendar.remove_this(t)},error:function(e){alert(u.generalFailureMessage)}})},calendar.remove_this=function(e){p.ajax({type:"POST",url:u.ajaxEventDelete,data:e,cache:!1,beforeSend:function(){p(".loadingDiv").show()},error:function(){p(".loadingDiv").hide(),alert(u.ajaxError)},success:function(e){p(".loadingDiv").hide(),""==e?(p(u.modalSelector).modal("hide"),p(u.calendarSelector).fullCalendar("refetchEvents")):alert(u.failureDeleteEventMessage)}})},calendar.exportIcal=function(e,t,n,i,s){var r=i,a=s,o="&method=export&id="+encodeURIComponent(e)+"&title="+encodeURIComponent(t)+"&description="+encodeURIComponent(n)+"&start_date="+encodeURIComponent(r)+"&end_date="+encodeURIComponent(a);window.location=u.ajaxEventExport+o},calendar.calendarImport=function(){txt="import="+encodeURIComponent(p("#import_content").val()),p.post(u.ajaxImport,txt,function(e){alert(e),p(u.calendarSelector).fullCalendar("refetchEvents"),p("#cal_import").modal("hide"),p("#import_content").val("")})},calendar.removeObjProp=function(e,t){for(var n=0;n<t.length;n++)e.hasOwnProperty(t[n])&&delete e[t[n]]},1==u.filter){function i(){value=p(u.formSearchSelector+" input").val(),construct="search="+encodeURIComponent(value),p.post("includes/loader.php",construct,function(e){p(u.calendarSelector).fullCalendar("refetchEvents")})}p(u.formFilterSelector).on("change",function(e){selected_value=p(this).val(),construct="filter="+encodeURIComponent(selected_value),p.post("includes/loader.php",construct,function(e){p(u.calendarSelector).fullCalendar("refetchEvents")}),e.preventDefault()}),p(u.formSearchSelector).keypress(function(e){13==e.which&&(i(),e.preventDefault())}),p(u.formSearchSelector+" button").on("click",function(e){i()})}function h(e,t){var n="";for(var i in e)if(e.hasOwnProperty(i)){var s=e[i].fields;for(var r in s)s.hasOwnProperty(r)&&Object.keys(s).forEach(function(e){if(!s[e].includes(t))return!1;n=e})}return n}}})}(jQuery);var calendar={};function moveIt(e){var t=parseInt($(".testimonial.active").removeClass("active").css("left")),n=parseInt($(".testimonial").eq(e).addClass("active").css("left"));$(".testimonial").each(function(){t<n?$(this).animate({left:"-="+(n-t)+"px"}):$(this).animate({left:"+="+Math.abs(n-t)+"px"})}),$(".pager.active").removeClass("active"),$("#t_pagers").find(".pager").eq(e).addClass("active")}function onScroll(e){var n=$(document).scrollTop();$("#menu-center a").each(function(){var e=$(this),t=$(e.attr("href"));t.position().top<=n&&t.position().top+t.height()>n?($("#menu-center ul li a").removeClass("active"),e.addClass("active")):e.removeClass("active")})}function ratingsPlus(){$(".colaprating").toggle()}function validateQuickContactForm(t){if($("#contacthostform_"+t).validate({ignore:"input[type='text']:hidden",rules:{fullname:{required:!0},email:{required:!0},phone:{required:!0},message:{required:!0}},errorPlacement:function(e,t){}}),1==$("#contacthostform_"+t).valid()){console.log("valid");var e=$("#contacthostform_"+t).serialize(),n=site_url+"Inbox/quick_contact/";return console.log(n),$.ajax({type:"POST",url:n,data:e}).done(function(e){e?($("#contacthostform_"+t)[0].reset(),$("#contact_response_"+t).html('<div class="alert alert-success"><button class="close" data-dismiss="alert"></button>You successfully messaged your selected agent. Expect a response soon!</div>')):$("#contact_response_"+t).html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Something wrong.Please try again.</div>')}),!1}}function validateHostForm(){$(this);if($("#contacthostform").validate({ignore:"input[type='text']:hidden",rules:{fullname:{required:!0},email:{required:!0},phone:{required:!0},message:{required:!0}},errorPlacement:function(e,t){}}),1==$("#contacthostform").valid()){console.log("valid");var e=$("#contacthostform").serialize(),t=site_url+"Inbox/contact_agent/";console.log(t),$.ajax({url:t,type:"POST",data:e,dataType:"html",beforeSend:function(){$(".email_to_agent").button("loading")},success:function(e){e?($("#contacthostform")[0].reset(),$("#contact_response").html('<div class="alert alert-success"><button class="close" data-dismiss="alert"></button>You successfully messaged your selected agent. Expect a response soon!</div>')):$("#contact_response").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Something wrong.Please try again.</div>')},complete:function(){$(".email_to_agent").button("reset"),$(".email_to_agent").prop("onclick",null)},error:function(e){alert("Error occured.please try again")}})}}function ScrollMe(e){var t=$("#"+e).offset().top-50;$("html,body").animate({scrollTop:t},"slow")}function explode(e,t,n){if(arguments.length<2||void 0===e||void 0===t)return null;if(""===e||!1===e||null===e)return!1;if("function"==typeof e||"object"==typeof e||"function"==typeof t||"object"==typeof t)return{0:""};!0===e&&(e="1");var i=(t+="").split(e+="");return void 0===n?i:(0===n&&(n=1),0<n?n>=i.length?i:i.slice(0,n-1).concat([i.slice(n-1).join(e)]):-n>=i.length?[]:(i.splice(i.length+n),i))}function loadWishtlistModel(e){var t=site_url+"wishlist/",n={listing_id:e};$.ajax({type:"POST",cache:!1,url:t,data:n,async:!1,success:function(e){$("#wishlistContent").html(e),$("#wishlistModal").modal("show")}})}function showfields(){$(".create_new").hide(),$(".new_wishlist .form").show()}function addWishlistCategory(){if($("#category").validate({rules:{wishlist_name:{required:!0}},errorPlacement:function(e,t){$("#wishlist_name").css("border"," 1px solid red")}}),1==$("#category").valid()){var e=site_url+"wishlist/addWishlistCategories/",n={name:$("#wishlist_name").val(),visibility:$("#visibility").val()};$.ajax({type:"POST",cache:!1,url:e,data:n,async:!1,success:function(e){if(e){var t=site_url+"wishlist/wishlistCategories/";$.ajax({type:"POST",cache:!1,url:t,data:n,async:!1,success:function(e){$(".form").hide(),$("#wishlist_name").val(""),$("#wishlist_dropdown").html(e)}})}}})}}function addWishlist(){if($(".form").hide(),$("#wishlistForm").validate({rules:{note_text:{required:!0},create:{required:$(".checkbox").not(":checked")},"wishlist_category[]":{required:!0}},errorPlacement:function(e,t){$("#note_text").css("border"," 1px solid red"),""==$("#create").val()?$(".error_msgs").show():$(".error_msg").show()}}),1==$("#wishlistForm").valid()){var e=$("#wishlistForm").serialize(),t=site_url+"wishlist/createWishlist/";$.ajax({type:"POST",cache:!1,url:t,data:e,async:!1,success:function(e){e&&(e?($(".notice").html('<div  class="alert alert-success"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Your wishlist has been saved successfully </div>'),window.setTimeout(function(){location.reload()},3e3)):$(".notice").html('<div  class="alert alert-danger"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Sorry ! something went wrong,try again </div>'))}})}}function addNewCategory(){var e=$("#newWishList").serialize(),t=site_url+"wishlist/addWishlistCategories/";$("#newWishList").validate({rules:{name:{required:!0}},errorPlacement:function(e,t){$("#name").css("border"," 1px solid red")}}),1==$("#newWishList").valid()&&$.ajax({type:"POST",cache:!1,url:t,data:e,success:function(e){e&&($("#newWishlist").modal("hide"),location.reload())}})}function removeWishList(t){var e=site_url+"wishlist/remove_wishlist/",n={listing_id:t};$.ajax({type:"POST",cache:!1,url:e,data:n,async:!1,success:function(e){$("#wishListsRow_"+t).remove(),$(".wishlist_notice").show(),window.setTimeout(function(){location.reload()},3e3)}})}function updateWishCat(e){var t={id:e};$(".info").hide();var n=site_url+"wishlist/category_details/";$.ajax({type:"POST",cache:!1,url:n,data:t,async:!1,success:function(e){$("#wishlist_container").html(e)}})}function updateWishlistCat(){if($("#updateCat").validate({rules:{name:{required:!0}},errorPlacement:function(e,t){$("#name").css("border"," 1px solid red")}}),1==$("#updateCat").valid()){var e=$("#updateCat").serialize(),t=site_url+"wishlist/update_Wishlist_category/";$.ajax({type:"POST",cache:!1,url:t,data:e,async:!1,beforeSend:function(){$(".loader").show(),$("#wishlistrow").hide()},success:function(e){e&&($("#name").css("border"," 1px solid #e5e5e5"),$("#wishlistModal").modal("hide"),$("#name").val(e),$(".ListName").text(e))},complete:function(){$(".loader").hide(),$("#wishlistrow").show()}})}}function deleteWishlistCategory(t){var e=site_url+"wishlist/remove_wishlist_category/",n={id:t};$.ajax({type:"POST",cache:!1,url:e,data:n,async:!1,success:function(e){e?($("#wishlists_category_"+t).remove(),$("#display_notices").html('<div  class="alert alert-success"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Your wishlist category has been deleted successfully </div>'),window.setTimeout(function(){location.reload()},3e3)):$("#display_notices").html('<div  class="alert alert-danger"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Sorry ! something went wrong,try again </div>')}})}function updateUserNote(n){var e=$("#message_note_"+n).val(),t=site_url+"wishlist/update_note/";$.ajax({type:"POST",cache:!1,url:t,data:{id:n,note:e},async:!1,beforeSend:function(){$(".loader").show(),$("#message_note_"+n).css("display","none")},success:function(e){if(e){var t=site_url+"wishlist/get_updated_note/";$.ajax({type:"POST",cache:!1,url:t,data:{id:n},async:!1,success:function(e){e&&$("#message_note_"+n).html(e)}})}},complete:function(){$(".loader").hide(),$("#message_note_"+n).css("display","block")}})}function navigateLink(e){window.open(e,"_blank")}function getTrasnactions(e){var t=site_url+"users/get_tranactions_by_date/";$.ajax({type:"POST",cache:!1,url:t,data:{id:e},async:!1,success:function(e){e&&$("#transcation_div").html(e)}})}function if_value_is_changed(){var e=$("#city").val();console.log(e),""!=e&&($("#city").attr("value",""),$("#state").attr("value",""),$("#country").attr("value",""),$("#street").attr("value",""),$("#zipcode").attr("value",""),$("#city").attr("value",""),$("#search_form").find("input[type=hidden]").each(function(){this.value=""}),$(".search_submit").attr("disabled",!0))}function getProperty(e,t,n){$(".navTabs li").removeClass("active"),$(e).closest("li").addClass("active"),"sale"==t&&($("#search_map").hide(),$("#sold_map").hide(),$("#rent_map").hide(),$("#sale_map").show(),$("#select_sale").show(),$("#select_rent").hide(),$("#select_sold").hide(),$("#select_all").hide()),"rent"==t&&($("#search_map").hide(),$("#sold_map").hide(),$("#rent_map").show(),$("#select_rent").show(),$("#sale_map").hide(),$("#select_sale").hide(),$("#select_sold").hide(),$("#select_all").hide()),"sold"==t&&($("#search_map").hide(),$("#sold_map").show(),$("#rent_map").hide(),$("#select_rent").hide(),$("#sale_map").hide(),$("#select_sale").hide(),$("#select_sold").show(),$("#select_all").hide()),"all"==t&&($("#search_map").show(),$("#select_all").show(),$("#sold_map").hide(),$("#rent_map").hide(),$("#sale_map").hide(),$("#select_sale").hide(),$("#select_rent").hide(),$("#select_sold").hide())}function getSearchProperty(e,t){if("list"==$(".page_view").val()?($(".btn-grid").removeClass("active"),$(".btn-list").addClass("active")):($(".btn-grid").addClass("active"),$(".btn-list").removeClass("active")),$(".property_tabs li a").removeClass("active"),$(e).addClass("active"),"all"==t){$("#sort_list_type").val(""),$("#sort_lisitng_type").val("any"),$("#list_type").val("any");var n=$("#all_properties").serialize()+"&ajax=1&type=any"}else if("rent"==t){$("#sort_list_type").val("rent"),$("#sort_lisitng_type").val("rent"),$("#list_type").val("rent");n=$("#rent_properties").serialize()+"&ajax=1&type=rent"}else{$("#sort_list_type").val("sale"),$("#sort_lisitng_type").val("sale"),$("#list_type").val("sale");n=$("#sale_properties").serialize()+"&ajax=1&type=sale"}var i=site_url+"search/index/";$.ajax({type:"POST",cache:!1,url:i,data:n,beforeSend:function(){$("#search_loader").show()},success:function(e){$("#search_loader").hide(),e&&$("#sorted_listings").html(e)},complete:function(){$("#total_count").html($("#count_records").text()),loadListingMap()}})}function applyProperty(){$("#apply_property").validate({rules:{note_text:{required:!0}},messages:{note_text:{required:"Please enter your note"}},errorPlacement:function(e,t){$(t).closest("div").find(".help-block").html(e.html()),$(".submit-host-textbar").addClass("animated shake")},highlight:function(e){$(e).closest("div").removeClass("has-success").addClass("has-error")},unhighlight:function(e,t,n){$(e).closest("div").removeClass("has-error").addClass("has-success"),$(e).closest("div").find(".help-block").html("")},submitHandler:function(e){var t=site_url+"agents/ApplyProperty/",n=$("#apply_property").serialize();$.ajax({type:"POST",url:t,data:n,beforeSend:function(){$(".apply_property_class").button("loading")},success:function(e){1==e?($("#apply_property")[0].reset(),$(".alert").html("<p>Application sent successfully</p>"),$(".alert").show(),$(".apply_property_class").prop("onclick",null),$(".apply_property_class").html("Applied")):0==e?$(".alert").html("<p>Youy have already applied this listing</p>"):$(".alert").html("<p>Something wrong! Please try again</p>")},error:function(e){alert("Error occured.please try again")}})}})}function view_phone(e){console.log(e);$(this);$.ajax({url:site_url+"agents/showPhoneNumber",type:"POST",data:{id:e},dataType:"html",beforeSend:function(){$(".view_phone").button("loading")},success:function(e){$(".view_phone").fadeOut(1e3),$(".view_phone").button("reset"),$(".phoneno").html(e),$(".view_phone").prop("onclick",null)},error:function(e){alert("Error occured.please try again")}})}function add_reviews(){if($("#AddReviews").validate({ignore:"input[type='text']:hidden",rules:{"reviews[review]":{required:!0},"reviews[service_provided]":{required:!0},"reviews[service_years]":{required:!0},"reviews[address]":{required:!0},chkb:{required:!0}},messages:{chkb:{required:"Please certify the truth of this review."}},errorPlacement:function(e,t){$(".rateCat").css("border"," 1px solid red"),"chkb"==t.attr("name")&&e.insertAfter($("#register_chkb_error"))}}),1==$("#AddReviews").valid()){$(".rateCat").css("border","none");var e=site_url+"agents/AddReviews/",t=$("#AddReviews").serialize();console.log(t),$.ajax({type:"POST",cache:!1,url:e,data:t,async:!1,success:function(e){e?$("#AddReviews").html("Reviews Added successfully"):$("#AddReviews").html("<h3>Some thing wrong! Please try again</h3>")}})}}function sendCountryToAjax(e){var t,n,i=site_url+"listings/detect_listing_location/";$.ajax({type:"POST",cache:!1,data:{country:e},url:i,async:!1,success:function(e){t=e.split(",")[0],n=e.split(",")[1],$("#price").attr("placeholder","Price in "+t),$("#sqrft").attr("placeholder","Area in "+n),$("#currency_type").val(t),$("#measurement_type").val(n),console.log(t+n)}})}function withdraw_amount(){if($("#widthdraw_form").validate({rules:{withdraw_amount:{required:!0,number:!0},recipient_email:{required:!0,email:!0}},errorPlacement:function(e,t){$("#withdraw_amount").css("border"," 1px solid red"),$("#recipient_email").css("border"," 1px solid red")}}),1==$("#widthdraw_form").valid()){$("#withdraw_amount").css("border"," none"),$("#recipient_email").css("border"," none");var e=site_url+"users/verify_funds_amount/",s=$("#withdraw_amount").val();$.ajax({type:"POST",cache:!1,url:e,async:!1,success:function(e){var t=parseInt(e);if(s<=t){var n=$("#widthdraw_form").serialize(),i=site_url+"users/widthdraw_funds/";$.ajax({type:"POST",cache:!1,url:i,data:n,async:!0,dataType:"html",success:function(e){e&&(setTimeout(function(){$("#widthdraw").modal("hide")},3e3),$("#widthdraw_success").show(),window.setTimeout(function(){location.reload()},4e3))}})}else $("#widthdraw_notice").show(),window.setTimeout(function(){location.reload()},4e3)}})}}function showMore(){var s="Show more >";$(".more").each(function(){var e=$(this).html();if(90<e.length){var t=e.substr(0,90),n=e.substr(90,e.length-90);console.log(n);var i=t+'<span class="moreellipses">...&nbsp;</span><span class="morecontent"><span>'+n+'</span>&nbsp;&nbsp;<a href="" class="morelink">'+s+"</a></span>";$(this).html(i)}}),$(".morelink").click(function(){return $(this).hasClass("less")?($(this).removeClass("less"),$(this).html(s)):($(this).addClass("less"),$(this).html("Show less")),$(this).parent().prev().toggle(),$(this).prev().toggle(),!1})}!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):e(jQuery)}(function(ze,Fe){"use strict";var Ae={beforeShow:e,move:e,change:e,show:e,hide:e,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},Pe=[],Ne=!!/msie/i.exec(window.navigator.userAgent),Be=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div").style;return t.cssText="background-color:rgba(0,0,0,.5)",e(t.backgroundColor,"rgba")||e(t.backgroundColor,"hsla")}(),je=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),qe=function(){var e="";if(Ne)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function Ge(e,t,n,i){for(var s=[],r=0;r<e.length;r++){var a=e[r];if(a){var o=tinycolor(a),l=o.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(t,a)?" sp-thumb-active":"";var c=o.toString(i.preferredFormat||"rgb"),d=Be?"background-color:"+o.toRgbString():"filter:"+o.toFilter();s.push('<span title="'+c+'" data-color="'+o.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{s.push(ze("<div />").append(ze('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",i.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+s.join("")+"</div>"}function t(e,t){var n,i,s,r,a,o,l,d=(a=t,o=e,(l=ze.extend({},Ae,a)).callbacks={move:Ve(l.move,o),change:Ve(l.change,o),show:Ve(l.show,o),hide:Ve(l.hide,o),beforeShow:Ve(l.beforeShow,o)},l),u=d.flat,c=d.showSelectionPalette,h=d.localStorageKey,p=d.theme,f=d.callbacks,m=(n=Re,i=10,function(){var e=this,t=arguments;s&&clearTimeout(r),!s&&r||(r=setTimeout(function(){r=null,n.apply(e,t)},i))}),g=!1,v=!1,y=0,b=0,w=0,_=0,S=0,T=0,D=0,x=0,E=0,C=0,$=1,k=[],M=[],H={},I=d.selectionPalette.slice(0),R=d.maxSelectionSize,O="sp-dragging",L=null,z=e.ownerDocument,F=(z.body,ze(e)),A=!1,P=ze(qe,z).addClass(p),N=P.find(".sp-picker-container"),B=P.find(".sp-color"),j=P.find(".sp-dragger"),q=P.find(".sp-hue"),G=P.find(".sp-slider"),W=P.find(".sp-alpha-inner"),V=P.find(".sp-alpha"),Y=P.find(".sp-alpha-handle"),U=P.find(".sp-input"),Z=P.find(".sp-palette"),Q=P.find(".sp-initial"),X=P.find(".sp-cancel"),K=P.find(".sp-clear"),J=P.find(".sp-choose"),ee=P.find(".sp-palette-toggle"),te=F.is("input"),ne=te&&"color"===F.attr("type")&&Ue(),ie=te&&!u,se=ie?ze(je).addClass(p).addClass(d.className).addClass(d.replacerClassName):ze([]),re=ie?se:F,ae=se.find(".sp-preview-inner"),oe=d.color||te&&F.val(),le=!1,ce=d.preferredFormat,de=!d.showButtons||d.clickoutFiresChange,ue=!oe,he=d.allowEmpty&&!ne;function pe(){if(d.showPaletteOnly&&(d.showPalette=!0),ee.text(d.showPaletteOnly?d.togglePaletteMoreText:d.togglePaletteLessText),d.palette){k=d.palette.slice(0),M=ze.isArray(k[0])?k:[k],H={};for(var e=0;e<M.length;e++)for(var t=0;t<M[e].length;t++){var n=tinycolor(M[e][t]).toRgbString();H[n]=!0}}P.toggleClass("sp-flat",u),P.toggleClass("sp-input-disabled",!d.showInput),P.toggleClass("sp-alpha-enabled",d.showAlpha),P.toggleClass("sp-clear-enabled",he),P.toggleClass("sp-buttons-disabled",!d.showButtons),P.toggleClass("sp-palette-buttons-disabled",!d.togglePaletteOnly),P.toggleClass("sp-palette-disabled",!d.showPalette),P.toggleClass("sp-palette-only",d.showPaletteOnly),P.toggleClass("sp-initial-disabled",!d.showInitial),P.addClass(d.className).addClass(d.containerClassName),Re()}function fe(){if(h&&window.localStorage){try{var e=window.localStorage[h].split(",#");1<e.length&&(delete window.localStorage[h],ze.each(e,function(e,t){me(t)}))}catch(e){}try{I=window.localStorage[h].split(";")}catch(e){}}}function me(e){if(c){var t=tinycolor(e).toRgbString();if(!H[t]&&-1===ze.inArray(t,I))for(I.push(t);I.length>R;)I.shift();if(h&&window.localStorage)try{window.localStorage[h]=I.join(";")}catch(e){}}}function ge(){var n=$e(),e=ze.map(M,function(e,t){return Ge(e,n,"sp-palette-row sp-palette-row-"+t,d)});fe(),I&&e.push(Ge(function(){var e=[];if(d.showPalette)for(var t=0;t<I.length;t++){var n=tinycolor(I[t]).toRgbString();H[n]||e.push(I[t])}return e.reverse().slice(0,d.maxSelectionSize)}(),n,"sp-palette-row sp-palette-row-selection",d)),Z.html(e.join(""))}function ve(){if(d.showInitial){var e=le,t=$e();Q.html(Ge([e,t],t,"sp-palette-row-initial",d))}}function ye(){(b<=0||y<=0||_<=0)&&Re(),v=!0,P.addClass(O),L=null,F.trigger("dragstart.spectrum",[$e()])}function be(){v=!1,P.removeClass(O),F.trigger("dragstop.spectrum",[$e()])}function we(){var e=U.val();if(null!==e&&""!==e||!he){var t=tinycolor(e);t.isValid()?(Ce(t),Ie(!0)):U.addClass("sp-validation-error")}else Ce(null),Ie(!0)}function _e(){g?xe():Se()}function Se(){var e=ze.Event("beforeShow.spectrum");g?Re():(F.trigger(e,[$e()]),!1===f.beforeShow($e())||e.isDefaultPrevented()||(!function(){for(var e=0;e<Pe.length;e++)Pe[e]&&Pe[e].hide()}(),g=!0,ze(z).bind("keydown.spectrum",Te),ze(z).bind("click.spectrum",De),ze(window).bind("resize.spectrum",m),se.addClass("sp-active"),P.removeClass("sp-hidden"),Re(),Me(),le=$e(),ve(),f.show(le),F.trigger("show.spectrum",[le])))}function Te(e){27===e.keyCode&&xe()}function De(e){2!=e.button&&(v||(de?Ie(!0):Ee(),xe()))}function xe(){g&&!u&&(g=!1,ze(z).unbind("keydown.spectrum",Te),ze(z).unbind("click.spectrum",De),ze(window).unbind("resize.spectrum",m),se.removeClass("sp-active"),P.addClass("sp-hidden"),f.hide($e()),F.trigger("hide.spectrum",[$e()]))}function Ee(){Ce(le,!0)}function Ce(e,t){var n,i;tinycolor.equals(e,$e())?Me():(!e&&he?ue=!0:(ue=!1,i=(n=tinycolor(e)).toHsv(),x=i.h%360/360,E=i.s,C=i.v,$=i.a),Me(),n&&n.isValid()&&!t&&(ce=d.preferredFormat||n.getFormat()))}function $e(e){return e=e||{},he&&ue?null:tinycolor.fromRatio({h:x,s:E,v:C,a:Math.round(100*$)/100},{format:e.format||ce})}function ke(){Me(),f.move($e()),F.trigger("move.spectrum",[$e()])}function Me(){U.removeClass("sp-validation-error"),He();var e=tinycolor.fromRatio({h:x,s:1,v:1});B.css("background-color",e.toHexString());var t=ce;$<1&&(0!==$||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var n=$e({format:t}),i="";if(ae.removeClass("sp-clear-display"),ae.css("background-color","transparent"),!n&&he)ae.addClass("sp-clear-display");else{var s=n.toHexString(),r=n.toRgbString();if(Be||1===n.alpha?ae.css("background-color",r):(ae.css("background-color","transparent"),ae.css("filter",n.toFilter())),d.showAlpha){var a=n.toRgb();a.a=0;var o=tinycolor(a).toRgbString(),l="linear-gradient(left, "+o+", "+s+")";Ne?W.css("filter",tinycolor(o).toFilter({gradientType:1},s)):(W.css("background","-webkit-"+l),W.css("background","-moz-"+l),W.css("background","-ms-"+l),W.css("background","linear-gradient(to right, "+o+", "+s+")"))}i=n.toString(t)}d.showInput&&U.val(i),d.showPalette&&ge(),ve()}function He(){var e=E,t=C;if(he&&ue)Y.hide(),G.hide(),j.hide();else{Y.show(),G.show(),j.show();var n=e*y,i=b-t*b;n=Math.max(-w,Math.min(y-w,n-w)),i=Math.max(-w,Math.min(b-w,i-w)),j.css({top:i+"px",left:n+"px"});var s=$*S;Y.css({left:s-T/2+"px"});var r=x*_;G.css({top:r-D+"px"})}}function Ie(e){var t=$e(),n="",i=!tinycolor.equals(t,le);t&&(n=t.toString(ce),me(t)),te&&F.val(n),e&&i&&(f.change(t),F.trigger("change",[t]))}function Re(){var e,t,n,i,s,r,a,o,l,c;g&&(y=B.width(),b=B.height(),w=j.height(),q.width(),_=q.height(),D=G.height(),S=V.width(),T=Y.width(),u||(P.css("position","absolute"),d.offset?P.offset(d.offset):P.offset((t=re,n=(e=P).outerWidth(),i=e.outerHeight(),s=t.outerHeight(),r=e[0].ownerDocument,a=r.documentElement,o=a.clientWidth+ze(r).scrollLeft(),l=a.clientHeight+ze(r).scrollTop(),(c=t.offset()).top+=s,c.left-=Math.min(c.left,c.left+n>o&&n<o?Math.abs(c.left+n-o):0),c.top-=Math.min(c.top,c.top+i>l&&i<l?Math.abs(i+s-0):0),c))),He(),d.showPalette&&ge(),F.trigger("reflow.spectrum"))}function Oe(){xe(),A=!0,F.attr("disabled",!0),re.addClass("sp-disabled")}!function(){if(Ne&&P.find("*:not(input)").attr("unselectable","on"),pe(),ie&&F.after(se).hide(),he||K.hide(),u)F.after(P).hide();else{var e="parent"===d.appendTo?F.parent():ze(d.appendTo);1!==e.length&&(e=ze("body")),e.append(P)}function t(e){return e.data&&e.data.ignore?(Ce(ze(e.target).closest(".sp-thumb-el").data("color")),ke()):(Ce(ze(e.target).closest(".sp-thumb-el").data("color")),ke(),Ie(!0),d.hideAfterPaletteSelect&&xe()),!1}fe(),re.bind("click.spectrum touchstart.spectrum",function(e){A||_e(),e.stopPropagation(),ze(e.target).is("input")||e.preventDefault()}),(F.is(":disabled")||!0===d.disabled)&&Oe(),P.click(We),U.change(we),U.bind("paste",function(){setTimeout(we,1)}),U.keydown(function(e){13==e.keyCode&&we()}),X.text(d.cancelText),X.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Ee(),xe()}),K.attr("title",d.clearText),K.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),ue=!0,ke(),u&&Ie(!0)}),J.text(d.chooseText),J.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Ne&&U.is(":focus")&&U.trigger("change"),U.hasClass("sp-validation-error")||(Ie(!0),xe())}),ee.text(d.showPaletteOnly?d.togglePaletteMoreText:d.togglePaletteLessText),ee.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),d.showPaletteOnly=!d.showPaletteOnly,d.showPaletteOnly||u||P.css("left","-="+(N.outerWidth(!0)+5)),pe()}),Ye(V,function(e,t,n){$=e/S,ue=!1,n.shiftKey&&($=Math.round(10*$)/10),ke()},ye,be),Ye(q,function(e,t){x=parseFloat(t/_),ue=!1,d.showAlpha||($=1),ke()},ye,be),Ye(B,function(e,t,n){if(n.shiftKey){if(!L){var i=E*y,s=b-C*b,r=Math.abs(e-i)>Math.abs(t-s);L=r?"x":"y"}}else L=null;var a=!L||"y"===L;(!L||"x"===L)&&(E=parseFloat(e/y)),a&&(C=parseFloat((b-t)/b)),ue=!1,d.showAlpha||($=1),ke()},ye,be),oe?(Ce(oe),Me(),ce=d.preferredFormat||tinycolor(oe).format,me(oe)):Me(),u&&Se();var n=Ne?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Z.delegate(".sp-thumb-el",n,t),Q.delegate(".sp-thumb-el:nth-child(1)",n,{ignore:!0},t)}();var Le={show:Se,hide:xe,toggle:_e,reflow:Re,option:function(e,t){return e===Fe?ze.extend({},d):t===Fe?d[e]:(d[e]=t,"preferredFormat"===e&&(ce=d.preferredFormat),void pe())},enable:function(){A=!1,F.attr("disabled",!1),re.removeClass("sp-disabled")},disable:Oe,offset:function(e){d.offset=e,Re()},set:function(e){Ce(e),Ie()},get:$e,destroy:function(){F.show(),re.unbind("click.spectrum touchstart.spectrum"),P.remove(),se.remove(),Pe[Le.id]=null},container:P};return Le.id=Pe.push(Le)-1,Le}function e(){}function We(e){e.stopPropagation()}function Ve(e,t){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}function Ye(a,o,t,e){o=o||function(){},t=t||function(){},e=e||function(){};var l=document,c=!1,d={},u=0,h=0,p="ontouchstart"in window,n={};function f(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function i(e){if(c){if(Ne&&l.documentMode<9&&!e.button)return m();var t=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],n=t&&t.pageX||e.pageX,i=t&&t.pageY||e.pageY,s=Math.max(0,Math.min(n-d.left,h)),r=Math.max(0,Math.min(i-d.top,u));p&&f(e),o.apply(a,[s,r,e])}}function m(){c&&(ze(l).unbind(n),ze(l.body).removeClass("sp-dragging"),setTimeout(function(){e.apply(a,arguments)},0)),c=!1}n.selectstart=f,n.dragstart=f,n["touchmove mousemove"]=i,n["touchend mouseup"]=m,ze(a).bind("touchstart mousedown",function(e){(e.which?3==e.which:2==e.button)||c||!1!==t.apply(a,arguments)&&(c=!0,u=ze(a).height(),h=ze(a).width(),d=ze(a).offset(),ze(l).bind(n),ze(l.body).addClass("sp-dragging"),i(e),f(e))})}function Ue(){return ze.fn.spectrum.inputTypeColorSupport()}var r="spectrum.id";ze.fn.spectrum=function(n,e){if("string"==typeof n){var i=this,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=Pe[ze(this).data(r)];if(e){var t=e[n];if(!t)throw new Error("Spectrum: no such method: '"+n+"'");"get"==n?i=e.get():"container"==n?i=e.container:"option"==n?i=e.option.apply(e,s):"destroy"==n?(e.destroy(),ze(this).removeData(r)):t.apply(e,s)}}),i}return this.spectrum("destroy").each(function(){var e=t(this,ze.extend({},n,ze(this).data()));ze(this).data(r,e.id)})},ze.fn.spectrum.load=!0,ze.fn.spectrum.loadOpts={},ze.fn.spectrum.draggable=Ye,ze.fn.spectrum.defaults=Ae,ze.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var t=ze("<input type='color'/>")[0];e._cachedResult="color"===t.type&&""!==t.value}return e._cachedResult},ze.spectrum={},ze.spectrum.localization={},ze.spectrum.palettes={},ze.fn.spectrum.processNativeColorInputs=function(){var e=ze("input[type=color]");e.length&&!Ue()&&e.spectrum({preferredFormat:"hex6"})},function(){var l=/^[\s,#]+/,c=/\s+$/,i=0,d=Math,r=d.round,u=d.min,h=d.max,e=d.random,p=function(e,t){if(t=t||{},(e=e||"")instanceof p)return e;if(!(this instanceof p))return new p(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,i=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(l,"").replace(c,"").toLowerCase();var t,n=!1;if(E[e])e=E[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=F.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=F.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=F.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=F.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=F.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=F.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=F.hex8.exec(e))return{a:(i=t[1],H(i)/255),r:H(t[2]),g:H(t[3]),b:H(t[4]),format:n?"name":"hex8"};var i;if(t=F.hex6.exec(e))return{r:H(t[1]),g:H(t[2]),b:H(t[3]),format:n?"name":"hex"};if(t=F.hex3.exec(e))return{r:H(t[1]+""+t[1]),g:H(t[2]+""+t[2]),b:H(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(r=e.r,a=e.g,o=e.b,t={r:255*k(r,255),g:255*k(a,255),b:255*k(o,255)},i=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=R(e.s),e.v=R(e.v),t=function(e,t,n){e=6*k(e,360),t=k(t,100),n=k(n,100);var i=d.floor(e),s=e-i,r=n*(1-t),a=n*(1-s*t),o=n*(1-(1-s)*t),l=i%6;return{r:255*[n,a,r,r,o,n][l],g:255*[o,n,n,a,r,r][l],b:255*[r,r,o,n,n,a][l]}}(e.h,e.s,e.v),i=!0,s="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=R(e.s),e.l=R(e.l),t=function(e,t,n){var i,s,r;function a(e,t,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=k(e,360),t=k(t,100),n=k(n,100),0===t)i=s=r=n;else{var o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=a(l,o,e+1/3),s=a(l,o,e),r=a(l,o,e-1/3)}return{r:255*i,g:255*s,b:255*r}}(e.h,e.s,e.l),i=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));var r,a,o;return n=$(n),{ok:i,format:e.format||s,r:u(255,h(t.r,0)),g:u(255,h(t.g,0)),b:u(255,h(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=r(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=n.ok,this._tc_id=i++};function s(e,t,n){e=k(e,255),t=k(t,255),n=k(n,255);var i,s,r=h(e,t,n),a=u(e,t,n),o=(r+a)/2;if(r==a)i=s=0;else{var l=r-a;switch(s=.5<o?l/(2-r-a):l/(r+a),r){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:s,l:o}}function a(e,t,n){e=k(e,255),t=k(t,255),n=k(n,255);var i,s,r=h(e,t,n),a=u(e,t,n),o=r,l=r-a;if(s=0===r?0:l/r,r==a)i=0;else{switch(r){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:s,v:o}}function t(e,t,n,i){var s=[I(r(e).toString(16)),I(r(t).toString(16)),I(r(n).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function o(e,t,n,i){var s;return[I((s=i,Math.round(255*parseFloat(s)).toString(16))),I(r(e).toString(16)),I(r(t).toString(16)),I(r(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s-=t/100,n.s=M(n.s),p(n)}function f(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s+=t/100,n.s=M(n.s),p(n)}function m(e){return p(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l+=t/100,n.l=M(n.l),p(n)}function v(e,t){t=0===t?0:t||10;var n=p(e).toRgb();return n.r=h(0,u(255,n.r-r(-t/100*255))),n.g=h(0,u(255,n.g-r(-t/100*255))),n.b=h(0,u(255,n.b-r(-t/100*255))),p(n)}function y(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l-=t/100,n.l=M(n.l),p(n)}function b(e,t){var n=p(e).toHsl(),i=(r(n.h)+t)%360;return n.h=i<0?360+i:i,p(n)}function w(e){var t=p(e).toHsl();return t.h=(t.h+180)%360,p(t)}function _(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+120)%360,s:t.s,l:t.l}),p({h:(n+240)%360,s:t.s,l:t.l})]}function S(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+90)%360,s:t.s,l:t.l}),p({h:(n+180)%360,s:t.s,l:t.l}),p({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+72)%360,s:t.s,l:t.l}),p({h:(n+216)%360,s:t.s,l:t.l})]}function D(e,t,n){t=t||6,n=n||30;var i=p(e).toHsl(),s=360/n,r=[p(e)];for(i.h=(i.h-(s*t>>1)+720)%360;--t;)i.h=(i.h+s)%360,r.push(p(i));return r}function x(e,t){t=t||6;for(var n=p(e).toHsv(),i=n.h,s=n.s,r=n.v,a=[],o=1/t;t--;)a.push(p({h:i,s:s,v:r})),r=(r+o)%1;return a}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=$(e),this._roundA=r(100*this._a)/100,this},toHsv:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=a(this._r,this._g,this._b),t=r(360*e.h),n=r(100*e.s),i=r(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=s(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=s(this._r,this._g,this._b),t=r(360*e.h),n=r(100*e.s),i=r(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return o(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*k(this._r,255))+"%",g:r(100*k(this._g,255))+"%",b:r(100*k(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*k(this._r,255))+"%, "+r(100*k(this._g,255))+"%, "+r(100*k(this._b,255))+"%)":"rgba("+r(100*k(this._r,255))+"%, "+r(100*k(this._g,255))+"%, "+r(100*k(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(C[t(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+o(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";e&&(n=p(e).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&0<=this._a;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},p.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:R(e[i]));e=n}return p(e,t)},p.equals=function(e,t){return!(!e||!t)&&p(e).toRgbString()==p(t).toRgbString()},p.random=function(){return p.fromRatio({r:e(),g:e(),b:e()})},p.mix=function(e,t,n){n=0===n?0:n||50;var i,s=p(e).toRgb(),r=p(t).toRgb(),a=n/100,o=2*a-1,l=r.a-s.a,c=1-(i=((i=o*l==-1?o:(o+l)/(1+o*l))+1)/2),d={r:r.r*i+s.r*c,g:r.g*i+s.g*c,b:r.b*i+s.b*c,a:r.a*a+s.a*(1-a)};return p(d)},p.readability=function(e,t){var n=p(e),i=p(t),s=n.toRgb(),r=i.toRgb(),a=n.getBrightness(),o=i.getBrightness(),l=Math.max(s.r,r.r)-Math.min(s.r,r.r)+Math.max(s.g,r.g)-Math.min(s.g,r.g)+Math.max(s.b,r.b)-Math.min(s.b,r.b);return{brightness:Math.abs(a-o),color:l}},p.isReadable=function(e,t){var n=p.readability(e,t);return 125<n.brightness&&500<n.color},p.mostReadable=function(e,t){for(var n=null,i=0,s=!1,r=0;r<t.length;r++){var a=p.readability(e,t[r]),o=125<a.brightness&&500<a.color,l=a.brightness/125*3+a.color/500;(o&&!s||o&&s&&i<l||!o&&!s&&i<l)&&(s=o,i=l,n=p(t[r]))}return n};var E=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=p.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(E);function $(e){return e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=1),e}function k(e,t){var n;"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var i,s="string"==typeof(i=e)&&-1!=i.indexOf("%");return e=u(t,h(0,parseFloat(e))),s&&(e=parseInt(e*t,10)/100),d.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function M(e){return u(1,h(0,e))}function H(e){return parseInt(e,16)}function I(e){return 1==e.length?"0"+e:""+e}function R(e){return e<=1&&(e=100*e+"%"),e}var O,L,z,F=(L="[\\s|\\(]+("+(O="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+O+")[,|\\s]+("+O+")\\s*\\)?",z="[\\s|\\(]+("+O+")[,|\\s]+("+O+")[,|\\s]+("+O+")[,|\\s]+("+O+")\\s*\\)?",{rgb:new RegExp("rgb"+L),rgba:new RegExp("rgba"+z),hsl:new RegExp("hsl"+L),hsla:new RegExp("hsla"+z),hsv:new RegExp("hsv"+L),hsva:new RegExp("hsva"+z),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=p}(),ze(function(){ze.fn.spectrum.load&&ze.fn.spectrum.processNativeColorInputs()})}),function(o){o.fn.extend({sliderAccess:function(a){return(a=a||{}).touchonly=void 0===a.touchonly||a.touchonly,!0!==a.touchonly||"ontouchend"in document?o(this).each(function(e,t){var c=o(this),n=o.extend({},{where:"after",step:c.slider("option","step"),upIcon:"ui-icon-plus",downIcon:"ui-icon-minus",text:!1,upText:"+",downText:"-",buttonset:!0,buttonsetTag:"span",isRTL:!1},a),i=o("<"+n.buttonsetTag+' class="ui-slider-access"><button data-icon="'+n.downIcon+'" data-step="'+(n.isRTL?n.step:-1*n.step)+'">'+n.downText+'</button><button data-icon="'+n.upIcon+'" data-step="'+(n.isRTL?-1*n.step:n.step)+'">'+n.upText+"</button></"+n.buttonsetTag+">");i.children("button").each(function(e,t){var l=o(this);l.button({text:n.text,icons:{primary:l.data("icon")}}).click(function(e){var t=l.data("step"),n=c.slider("value"),i=n+=1*t,s=c.slider("option","min"),r=c.slider("option","max"),a=c.slider("option","slide")||function(){},o=c.slider("option","stop")||function(){};e.preventDefault(),i<s||r<i||(c.slider("value",i),a.call(c,null,{value:i}),o.call(c,null,{value:i}))})}),c[n.where](i),n.buttonset&&(i.removeClass("ui-corner-right").removeClass("ui-corner-left").buttonset(),i.eq(0).addClass("ui-corner-left"),i.eq(1).addClass("ui-corner-right"));var s=i.css({marginLeft:"after"===n.where&&!n.isRTL||"before"===n.where&&n.isRTL?10:0,marginRight:"before"===n.where&&!n.isRTL||"after"===n.where&&n.isRTL?10:0}).outerWidth(!0)+5,r=c.outerWidth(!0);c.css("display","inline-block").width(r-s)}):o(this)}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-ui"],e):e(jQuery)}(function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.6.3"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",oneLine:!1,defaultValue:null,parse:"strict",afterInject:null},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}for(i in overrides={beforeShow:function(e,t){return $.isFunction(tp_inst._defaults.evnts.beforeShow)?tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst):void 0},onChangeMonthYear:function(e,t,n){$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,n,tp_inst)},onClose:function(e,t){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}},overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||this._defaults[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&void 0===$.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(0<tzl&&"object"!=typeof timezoneList[0])for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField),!0===tp_inst._defaults.altRedirectFocus&&tp_inst.$altInput.css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),(0===tp_inst._defaults.minDate||0===tp_inst._defaults.minDateTime)&&(tp_inst._defaults.minDate=new Date),(0===tp_inst._defaults.maxDate||0===tp_inst._defaults.maxDateTime)&&(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=$.trim(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker(),this._afterInject()},_parseTime:function(t,e){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),e||!this._defaults.timeOnly){var n=$.datepicker._get(this.inst,"dateFormat");try{var i=parseDateTimeInternal(n,this._defaults.timeFormat,t,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!i.timeObj)return!1;$.extend(this,i.timeObj)}catch(e){return $.timepicker.log("Error parsing the date/time string: "+e+"\ndate/time string = "+t+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+n),!1}return!0}var s=$.datepicker.parseTime(this._defaults.timeFormat,t,this._defaults);return!!s&&($.extend(this,s),!0)},_afterInject:function(){var e=this.inst.settings;$.isFunction(e.afterInject)&&e.afterInject.call(this)},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,a=this,o="",n="",i=null,s={},r={},l=null,c=0,d=0;if(0===e.find("div.ui-timepicker-div").length&&t.showTimepicker){var u=" ui_tpicker_unit_hide",h='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+(t.oneLine&&"select"===t.controlType?" ui-timepicker-oneLine":"")+'"><dl><dt class="ui_tpicker_time_label'+(t.showTime?"":u)+'">'+t.timeText+'</dt><dd class="ui_tpicker_time '+(t.showTime?"":u)+'"><input class="ui_tpicker_time_input" '+(t.timeInput?"":"disabled")+"/></dd>";for(c=0,d=this.units.length;c<d;c++){if(i=null!==t["show"+(n=(o=this.units[c]).substr(0,1).toUpperCase()+o.substr(1))]?t["show"+n]:this.support[o],s[o]=parseInt(t[o+"Max"]-(t[o+"Max"]-t[o+"Min"])%t["step"+n],10),r[o]=0,h+='<dt class="ui_tpicker_'+o+"_label"+(i?"":u)+'">'+t[o+"Text"]+'</dt><dd class="ui_tpicker_'+o+(i?"":u)+'"><div class="ui_tpicker_'+o+"_slider"+(i?"":u)+'"></div>',i&&0<t[o+"Grid"]){if(h+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"===o)for(var p=t[o+"Min"];p<=s[o];p+=parseInt(t[o+"Grid"],10)){r[o]++;var f=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:p},t);h+='<td data-for="'+o+'">'+f+"</td>"}else for(var m=t[o+"Min"];m<=s[o];m+=parseInt(t[o+"Grid"],10))r[o]++,h+='<td data-for="'+o+'">'+(m<10?"0":"")+m+"</td>";h+="</tr></table></div>"}h+="</dd>"}var g=null!==t.showTimezone?t.showTimezone:this.support.timezone;h+='<dt class="ui_tpicker_timezone_label'+(g?"":u)+'">'+t.timezoneText+"</dt>",h+='<dd class="ui_tpicker_timezone'+(g?"":u)+'"></dd>';var v=$(h+="</dl></div>");for(!0===t.timeOnly&&(v.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div></div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),c=0,d=a.units.length;c<d;c++)i=null!==t["show"+(n=(o=a.units[c]).substr(0,1).toUpperCase()+o.substr(1))]?t["show"+n]:this.support[o],a[o+"_slider"]=a.control.create(a,v.find(".ui_tpicker_"+o+"_slider"),o,a[o],t[o+"Min"],s[o],t["step"+n]),i&&0<t[o+"Grid"]&&(l=100*r[o]*t[o+"Grid"]/(s[o]-t[o+"Min"]),v.find(".ui_tpicker_"+o+" table").css({width:l+"%",marginLeft:t.isRTL?"0":l/(-2*r[o])+"%",marginRight:t.isRTL?l/(-2*r[o])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var t=$(this),n=t.html(),i=parseInt(n.replace(/[^0-9]/g),10),s=n.replace(/[^apm]/gi),r=t.data("for");"hour"===r&&(-1!==s.indexOf("p")&&i<12?i+=12:-1!==s.indexOf("a")&&12===i&&(i=0)),a.control.value(a,a[r+"_slider"],o,i),a._onTimeChange(),a._onSelectHandler()}).css({cursor:"pointer",width:100/r[o]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=v.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e,t){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),void 0!==this.timezone&&null!==this.timezone&&""!==this.timezone)-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()===this.timezone?selectLocalTimezone(a):this.timezone_select.val(this.timezone);else void 0!==this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.timezone):selectLocalTimezone(a);this.timezone_select.change(function(){a._onTimeChange(),a._onSelectHandler(),a._afterInject()});var y=e.find(".ui-datepicker-buttonpane");if(y.length?y.before(v):e.append(v),this.$timeObj=v.find(".ui_tpicker_time_input"),this.$timeObj.change(function(){var e=a.inst.settings.timeFormat,t=$.datepicker.parseTime(e,this.value),n=new Date;t?(n.setHours(t.hour),n.setMinutes(t.minute),n.setSeconds(t.second),$.datepicker._setTime(a.inst,n)):(this.value=a.formattedTime,this.blur())}),null!==this.inst){var b=this.timeDefined;this._onTimeChange(),this.timeDefined=b}if(this._defaults.addSliderAccess){var w=this._defaults.sliderAccessArgs,_=this._defaults.isRTL;w.isRTL=_,setTimeout(function(){if(0===v.find(".ui-slider-access").length){v.find(".ui-slider:visible").sliderAccess(w);var a=v.find(".ui-slider-access:eq(0)").outerWidth(!0);a&&v.find("table:visible").each(function(){var e=$(this),t=e.outerWidth(),n=e.css(_?"marginRight":"marginLeft").toString().replace("%",""),i=t-a,s=n*i/t+"%",r={width:i,marginRight:0,marginLeft:0};r[_?"marginRight":"marginLeft"]=s,e.css(r)})}},10)}a._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(e,t){var n=this._defaults,i=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&i){var s=$.datepicker._get(e,"minDateTime"),r=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0);(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal||null===this.microsecMinOriginal)&&(this.hourMinOriginal=n.hourMin,this.minuteMinOriginal=n.minuteMin,this.secondMinOriginal=n.secondMin,this.millisecMinOriginal=n.millisecMin,this.microsecMinOriginal=n.microsecMin),e.settings.timeOnly||r.getTime()===i.getTime()?(this._defaults.hourMin=s.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=s.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=s.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=s.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=s.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&i){var a=$.datepicker._get(e,"maxDateTime"),o=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal||null===this.millisecMaxOriginal)&&(this.hourMaxOriginal=n.hourMax,this.minuteMaxOriginal=n.minuteMax,this.secondMaxOriginal=n.secondMax,this.millisecMaxOriginal=n.millisecMax,this.microsecMaxOriginal=n.microsecMax),e.settings.timeOnly||o.getTime()===i.getTime()?(this._defaults.hourMax=a.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=a.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=a.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=a.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=a.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(null!==e.settings.minTime){var l=new Date("01/01/1970 "+e.settings.minTime);this.hour<l.getHours()?(this.hour=this._defaults.hourMin=l.getHours(),this.minute=this._defaults.minuteMin=l.getMinutes()):this.hour===l.getHours()&&this.minute<l.getMinutes()?this.minute=this._defaults.minuteMin=l.getMinutes():this._defaults.hourMin<l.getHours()?(this._defaults.hourMin=l.getHours(),this._defaults.minuteMin=l.getMinutes()):this._defaults.hourMin===l.getHours()===this.hour&&this._defaults.minuteMin<l.getMinutes()?this._defaults.minuteMin=l.getMinutes():this._defaults.minuteMin=0}if(null!==e.settings.maxTime){var c=new Date("01/01/1970 "+e.settings.maxTime);this.hour>c.getHours()?(this.hour=this._defaults.hourMax=c.getHours(),this.minute=this._defaults.minuteMax=c.getMinutes()):this.hour===c.getHours()&&this.minute>c.getMinutes()?this.minute=this._defaults.minuteMax=c.getMinutes():this._defaults.hourMax>c.getHours()?(this._defaults.hourMax=c.getHours(),this._defaults.minuteMax=c.getMinutes()):this._defaults.hourMax===c.getHours()===this.hour&&this._defaults.minuteMax>c.getMinutes()?this._defaults.minuteMax=c.getMinutes():this._defaults.minuteMax=59}if(void 0!==t&&!0===t){var d=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),u=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),h=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),p=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),f=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:d,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:u,step:this._defaults.stepMinute}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:h,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:p,step:this._defaults.stepMillisec}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:f,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var e=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),t=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),n=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),i=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),s=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),r=!!this.timezone_select&&this.timezone_select.val(),a=this._defaults,o=a.pickerTimeFormat||a.timeFormat,l=a.pickerTimeSuffix||a.timeSuffix;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof n&&(n=!1),"object"==typeof i&&(i=!1),"object"==typeof s&&(s=!1),"object"==typeof r&&(r=!1),!1!==e&&(e=parseInt(e,10)),!1!==t&&(t=parseInt(t,10)),!1!==n&&(n=parseInt(n,10)),!1!==i&&(i=parseInt(i,10)),!1!==s&&(s=parseInt(s,10)),!1!==r&&(r=r.toString());var c=a[e<12?"amNames":"pmNames"][0],d=e!==parseInt(this.hour,10)||t!==parseInt(this.minute,10)||n!==parseInt(this.second,10)||i!==parseInt(this.millisec,10)||s!==parseInt(this.microsec,10)||0<this.ampm.length&&e<12!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&r!==this.timezone.toString();if(d&&(!1!==e&&(this.hour=e),!1!==t&&(this.minute=t),!1!==n&&(this.second=n),!1!==i&&(this.millisec=i),!1!==s&&(this.microsec=s),!1!==r&&(this.timezone=r),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=c),this.formattedTime=$.datepicker.formatTime(a.timeFormat,this,a),this.$timeObj&&(this.$timeObj.val(o===a.timeFormat?this.formattedTime+l:$.datepicker.formatTime(o,this,a)+l),this.$timeObj[0].setSelectionRange)){var u=this.$timeObj[0].selectionStart,h=this.$timeObj[0].selectionEnd;this.$timeObj[0].setSelectionRange(u,h)}this.timeDefined=!0,d&&this._updateDateTime()}},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){var t=0<(e=this.inst||e).currentYear?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(e.selectedYear,e.selectedMonth,e.selectedDay),n=$.datepicker._daylightSavingAdjust(t),i=$.datepicker._get(e,"dateFormat"),s=$.datepicker._getFormatConfig(e),r=null!==n&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(i,null===n?new Date:n,s);var a=this.formattedDate;if(""===e.lastVal&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),!0===this._defaults.timeOnly&&!1===this._defaults.timeOnlyShowDate?a=this.formattedTime:(!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||r)||!0===this._defaults.timeOnly&&!0===this._defaults.timeOnlyShowDate)&&(a+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=a,this._defaults.showTimepicker)if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(a);var o="",l=null!==this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,c=null!==this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(o=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===n?new Date:n,s):this.formattedDate)&&(o+=l),o+=null!==this._defaults.altTimeFormat?$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+c:this.formattedTime+c,this.$altInput.val(o)}else this.$input.val(a);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!==e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(e){$.timepicker.log(e)}}},_controls:{slider:{create:function(n,e,i,t,s,r,a){var o=n._defaults.isRTL;return e.prop("slide",null).slider({orientation:"horizontal",value:o?-1*t:t,min:o?-1*r:s,max:o?-1*s:r,step:a,slide:function(e,t){n.control.value(n,$(this),i,o?-1*t.value:t.value),n._onTimeChange()},stop:function(e,t){n._onSelectHandler()}})},options:function(e,t,n,i,s){if(e._defaults.isRTL){if("string"==typeof i)return"min"===i||"max"===i?void 0!==s?t.slider(i,-1*s):Math.abs(t.slider(i)):t.slider(i);var r=i.min,a=i.max;return i.min=i.max=null,void 0!==r&&(i.max=-1*r),void 0!==a&&(i.min=-1*a),t.slider(i)}return"string"==typeof i&&void 0!==s?t.slider(i,s):t.slider(i)},value:function(e,t,n,i){return e._defaults.isRTL?void 0!==i?t.slider("value",-1*i):Math.abs(t.slider("value")):void 0!==i?t.slider("value",i):t.slider("value")}},select:{create:function(t,e,n,i,s,r,a){for(var o='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+n+'" data-min="'+s+'" data-max="'+r+'" data-step="'+a+'">',l=t._defaults.pickerTimeFormat||t._defaults.timeFormat,c=s;c<=r;c+=a)o+='<option value="'+c+'"'+(c===i?" selected":"")+">",o+="hour"===n?$.datepicker.formatTime($.trim(l.replace(/[^ht ]/gi,"")),{hour:c},t._defaults):"millisec"===n||"microsec"===n||10<=c?c:"0"+c.toString(),o+="</option>";return o+="</select>",e.children("select").remove(),$(o).appendTo(e).change(function(e){t._onTimeChange(),t._onSelectHandler(),t._afterInject()}),e},options:function(e,t,n,i,s){var r={},a=t.children("select");if("string"==typeof i){if(void 0===s)return a.data(i);r[i]=s}else r=i;return e.control.create(e,t,a.data("unit"),a.val(),0<=r.min?r.min:a.data("min"),r.max||a.data("max"),r.step||a.data("step"))},value:function(e,t,n,i){var s=t.children("select");return void 0!==i?s.val(i):s.val()}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(t){var n=arguments;return"string"==typeof(t=t||{})?"getDate"===t||"option"===t&&2===n.length&&"string"==typeof n[1]?$.fn.datepicker.apply($(this[0]),n):this.each(function(){var e=$(this);e.datepicker.apply(e,n)}):this.each(function(){var e=$(this);e.datepicker($.timepicker._newInst(e,t)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,n,i,s){var r=parseDateTimeInternal(e,t,n,i,s);if(r.timeObj){var a=r.timeObj;r.date.setHours(a.hour,a.minute,a.second,a.millisec),r.date.setMicroseconds(a.microsec)}return r.date},$.datepicker.parseTime=function(e,t,n){var i=extendRemove(extendRemove({},$.timepicker._defaults),n||{}),s=(e.replace(/\'.*?\'/g,"").indexOf("Z"),function(e,t,r){var n,i="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t,n,i,s=e.length;switch(e.charAt(0).toLowerCase()){case"h":case"m":case"s":return 1===s?"(\\d?\\d)":"(\\d{"+s+"})";case"l":case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return t=r.amNames,n=r.pmNames,i=[],t&&$.merge(i,t),n&&$.merge(i,n),"("+(i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")})).join("|")+")?";default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+r.timeSuffix+"$",s=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),n={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(t)for(var i=0;i<t.length;i++)-1===n[t[i].toString().charAt(0)]&&(n[t[i].toString().charAt(0)]=i+1);return n}(e),a="",o={hour:0,minute:0,second:0,millisec:0,microsec:0};return!!(n=t.match(new RegExp(i,"i")))&&(-1!==s.t&&(void 0===n[s.t]||0===n[s.t].length?(a="",o.ampm=""):(a=-1!==$.inArray(n[s.t].toUpperCase(),$.map(r.amNames,function(e,t){return e.toUpperCase()}))?"AM":"PM",o.ampm=r["AM"===a?"amNames":"pmNames"][0])),-1!==s.h&&("AM"===a&&"12"===n[s.h]?o.hour=0:"PM"===a&&"12"!==n[s.h]?o.hour=parseInt(n[s.h],10)+12:o.hour=Number(n[s.h])),-1!==s.m&&(o.minute=Number(n[s.m])),-1!==s.s&&(o.second=Number(n[s.s])),-1!==s.l&&(o.millisec=Number(n[s.l])),-1!==s.c&&(o.microsec=Number(n[s.c])),-1!==s.z&&void 0!==n[s.z]&&(o.timezone=$.timepicker.timezoneOffsetNumber(n[s.z])),o)});return"function"==typeof i.parse?i.parse(e,t,i):"loose"===i.parse?function(t,n,i){try{var e=new Date("2012-01-01 "+n);if(isNaN(e.getTime())&&(e=new Date("2012-01-01T"+n),isNaN(e.getTime())&&(e=new Date("01/01/2012 "+n),isNaN(e.getTime()))))throw"Unable to parse time with native Date: "+n;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisec:e.getMilliseconds(),microsec:e.getMicroseconds(),timezone:-1*e.getTimezoneOffset()}}catch(e){try{return s(t,n,i)}catch(e){$.timepicker.log("Unable to parse \ntimeString: "+n+"\ntimeFormat: "+t)}}return!1}(e,t,i):s(e,t,i)},$.datepicker.formatTime=function(e,t,n){n=n||{},n=$.extend({},$.timepicker._defaults,n),t=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},t);var i=e,s=n.amNames[0],r=parseInt(t.hour,10);return 11<r&&(s=n.pmNames[0]),i.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){switch(e){case"HH":return("0"+r).slice(-2);case"H":return r;case"hh":return("0"+convert24to12(r)).slice(-2);case"h":return convert24to12(r);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"c":return("00"+t.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===t.timezone?n.timezone:t.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===t.timezone?n.timezone:t.timezone,!0);case"T":return s.charAt(0).toUpperCase();case"TT":return s.toUpperCase();case"t":return s.charAt(0).toLowerCase();case"tt":return s.toLowerCase();default:return e.replace(/'/g,"")}})},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var n,i=this._getInst($(e)[0]),s=this._get(i,"timepicker");s&&i.settings.showTimepicker?(s._limitMinMaxDateTime(i,!0),n=i.inline,i.inline=i.stay_open=!0,this._base_selectDate(e,t),i.inline=n,i.stay_open=!1,this._notifyChange(i),this._updateDatepicker(i)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==t||"boolean"==typeof e.stay_open&&!1!==e.stay_open)){this._base_updateDatepicker(e);var n=this._get(e,"timepicker");n&&n._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),n=$.datepicker._get(t,"timepicker");if(n&&$.datepicker._get(t,"constrainInput")){var i=n.support.ampm,s=null!==n._defaults.showTimezone?n._defaults.showTimezone:n.support.timezone,r=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),a=n._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,i?"APM":"").replace(/Tt/g,i?"AaPpMm":"").replace(/tT/g,i?"AaPpMm":"").replace(/T/g,i?"AP":"").replace(/tt/g,i?"apm":"").replace(/t/g,i?"ap":"")+" "+n._defaults.separator+n._defaults.timeSuffix+(s?n._defaults.timezoneList.join(""):"")+n._defaults.amNames.join("")+n._defaults.pmNames.join("")+r,o=String.fromCharCode(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||o<" "||!r||-1<a.indexOf(o)}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var n=t._defaults.altField;if(n){var i=(t._defaults.altFormat||t._defaults.dateFormat,this._getDate(e)),s=$.datepicker._getFormatConfig(e),r="",a=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,o=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,l=null!==t._defaults.altTimeFormat?t._defaults.altTimeFormat:t._defaults.timeFormat;r+=$.datepicker.formatTime(l,t,t._defaults)+o,t._defaults.timeOnly||t._defaults.altFieldTimeOnly||null===i||(r=t._defaults.altFormat?$.datepicker.formatDate(t._defaults.altFormat,i,s)+a+r:t.formattedDate+a+r),$(n).val(e.input.val()?r:"")}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),n=$.datepicker._get(t,"timepicker");if(n&&n._defaults.timeOnly&&t.input.val()!==t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(e){$.timepicker.log(e)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]);this._base_gotoToday(e);var n=this._get(t,"timepicker");if(n){var i=$.timepicker.timezoneOffsetNumber(n.timezone),s=new Date;s.setMinutes(s.getMinutes()+s.getTimezoneOffset()+parseInt(i,10)),this._setTime(t,s),this._setDate(t,s),n._onSelectHandler()}},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var n=this._get(t,"timepicker");$(e).datepicker("getDate"),n&&(t.settings.showTimepicker=!1,n._defaults.showTimepicker=!1,n._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var n=this._get(t,"timepicker");$(e).datepicker("getDate"),n&&(t.settings.showTimepicker=!0,n._defaults.showTimepicker=!0,n._addTimePicker(t),n._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var n=this._get(e,"timepicker");if(n){var i=n._defaults;n.hour=t?t.getHours():i.hour,n.minute=t?t.getMinutes():i.minute,n.second=t?t.getSeconds():i.second,n.millisec=t?t.getMilliseconds():i.millisec,n.microsec=t?t.getMicroseconds():i.microsec,n._limitMinMaxDateTime(e,!0),n._onTimeChange(),n._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,n){var i=this._getInst(e);if(i){var s,r=this._get(i,"timepicker");if(r)this._setDateFromField(i),t&&("string"==typeof t?(r._parseTime(t,n),(s=new Date).setHours(r.hour,r.minute,r.second,r.millisec),s.setMicroseconds(r.microsec)):(s=new Date(t.getTime())).setMicroseconds(t.getMicroseconds()),"Invalid Date"===s.toString()&&(s=void 0),this._setTime(i,s))}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var n=this._getInst(e),i=t;if(n){"string"==typeof t&&((i=new Date(t)).getTime()||(this._base_setDateDatepicker.apply(this,arguments),i=$(e).datepicker("getDate")));var s,r=this._get(n,"timepicker");i instanceof Date?(s=new Date(i.getTime())).setMicroseconds(i.getMicroseconds()):s=i,r&&s&&(r.support.timezone||null!==r._defaults.timezone||(r.timezone=-1*s.getTimezoneOffset()),i=$.timepicker.timezoneAdjust(i,$.timepicker.timezoneOffsetString(-i.getTimezoneOffset()),r.timezone),s=$.timepicker.timezoneAdjust(s,$.timepicker.timezoneOffsetString(-s.getTimezoneOffset()),r.timezone)),this._updateDatepicker(n),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,s,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var n=this._getInst(e);if(n){var i=this._get(n,"timepicker");if(i){void 0===n.lastVal&&this._setDateFromField(n,t);var s,r=this._getDate(n);return s=i.$altInput&&i._defaults.altFieldTimeOnly?i.$input.val()+" "+i.$altInput.val():"INPUT"!==i.$input.get(0).tagName&&i.$altInput?i.$altInput.val():i.$input.val(),r&&i._parseTime(s,!n.settings.timeOnly)&&(r.setHours(i.hour,i.minute,i.second,i.millisec),r.setMicroseconds(i.microsec),null!=i.timezone&&(i.support.timezone||null!==i._defaults.timezone||(i.timezone=-1*r.getTimezoneOffset()),r=$.timepicker.timezoneAdjust(r,i.timezone,$.timepicker.timezoneOffsetString(-r.getTimezoneOffset())))),r}return this._base_getDateDatepicker(e,t)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(t,n,i){var s;try{s=this._base_parseDate(t,n,i)}catch(e){if(!(0<=e.indexOf(":")))throw e;s=this._base_parseDate(t,n.substring(0,n.length-(e.length-e.indexOf(":")-2)),i),$.timepicker.log("Error parsing the date string: "+e+"\ndate string = "+n+"\ndate format = "+t)}return s},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e,t,n,i){var s=this._get(e,"timepicker");return s?(s._updateDateTime(e),s.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,n){var i,s=this._getInst(e);if(!s)return null;var r=this._get(s,"timepicker");if(r){var a,o,l,c,d=null,u=null,h=null,p=r._defaults.evnts,f={};if("string"==typeof t){if("minDate"===t||"minDateTime"===t)d=n;else if("maxDate"===t||"maxDateTime"===t)u=n;else if("onSelect"===t)h=n;else if(p.hasOwnProperty(t)){if(void 0===n)return p[t];f[t]=n,i={}}}else if("object"==typeof t)for(a in t.minDate?d=t.minDate:t.minDateTime?d=t.minDateTime:t.maxDate?u=t.maxDate:t.maxDateTime&&(u=t.maxDateTime),p)p.hasOwnProperty(a)&&t[a]&&(f[a]=t[a]);for(a in f)f.hasOwnProperty(a)&&(p[a]=f[a],i||(i=$.extend({},t)),delete i[a]);if(i&&isEmptyObject(i))return;if(d?(d=0===d?new Date:new Date(d),r._defaults.minDate=d,r._defaults.minDateTime=d):u?(u=0===u?new Date:new Date(u),r._defaults.maxDate=u,r._defaults.maxDateTime=u):h&&(r._defaults.onSelect=h),d||u)return l=(c=$(e)).datetimepicker("getDate"),o=this._base_optionDatepicker.call($.datepicker,e,i||t,n),c.datetimepicker("setDate",l),o}return void 0===n?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,i||t,n)};var isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},extendRemove=function(e,t){for(var n in $.extend(e,t),t)(null===t[n]||void 0===t[n])&&(e[n]=t[n]);return e},detectSupport=function(e){var t=e.replace(/'.*?'/g,"").toLowerCase(),n=function(e,t){return-1!==e.indexOf(t)};return{hour:n(t,"h"),minute:n(t,"m"),second:n(t,"s"),millisec:n(t,"l"),microsec:n(t,"c"),timezone:n(t,"z"),ampm:n(t,"t")&&n(e,"h"),iso8601:n(e,"Z")}},convert24to12=function(e){return 0===(e%=12)&&(e=12),String(e)},computeEffectiveSetting=function(e,t){return e&&e[t]?e[t]:$.timepicker._defaults[t]},splitDateTime=function(e,t){var n=computeEffectiveSetting(t,"separator"),i=computeEffectiveSetting(t,"timeFormat").split(n).length,s=e.split(n),r=s.length;return 1<r?{dateString:s.splice(0,r-i).join(n),timeString:s.splice(0,i).join(n)}:{dateString:e,timeString:""}},parseDateTimeInternal=function(e,t,n,i,s){var r,a,o;if(a=splitDateTime(n,s),r=$.datepicker._base_parseDate(e,a.dateString,i),""===a.timeString)return{date:r};if(!(o=$.datepicker.parseTime(t,a.timeString,s)))throw"Wrong time format";return{date:r,timeObj:o}},selectLocalTimezone=function(e,t){if(e&&e.timezone_select){var n=t||new Date;e.timezone_select.val(-n.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(e,t){if(isNaN(e)||840<e||e<-720)return e;var n=e%60,i=(e-n)/60,s=t?":":"",r=(0<=e?"+":"-")+("0"+Math.abs(i)).slice(-2)+s+("0"+Math.abs(n)).slice(-2);return"+00:00"===r?"Z":r},$.timepicker.timezoneOffsetNumber=function(e){var t=e.toString().replace(":","");return"Z"===t.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(t)?("-"===t.substr(0,1)?-1:1)*(60*parseInt(t.substr(1,2),10)+parseInt(t.substr(3,2),10)):parseInt(e,10)},$.timepicker.timezoneAdjust=function(e,t,n){var i=$.timepicker.timezoneOffsetNumber(t),s=$.timepicker.timezoneOffsetNumber(n);return isNaN(s)||e.setMinutes(e.getMinutes()+-i- -s),e},$.timepicker.timeRange=function(e,t,n){return $.timepicker.handleRange("timepicker",e,t,n)},$.timepicker.datetimeRange=function(e,t,n){$.timepicker.handleRange("datetimepicker",e,t,n)},$.timepicker.dateRange=function(e,t,n){$.timepicker.handleRange("datepicker",e,t,n)},$.timepicker.handleRange=function(o,l,c,d){function n(e,t){var n=l[o]("getDate"),i=c[o]("getDate"),s=e[o]("getDate");if(null!==n){var r=new Date(n.getTime()),a=new Date(n.getTime());r.setMilliseconds(r.getMilliseconds()+d.minInterval),a.setMilliseconds(a.getMilliseconds()+d.maxInterval),0<d.minInterval&&i<r?c[o]("setDate",r):0<d.maxInterval&&a<i?c[o]("setDate",a):i<n&&t[o]("setDate",s)}}function t(e,t,n){if(e.val()){var i=e[o].call(e,"getDate");null!==i&&0<d.minInterval&&("minDate"===n&&i.setMilliseconds(i.getMilliseconds()+d.minInterval),"maxDate"===n&&i.setMilliseconds(i.getMilliseconds()-d.minInterval)),i.getTime&&t[o].call(t,"option",n,i)}}d=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},d);var e=!1;return"timepicker"===o&&(e=!0,o="datetimepicker"),$.fn[o].call(l,$.extend({timeOnly:e,onClose:function(e,t){n($(this),c)},onSelect:function(e){t($(this),c,"minDate")}},d,d.start)),$.fn[o].call(c,$.extend({timeOnly:e,onClose:function(e,t){n($(this),l)},onSelect:function(e){t($(this),l,"maxDate")}},d,d.end)),n(l,c),t(l,c,"minDate"),t(c,l,"maxDate"),$([l.get(0),c.get(0)])},$.timepicker.log=function(){window.console&&window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+Math.floor(e/1e3)),this.microseconds=e%1e3,this}),$.timepicker.version="1.6.3"}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(c){c.extend(c.fn,{validate:function(e){if(this.length){var i=c.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new c.validator(e,this[0]),c.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.settings.submitHandler&&(i.submitButton=e.target),c(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==c(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(n){function e(){var e,t;return!i.settings.submitHandler||(i.submitButton&&(e=c("<input type='hidden'/>").attr("name",i.submitButton.name).val(c(i.submitButton).val()).appendTo(i.currentForm)),t=i.settings.submitHandler.call(i,i.currentForm,n),i.submitButton&&e.remove(),void 0!==t&&t)}return i.settings.debug&&n.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,e()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):e():(i.focusInvalid(),!1)})),i)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,n;return c(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,t=c(this[0].form).validate(),this.each(function(){e=t.element(this)&&e,n=n.concat(t.errorList)}),t.errorList=n),e},rules:function(e,t){var n,i,s,r,a,o,l=this[0];if(e)switch(n=c.data(l.form,"validator").settings,i=n.rules,s=c.validator.staticRules(l),e){case"add":c.extend(s,c.validator.normalizeRule(t)),delete s.messages,i[l.name]=s,t.messages&&(n.messages[l.name]=c.extend(n.messages[l.name],t.messages));break;case"remove":return t?(o={},c.each(t.split(/\s/),function(e,t){o[t]=s[t],delete s[t],"required"===t&&c(l).removeAttr("aria-required")}),o):(delete i[l.name],s)}return(r=c.validator.normalizeRules(c.extend({},c.validator.classRules(l),c.validator.attributeRules(l),c.validator.dataRules(l),c.validator.staticRules(l)),l)).required&&(a=r.required,delete r.required,r=c.extend({required:a},r),c(l).attr("aria-required","true")),r.remote&&(a=r.remote,delete r.remote,r=c.extend(r,{remote:a})),r}}),c.extend(c.expr[":"],{blank:function(e){return!c.trim(""+c(e).val())},filled:function(e){return!!c.trim(""+c(e).val())},unchecked:function(e){return!c(e).prop("checked")}}),c.validator=function(e,t){this.settings=c.extend(!0,{},c.validator.defaults,e),this.currentForm=t,this.init()},c.validator.format=function(n,e){return 1===arguments.length?function(){var e=c.makeArray(arguments);return e.unshift(n),c.validator.format.apply(this,e)}:(2<arguments.length&&e.constructor!==Array&&(e=c.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),c.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})}),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==c.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){"radio"===e.type?this.findByName(e.name).addClass(t).removeClass(n):c(e).addClass(t).removeClass(n)},unhighlight:function(e,t,n){"radio"===e.type?this.findByName(e.name).removeClass(t).addClass(n):c(e).removeClass(t).addClass(n)}},setDefaults:function(e){c.extend(c.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"S'il vous plaît, mettez une adresse email valide.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t=c.data(this.form,"validator"),n="on"+e.type.replace(/^validate/,""),i=t.settings;i[n]&&!c(this).is(i.ignore)&&i[n].call(t,this,e)}this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};c.each(this.settings.groups,function(n,e){"string"==typeof e&&(e=e.split(/\s/)),c.each(e,function(e,t){i[t]=n})}),n=this.settings.rules,c.each(n,function(e,t){n[e]=c.validator.normalizeRule(t)}),c(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&c(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),c(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t=this.clean(e),n=this.validationTargetFor(t),i=!0;return void 0===(this.lastElement=n)?delete this.invalid[t.name]:(this.prepareElement(n),this.currentElements=c(n),(i=!1!==this.check(n))?delete this.invalid[n.name]:this.invalid[n.name]=!0),c(e).attr("aria-invalid",!i),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){for(var e in c.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[e],element:this.findByName(e)[0]});this.successList=c.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var e,t=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,"");else t.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===c.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var e=this,t={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in t||!e.objectLength(c(this).rules()))&&(t[this.name]=!0)})},clean:function(e){return c(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return c(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),this.toHide=c([]),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t,n=c(e),i=e.type;return"radio"===i||"checkbox"===i?this.findByName(e.name).filter(":checked").val():"number"===i&&void 0!==e.validity?!e.validity.badInput&&n.val():"string"==typeof(t=n.val())?t.replace(/\r/g,""):t},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,i,s=c(t).rules(),r=c.map(s,function(e,t){return t}).length,a=!1,o=this.elementValue(t);for(n in s){i={method:n,parameters:s[n]};try{if("dependency-mismatch"===(e=c.validator.methods[n].call(this,o,t,i.parameters))&&1===r){a=!0;continue}if(a=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,i),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),e}}if(!a)return this.objectLength(s)&&this.successList.push(t),!0},customDataMessage:function(e,t){return c(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||c(e).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){return this.findDefined(this.customMessage(e.name,t),this.customDataMessage(e,t),!this.settings.ignoreTitle&&e.title||void 0,c.validator.messages[t],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t.method),i=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,t.parameters,e):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),t.parameters)),this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n,i,s,r=this.errorsFor(e),a=this.idOrName(e),o=c(e).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(t)):(n=r=c("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(n=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement(n,c(e)):n.insertAfter(e),r.is("label")?r.attr("for",a):0===r.parents("label[for='"+a+"']").length&&(s=r.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),o?o.match(new RegExp("\\b"+s+"\\b"))||(o+=" "+s):o=s,c(e).attr("aria-describedby",o),(i=this.groups[e.name])&&c.each(this.groups,function(e,t){t===i&&c("[name='"+e+"']",this.currentForm).attr("aria-describedby",r.attr("id"))}))),!t&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,e)),this.toShow=this.toShow.add(r)},errorsFor:function(e){var t=this.idOrName(e),n=c(e).attr("aria-describedby"),i="label[for='"+t+"'], label[for='"+t+"'] *";return n&&(i=i+", #"+n.replace(/\s+/g,", #")),this.errors().filter(i)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),c(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return c(this.currentForm).find("[name='"+e+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return c("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!c(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!c.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return c.data(e,"previousValue")||c.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})},destroy:function(){this.resetForm(),c(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:c.extend(this.classRuleSettings,e)},classRules:function(e){var t={},n=c(e).attr("class");return n&&c.each(n.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(t,c.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,n,i){/min|max/.test(n)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?e[n]=i:t===n&&"range"!==t&&(e[n]=!0)},attributeRules:function(e){var t,n,i={},s=c(e),r=e.getAttribute("type");for(t in c.validator.methods)"required"===t?(""===(n=e.getAttribute(t))&&(n=!0),n=!!n):n=s.attr(t),this.normalizeAttributeRule(i,r,t,n);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var t,n,i={},s=c(e),r=e.getAttribute("type");for(t in c.validator.methods)n=s.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),this.normalizeAttributeRule(i,r,t,n);return i},staticRules:function(e){var t={},n=c.data(e.form,"validator");return n.settings.rules&&(t=c.validator.normalizeRule(n.settings.rules[e.name])||{}),t},normalizeRules:function(i,s){return c.each(i,function(e,t){if(!1!==t){if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!c(t.depends,s.form).length;break;case"function":n=t.depends.call(s,s)}n?i[e]=void 0===t.param||t.param:delete i[e]}}else delete i[e]}),c.each(i,function(e,t){i[e]=c.isFunction(t)?t(s):t}),c.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){var e;i[this]&&(c.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(e=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(e[0]),Number(e[1])]))}),c.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength)),i},normalizeRule:function(e){if("string"==typeof e){var t={};c.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,n){c.validator.methods[e]=t,c.validator.messages[e]=void 0!==n?n:c.validator.messages[e],t.length<3&&c.validator.addClassRules(e,c.validator.normalizeRule(e))},methods:{required:function(e,t,n){if(!this.depend(n,t))return"dependency-mismatch";if("select"===t.nodeName.toLowerCase()){var i=c(t).val();return i&&0<i.length}return this.checkable(t)?0<this.getLength(e,t):0<e.length},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n,i,s=0,r=0,a=!1;if((e=e.replace(/\D/g,"")).length<13||19<e.length)return!1;for(n=e.length-1;0<=n;n--)i=e.charAt(n),r=parseInt(i,10),a&&9<(r*=2)&&(r-=9),s+=r,a=!a;return s%10==0},minlength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n<=i},maxlength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i<=n},rangelength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i>=n[0]&&i<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},equalTo:function(e,t,n){var i=c(n);return this.settings.onfocusout&&i.off(".validate-equalTo").on("blur.validate-equalTo",function(){c(t).valid()}),e===i.val()},remote:function(r,a,e){if(this.optional(a))return"dependency-mismatch";var o,t,l=this.previousValue(a);return this.settings.messages[a.name]||(this.settings.messages[a.name]={}),l.originalMessage=this.settings.messages[a.name].remote,this.settings.messages[a.name].remote=l.message,e="string"==typeof e&&{url:e}||e,l.old===r?l.valid:(l.old=r,(o=this).startRequest(a),(t={})[a.name]=r,c.ajax(c.extend(!0,{mode:"abort",port:"validate"+a.name,dataType:"json",data:t,context:o.currentForm,success:function(e){var t,n,i,s=!0===e||"true"===e;o.settings.messages[a.name].remote=l.originalMessage,s?(i=o.formSubmitted,o.prepareElement(a),o.formSubmitted=i,o.successList.push(a),delete o.invalid[a.name],o.showErrors()):(t={},n=e||o.defaultMessage(a,"remote"),t[a.name]=l.message=c.isFunction(n)?n(r):n,o.invalid[a.name]=!0,o.showErrors(t)),l.valid=s,o.stopRequest(a,s)}},e)),"pending")}}});var i,s={};c.ajaxPrefilter?c.ajaxPrefilter(function(e,t,n){var i=e.port;"abort"===e.mode&&(s[i]&&s[i].abort(),s[i]=n)}):(i=c.ajax,c.ajax=function(e){var t=("mode"in e?e:c.ajaxSettings).mode,n=("port"in e?e:c.ajaxSettings).port;return"abort"===t?(s[n]&&s[n].abort(),s[n]=i.apply(this,arguments),s[n]):i.apply(this,arguments)})}),jQuery(document).ready(function(n){showMore();var i,s,r=n("#testimonials");i=r.outerWidth(),s=0,r.find(".testimonial").each(function(e){n("#t_pagers").find(".pager:eq(0)").addClass("active"),0==e&&n(this).addClass("active"),n(this).height()>s&&(s=n(this).height());var t=e*i;n(this).css("left",t),r.find("#test_container").height(s)}),n(".pager").on("click",function(e){e.preventDefault(),next=n(this).index(".pager"),clearInterval(t),moveIt(next)});var t=setInterval(function(){var e=n(".testimonial.active").index(".testimonial");e==n(".testimonial").length-1?next=0:next=e+1,moveIt(next)},6e3)}),$('a[href^="#!"]').on("click",function(e){e.preventDefault(),$(document).off("scroll"),$("a").each(function(){$(this).removeClass("activeurl")}),$(this).addClass("activeurl");var t=this.hash;$target=$(t),$("html, body").stop().animate({scrollTop:$target.offset().top+2},600,"swing",function(){window.location.hash=t,$(document).on("scroll",onScroll)})}),$(window).scroll(function(){300<$(this).scrollTop()?$("#single-fix-menu-desktop").fadeIn():$("#single-fix-menu-desktop").fadeOut()}),$(window).scroll(function(){200<$(this).scrollTop()?$("#sidebar-fixed").fadeIn():$(this).scrollTop()<20?$("#sidebar-fixed").css("margin-top","130px"):$("#sidebar-fixed").css("margin-top","-20px")}),$(window).scroll(function(){$(document).height()<=$(window).height()+$(window).scrollTop()&&$("#sidebar-fixed").hide()}),$(document).ready(function(){$(".search_results").click(function(){$("#mapHide").hide(),$("#search_results").show(),$(this).addClass("active"),$(".search_listing_map").removeClass("active")}),$(".search_listing_map").click(function(){$("#search_results").hide(),$("#mapHide").show(),$(this).addClass("active"),$(".search_results").removeClass("active")})}),$(document).ready(function(){$("#search_form_adv").validate({rules:{location:{required:!0}},messages:{location:{required:"Please enter location"}},errorPlacement:function(e,t){$(t).closest("div").find(".help-block").html(e.html()),$("#shakemediv").addClass("animated shake"),$("#location").val("Los Angeles")},highlight:function(e){$(e).closest("div").removeClass("has-success").addClass("has-error")},unhighlight:function(e,t,n){$(e).closest("div").removeClass("has-error").addClass("has-success"),$(e).closest("div").find(".help-block").html("")},submitHandler:function(e){return $.ajax({url:site_url+"search/results",type:"GET",data:$("#search_form_adv").serialize()+"&ajax=1",dataType:"html",success:function(e){$("#sorted_listings").html(e)}}),!1}}),$(".effect-goliath figcaption").click(function(){var e=$(this).attr("data-href");window.location.href=e}),$(document).on("click",".ajax_pagingsearc a",function(e){e.preventDefault(),console.log("pagination activated");var t=$(this).attr("data-href"),n=$(this).attr("pagination-page"),i=$(this).attr("ajax-page");if("current"!=t){var s=$("#search_form").serialize()+"&page="+n+"&ajax="+i;$.ajax({type:"GET",data:s,url:t,beforeSend:function(){$("#search_loader").show()},success:function(e){console.log("======================================================================================="),$("#sorted_listings").html(e),$(".map-list-loader-container").hide()},complete:function(){$("#search_loader").hide()},error:function(e,t){alert(e.status),0===e.status||404==e.status||500==e.status||"parsererror"===t||"timeout"===t||"abort"===t||e.responseText},timeout:5e3})}return!1}),$("#more_link").click(function(){$("#more_filters").toggle("slow")}),jQuery.ajaxSetup({beforeSend:function(){$("#search_results").addClass("loading")},complete:function(){$("#search_results").removeClass("loading")}})}),$(".close").on("click",function(){$(".form").validate().resetForm()}),$(document).ready(function(){}),$(function(){$("#sidebar_nav li a").on("click",function(){var e=site_url+"pages/load_page_data/",t=$(this).attr("id");console.log(t),$(this).parent().addClass("selected").siblings().removeClass("selected"),"add-listing"==t?window.location=site_url+"listings/add-listing":"contact"==t?window.location=site_url+"contact":$.ajax({type:"POST",cache:!1,url:e,data:{slug:t},async:!1,success:function(e){e&&($(".my-profile").html(e),"press"==t&&showMore())}})}),$("#sort_agents").change(function(){var e=$(this).val(),t=$("#agent_id").val(),n=$("#type").val(),i=site_url+"agents/detail/";$.ajax({type:"POST",cache:!1,url:i,data:{sorttype:e,agent_id:t,type:n},async:!1,success:function(e){if(e){$(".property-listing").html(e),$('[data-toggle="tooltip"]').tooltip();var t=$(".actions li");t.on("click",function(){var e=$(this);e.children(".share_tooltip").hasClass("in")?e.children(".share_tooltip").removeClass("in"):(t.children(".share_tooltip").removeClass("in"),e.children(".share_tooltip").addClass("in"))})}}})}),$(document).on("change","#sort_properties",function(e){e.preventDefault();var t=$("#sortForm").serialize(),n=site_url+"search/index/";$.ajax({type:"POST",cache:!1,url:n,data:t,async:!1,beforeSend:function(){$("#search_loader").show()},complete:function(){$("#search_loader").hide()},success:function(e){if(e){$("#sorted_listings").html(e),$('[data-toggle="tooltip"]').tooltip();var t=$(".actions li");t.on("click",function(){var e=$(this);e.children(".share_tooltip").hasClass("in")?e.children(".share_tooltip").removeClass("in"):(t.children(".share_tooltip").removeClass("in"),e.children(".share_tooltip").addClass("in"))})}}})}),$("#sort_agent_properties").change(function(){var e=$(this).val(),t=$("#agent_id").val(),n=$(".property_tabs li a.active").attr("id"),i=site_url+"agents/detail/";$.ajax({type:"POST",cache:!1,url:i,data:{sorttype:e,agent_id:t,ptype:n},async:!1,beforeSend:function(){$("#loading").show()},complete:function(){$("#loading").hide()},success:function(e){if($("#search_partial").html(e),e){$("#agent_properties").html(e),$('[data-toggle="tooltip"]').tooltip();var t=$(".actions li");t.on("click",function(){var e=$(this);e.children(".share_tooltip").hasClass("in")?e.children(".share_tooltip").removeClass("in"):(t.children(".share_tooltip").removeClass("in"),e.children(".share_tooltip").addClass("in"))})}}})})});var popupSize={width:780,height:550};function validate_search_form(){$("#search_form").validate({submitHandler:function(e){$("input").each(function(e,t){""==$(t).val()&&$(t).remove()}),$(form).submit()},rules:{location:{required:{depends:function(){return $(this).val($.trim($(this).val())),!0}},location:!0}},messages:{location:{required:"Merci de sélectionner une adresse valide d’après nos suggestions"}},errorPlacement:function(e,t){$(t).closest("div").find(".help-block").html(e.html()),$("#shakemediv").addClass("animated shake")},highlight:function(e){$(e).closest("div").removeClass("has-success").addClass("has-error")},unhighlight:function(e,t,n){$(e).closest("div").removeClass("has-error").addClass("has-success"),$(e).closest("div").find(".help-block").html("")}})}function view_phone(e){console.log(e);$(this);$.ajax({url:site_url+"agents/showPhoneNumber",type:"POST",data:{id:e},dataType:"html",beforeSend:function(){$(".view_phone").button("loading")},success:function(e){$(".view_phone").fadeOut(1e3),$(".view_phone").button("reset"),$(".phoneno").html(e),$(".view_phone").prop("onclick",null)},error:function(e){alert("Error occured.please try again")}})}$("#add_appointment").submit(function(){var e=jQuery('input[name="time_to"]').val(),t=jQuery('input[name="time_from"]').val(),n=new Date,i=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear(),s=new Date(i+" "+t).getHours();if(1<new Date(i+" "+e).getHours()-s){var r=$("#add_appointment").serialize(),a=site_url+"appointments/add_availability/";$.ajax({type:"POST",url:a,data:r}).done(function(e){e?($(".availability_form")[0].reset(),$("#response").html('<div class="alert alert-success"><button class="close" data-dismiss="alert"></button> Your appointments has been added successfully!</div>'),setTimeout(function(){location.reload()},3e3)):$("#response").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Whoops! something wrong,try again later.</div>')})}else $("#timeres").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button>minimum time should be One hour</div>'),$("#timeres").fadeOut(2e3);return!1}),$("#set_appointment").submit(function(){var e=$("#set_appointment").serialize(),t=site_url+"appointments/set_appointment/";return $.ajax({type:"POST",url:t,data:e}).done(function(e){e?($("#set_appointment")[0].reset(),$("#responsemessage").html('<div class="alert alert-success"><button class="close" data-dismiss="alert"></button> Your appointments has been set successfully!</div>')):$("#responsemessage").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Whoops! something wrong,try again later.</div>')}),!1}),$(document).ready(function(){$("#current_living").change(function(){this.checked?$("#prev_res").show():$("#prev_res").hide()}),$("#location").blur(function(){$(this).val($.trim($(this).val()))})}),$("#agent_search").click(function(e){e.preventDefault();var t=$(this);$.ajax({url:site_url+"agents/searchByFilters",type:"POST",data:$("#agent_search_form").serialize(),dataType:"html",beforeSend:function(){$(".ajax-loader_icon").show(),t.prop("disabled",!0)},success:function(e){$(".ajax-loader_icon").hide(),$("#content-area").html(e),t.prop("disabled",!1)},error:function(e){t.prop("disabled",!1),alert("Error occured.please try again")}})}),$(".agent_contact_info").click(function(e){console.log("agent_info"),e.preventDefault();var t=$(this),n=t.attr("id");$.ajax({url:site_url+"agents/update_topup_balance",type:"POST",data:{id:n},dataType:"html",beforeSend:function(){t.prop("disabled",!0)},success:function(e){e<5?$("#agentInfo").modal("show"):$("#companyInfo").modal("show"),t.prop("disabled",!1)},error:function(e){t.prop("disabled",!1),alert("Error occured.please try again")}})}),$(document).ready(function(){setTimeout(function(){$(".som-cl").trigger("click"),$("#search_form").attr("action",site_url+"agents/searchByFilters")},5)});var count=0;function IfQuickContactForm(){$("#msg_responce").show().html('<div  class="alert alert-danger"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Your account is not activated yet,Please confirm your email address before using this feature.</div>')}function validatelatlon(){setTimeout(function(){var e=document.getElementById("lat").value,t=document.getElementById("lng").value;console.log(e+t);var n=new RegExp("^(()([-+]?)([d]{1,2})(((.)(d+)(,)))(s*)(([-+]?)([d]{1,3})((.)(d+))?()))$");n.exec(e)?console.log("lat _success"):console.log("lat _error"),n.exec(t)?console.log("long _success"):console.log("long _error")},1e3)}function view_application(e,t){$("#model_title").empty(),$("#model_title").html(e),$("#pop-viewApp").modal({show:!0}),$("#loaded_data").load(t),$("div.apply_tab").each(function(){$(this).removeClass("in"),$(this).removeClass("active")}),$(".login-tabs li").each(function(){$(this).removeClass("active"),$(".login-tabs li#about_me").addClass("active")})}function imageIsLoaded(e){$("#previewing").attr("src",e.target.result),$("#previewing").attr("width","150px"),$("#previewing").attr("height","150px")}function listingimageIsLoaded(e){$("#previewing").attr("src",e.target.result),$("#previewing").attr("width","220px"),$("#previewing").attr("height","200px")}function submitFile(){for(var e=site_url+"listings/listing_preview_image_upload",t=document.getElementById("listing_file").files.length,n=new FormData,i=0;i<t;i++){var s=document.getElementById("listing_file").files[i];n.append("listingfile",s)}$.ajax({url:e,type:"POST",data:n,async:!1,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e,t,n){e?$("#listing_response").html('<div class="alert alert-success"><button class="close" data-dismiss="alert"></button>Preview image upload successfully</div>'):$("#listing_response").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> You have some errors. Please try again.</div>')},error:function(e,t,n){console.log("Fileupload error")}})}function UpcomingTripsMaps(e,t,n){new Array,new Array,new google.maps.InfoWindow;var i,s={scrollwheel:!1,zoom:14,center:new google.maps.LatLng(t,n),mapTypeId:google.maps.MapTypeId.ROADMAP};i=new google.maps.Map(document.getElementById("map_"+e),s);new google.maps.Circle({strokeColor:"#9D7F48",strokeOpacity:.8,strokeWeight:2,fillColor:"#9D7F48",fillOpacity:.35,map:i,center:i.center,radius:250})}function TripsMaps(e,t,n){google.maps.event.addDomListener(window,"load",UpcomingTripsMaps(e,t,n))}function ApproveModel(t){var e=site_url+"booking/ApproveModel/",n={bid:t};$.ajax({type:"POST",cache:!1,url:e,data:n,async:!1,success:function(e){$("#ApprovemodelWrap").html(e),$("#approvemodel"+t).modal("show")}})}function ContactHostDashboard(t){var e=site_url+"dashboard/contactHost/",n={bid:t};$.ajax({type:"POST",cache:!1,url:e,data:n,async:!1,success:function(e){$("#ContactHostDashboardWrap").html(e),$("#ContactHostDashboard"+t).modal("show")}})}$("li").click(function(e){$("input[placeholder], textarea[placeholder]").blur();var t=$(this).attr("id");$("#looking_for").attr("value",t),"rent"==t?$("#location").attr("placeholder","Localisation").blur():"sell"==t?$("#location").attr("placeholder","Localisation").blur():"any"==t&&$("#location").attr("placeholder","Localisation").blur()}),$(".agent_tab_swticher").click(function(e){var t=$(this).attr("id");console.log(t),e.preventDefault(),e.stopPropagation(),$(".za-track-event").removeClass("za-track-event").addClass("search-tab"),$(this).addClass("za-track-event").removeClass("search-tab")}),$(".tab_swticher").click(function(e){count+=1;var t=$(this).attr("id");console.log(t),1<count&&("property"==t?($(".splash-inner-media").css("background-image","url("+site_url+"assets/img/landing-bedroom.jpg)"),$("#search_form").attr("action",site_url+"search")):($(".splash-inner-media").css("background-image","url("+site_url+"assets/img/landing-img.jpg)"),$("#search_form").attr("action",site_url+"agents/searchByFilters"))),e.preventDefault(),e.stopPropagation(),$(".za-track-event").removeClass("za-track-event").addClass("search-tab"),$(this).addClass("za-track-event").removeClass("search-tab")}),function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.iziToast=t(e)}("undefined"!=typeof global?global:window||this.window||this.global,function(e){"use strict";var t={},o="iziToast",l=(document.querySelector("body"),!!/Mobi/.test(navigator.userAgent)),r=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),a="undefined"!=typeof InstallTrigger,c="ontouchstart"in document.documentElement,n=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],i={},d={id:null,class:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",image:"",imageWidth:50,maxWidth:null,zindex:null,layout:1,balloon:!1,close:!0,closeOnEscape:!1,rtl:!1,position:"bottomRight",target:"",targetFirst:!0,toastOnce:!1,timeout:5e3,animateInside:!0,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof window.CustomEvent){var s=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};s.prototype=window.Event.prototype,window.CustomEvent=s}var u=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(n,e[i],i,e);else if(e)for(var s=0,r=e.length;s<r;s++)t.call(n,e[s],s,e)},h=function(n,i){var s={};return u(n,function(e,t){s[t]=n[t]}),u(i,function(e,t){s[t]=i[t]}),s},p=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t},f={move:function(e,t,n,i){var s;0!==i&&(e.classList.add(o+"-dragged"),e.style.transform="translateX("+i+"px)",0<i?(s=(180-i)/180)<.3&&t.hide(e,h(n,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),"drag"):(s=(180+i)/180)<.3&&t.hide(e,h(n,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),"drag"),(e.style.opacity=s)<.3&&((r||a)&&(e.style.left=i+"px"),e.parentNode.style.opacity=.3,this.stopMoving(e,null)))},startMoving:function(n,i,s,e){e=e||window.event;var t=c?e.touches[0].clientX:e.clientX,r=n.style.transform.replace("px)",""),a=t-(r=r.replace("translateX(",""));n.classList.remove(s.transitionIn),n.classList.remove(s.transitionInMobile),n.style.transition="",c?document.ontouchmove=function(e){e.preventDefault();var t=(e=e||window.event).touches[0].clientX-a;f.move(n,i,s,t)}:document.onmousemove=function(e){e.preventDefault();var t=(e=e||window.event).clientX-a;f.move(n,i,s,t)}},stopMoving:function(e,t){c?document.ontouchmove=function(){}:document.onmousemove=function(){},e.style.opacity="",e.style.transform="",e.classList.contains(o+"-dragged")&&(e.classList.remove(o+"-dragged"),e.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout(function(){e.style.transition=""},400))}};return t.destroy=function(){u(document.querySelectorAll("."+o+"-wrapper"),function(e,t){e.remove()}),u(document.querySelectorAll("."+o),function(e,t){e.remove()}),document.removeEventListener(o+"-opened",{},!1),document.removeEventListener(o+"-opening",{},!1),document.removeEventListener(o+"-closing",{},!1),document.removeEventListener(o+"-closed",{},!1),document.removeEventListener("keyup",{},!1),i={}},t.settings=function(e){t.destroy(),d=h(d,(i=e)||{})},u({info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},function(n,e){t[e]=function(e){var t=h(i,e||{});t=h(n,t||{}),this.show(t)}}),t.progress=function(e,t,n){var i=this,s=h(i.settings,t||{}),r=e.querySelector("."+o+"-progressbar div");return{start:function(){null!==r&&(r.style.transition="width "+s.timeout+"ms "+s.progressBarEasing,r.style.width="0%"),s.TIME.START=(new Date).getTime(),s.TIME.END=s.TIME.START+s.timeout,s.TIME.TIMER=setTimeout(function(){clearTimeout(s.TIME.TIMER),e.classList.contains(o+"-closing")||(i.hide(e,s,"timeout"),"function"==typeof n&&n.apply(i))},s.timeout)},pause:function(){if(s.TIME.REMAINING=s.TIME.END-(new Date).getTime(),clearTimeout(s.TIME.TIMER),null!==r){var e=window.getComputedStyle(r).getPropertyValue("width");r.style.transition="none",r.style.width=e}"function"==typeof n&&setTimeout(function(){n.apply(i)},10)},resume:function(){null!==r&&(r.style.transition="width "+s.TIME.REMAINING+"ms "+s.progressBarEasing,r.style.width="0%"),s.TIME.END=(new Date).getTime()+s.TIME.REMAINING,s.TIME.TIMER=setTimeout(function(){clearTimeout(s.TIME.TIMER),e.classList.contains(o+"-closing")||(i.hide(e,s,"timeout"),"function"==typeof n&&n.apply(i))},s.TIME.REMAINING)},reset:function(){clearTimeout(s.TIME.TIMER),null!==r&&(r.style.transition="none",r.style.width="100%"),"function"==typeof n&&setTimeout(function(){n.apply(i)},10)}}},t.hide=function(t,e,n){var i=h(this.settings,e||{});n=n||null,"object"!=typeof t&&(t=document.querySelector(t)),t.classList.add(o+"-closing"),i.closedBy=n,i.REF=t.getAttribute("data-iziToast-ref"),function(){var e=document.querySelector("."+o+"-overlay");if(null!==e){var t=e.getAttribute("data-iziToast-ref"),n=(t=t.split(",")).indexOf(i.REF);-1!==n&&t.splice(n,1),e.setAttribute("data-iziToast-ref",t.join()),0===t.length&&(e.classList.remove("fadeIn"),e.classList.add("fadeOut"),setTimeout(function(){e.remove()},700))}}(),(i.transitionIn||i.transitionInMobile)&&(t.classList.remove(i.transitionIn),t.classList.remove(i.transitionInMobile)),l||window.innerWidth<=568?i.transitionOutMobile&&t.classList.add(i.transitionOutMobile):i.transitionOut&&t.classList.add(i.transitionOut);var s=t.parentNode.offsetHeight;t.parentNode.style.height=s+"px",t.style.pointerEvents="none",(!l||568<window.innerWidth)&&(t.parentNode.style.transitionDelay="0.2s");try{i.closedBy=n;var r=new CustomEvent(o+"-closing",{detail:i,bubbles:!0,cancelable:!0});document.dispatchEvent(r)}catch(e){console.warn(e)}setTimeout(function(){t.parentNode.style.height="0px",t.parentNode.style.overflow="",setTimeout(function(){t.parentNode.remove();try{i.closedBy=n;var e=new CustomEvent(o+"-closed",{detail:i,bubbles:!0,cancelable:!0});document.dispatchEvent(e)}catch(e){console.warn(e)}void 0!==i.onClosed&&i.onClosed.apply(null,[i,t,n])},1e3)},200),void 0!==i.onClosing&&i.onClosing.apply(null,[i,t,n])},t.show=function(e){var s=this,r=h(i,e||{});if((r=h(d,r)).TIME={},r.toastOnce&&r.id&&0<document.querySelectorAll("."+o+"#"+r.id).length)return!1;r.REF=(new Date).getTime()+Math.floor(1e7*Math.random()+1);var a={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),icon:document.createElement("i"),cover:document.createElement("div"),buttons:document.createElement("div"),wrapper:null};a.toast.setAttribute("data-iziToast-ref",r.REF),a.toast.appendChild(a.toastBody),a.toastCapsule.appendChild(a.toast),function(){if(a.toast.classList.add(o),a.toast.classList.add(o+"-opening"),a.toastCapsule.classList.add(o+"-capsule"),a.toastBody.classList.add(o+"-body"),a.toastTexts.classList.add(o+"-texts"),l||window.innerWidth<=568?r.transitionInMobile&&a.toast.classList.add(r.transitionInMobile):r.transitionIn&&a.toast.classList.add(r.transitionIn),r.class){var e=r.class.split(" ");u(e,function(e,t){a.toast.classList.add(e)})}var t;r.id&&(a.toast.id=r.id),r.rtl&&a.toast.classList.add(o+"-rtl"),1<r.layout&&a.toast.classList.add(o+"-layout"+r.layout),r.balloon&&a.toast.classList.add(o+"-balloon"),r.maxWidth&&(isNaN(r.maxWidth)?a.toast.style.maxWidth=r.maxWidth:a.toast.style.maxWidth=r.maxWidth+"px"),""===r.theme&&"light"===r.theme||a.toast.classList.add(o+"-theme-"+r.theme),r.color&&("#"==(t=r.color).substring(0,1)||"rgb"==t.substring(0,3)||"hsl"==t.substring(0,3)?a.toast.style.background=r.color:a.toast.classList.add(o+"-color-"+r.color)),r.backgroundColor&&(a.toast.style.background=r.backgroundColor,r.balloon&&(a.toast.style.borderColor=r.backgroundColor))}(),r.image&&(a.cover.classList.add(o+"-cover"),a.cover.style.width=r.imageWidth+"px",function(e){try{return btoa(atob(e))==e}catch(e){return!1}}(r.image.replace(/ /g,""))?a.cover.style.backgroundImage="url(data:image/png;base64,"+r.image.replace(/ /g,"")+")":a.cover.style.backgroundImage="url("+r.image+")",r.rtl?a.toastBody.style.marginRight=r.imageWidth+10+"px":a.toastBody.style.marginLeft=r.imageWidth+10+"px",a.toast.appendChild(a.cover)),r.close?(a.buttonClose=document.createElement("button"),a.buttonClose.classList.add(o+"-close"),a.buttonClose.addEventListener("click",function(e){e.target,s.hide(a.toast,r,"button")}),a.toast.appendChild(a.buttonClose)):r.rtl?a.toast.style.paddingLeft="20px":a.toast.style.paddingRight="20px",r.timeout&&(r.progressBar&&(a.progressBar=document.createElement("div"),a.progressBarDiv=document.createElement("div"),a.progressBar.classList.add(o+"-progressbar"),a.progressBarDiv.style.background=r.progressBarColor,a.progressBar.appendChild(a.progressBarDiv),a.toast.appendChild(a.progressBar)),r.pauseOnHover&&!r.resetOnHover&&(a.toast.addEventListener("mouseenter",function(e){this.classList.add(o+"-paused"),s.progress(a.toast,r).pause()}),a.toast.addEventListener("mouseleave",function(e){this.classList.remove(o+"-paused"),s.progress(a.toast,r).resume()})),r.resetOnHover&&(a.toast.addEventListener("mouseenter",function(e){this.classList.add(o+"-reseted"),s.progress(a.toast,r).reset()}),a.toast.addEventListener("mouseleave",function(e){this.classList.remove(o+"-reseted"),s.progress(a.toast,r).start()}))),r.icon&&(a.icon.setAttribute("class",o+"-icon "+r.icon),r.iconText&&a.icon.appendChild(document.createTextNode(r.iconText)),r.rtl?a.toastBody.style.paddingRight="33px":a.toastBody.style.paddingLeft="33px",r.iconColor&&(a.icon.style.color=r.iconColor),a.toastBody.appendChild(a.icon)),0<r.title.length&&(a.strong=document.createElement("strong"),a.strong.classList.add(o+"-title"),a.strong.appendChild(p(r.title)),a.toastTexts.appendChild(a.strong),r.titleColor&&(a.strong.style.color=r.titleColor),r.titleSize&&(isNaN(r.titleSize)?a.strong.style.fontSize=r.titleSize:a.strong.style.fontSize=r.titleSize+"px"),r.titleLineHeight&&(isNaN(r.titleSize)?a.strong.style.lineHeight=r.titleLineHeight:a.strong.style.lineHeight=r.titleLineHeight+"px")),0<r.message.length&&(a.p=document.createElement("p"),a.p.classList.add(o+"-message"),a.p.appendChild(p(r.message)),a.toastTexts.appendChild(a.p),r.messageColor&&(a.p.style.color=r.messageColor),r.messageSize&&(isNaN(r.titleSize)?a.p.style.fontSize=r.messageSize:a.p.style.fontSize=r.messageSize+"px"),r.messageLineHeight&&(isNaN(r.titleSize)?a.p.style.lineHeight=r.messageLineHeight:a.p.style.lineHeight=r.messageLineHeight+"px")),0<r.title.length&&0<r.message.length&&(r.rtl?a.strong.style.marginLeft="10px":2===r.layout||r.rtl||(a.strong.style.marginRight="10px")),a.toastBody.appendChild(a.toastTexts),0<r.buttons.length&&(a.buttons.classList.add(o+"-buttons"),0<r.title.length&&0===r.message.length&&(r.rtl?a.strong.style.marginLeft="15px":a.strong.style.marginRight="15px"),0<r.message.length&&(r.rtl?a.p.style.marginLeft="15px":a.p.style.marginRight="15px",a.p.style.marginBottom="0"),u(r.buttons,function(t,e){a.buttons.appendChild(p(t[0]));var n=a.buttons.childNodes;n[e].classList.add(o+"-buttons-child"),t[2]&&setTimeout(function(){n[e].focus()},300),n[e].addEventListener("click",function(e){return e.preventDefault(),(0,t[1])(s,a.toast)})})),a.toastBody.appendChild(a.buttons),a.toastCapsule.style.visibility="hidden",setTimeout(function(){var e=a.toast.offsetHeight,t=a.toast.currentStyle||window.getComputedStyle(a.toast),n=t.marginTop;n=n.split("px"),n=parseInt(n[0]);var i=t.marginBottom;i=i.split("px"),i=parseInt(i[0]),a.toastCapsule.style.visibility="",a.toastCapsule.style.height=e+i+n+"px",setTimeout(function(){a.toastCapsule.style.height="auto",r.target&&(a.toastCapsule.style.overflow="visible")},500),r.timeout&&s.progress(a.toast,r).start()},100),function(){var e=r.position;if(r.target)a.wrapper=document.querySelector(r.target),a.wrapper.classList.add(o+"-target"),r.targetFirst?a.wrapper.insertBefore(a.toastCapsule,a.wrapper.firstChild):a.wrapper.appendChild(a.toastCapsule);else{if(-1==n.indexOf(r.position))return console.warn("["+o+"] Incorrect position.\nIt can be › "+n);e=l||window.innerWidth<=568?"bottomLeft"==r.position||"bottomRight"==r.position||"bottomCenter"==r.position?o+"-wrapper-bottomCenter":"topLeft"==r.position||"topRight"==r.position||"topCenter"==r.position?o+"-wrapper-topCenter":o+"-wrapper-center":o+"-wrapper-"+e,a.wrapper=document.querySelector("."+o+"-wrapper."+e),a.wrapper||(a.wrapper=document.createElement("div"),a.wrapper.classList.add(o+"-wrapper"),a.wrapper.classList.add(e),document.body.appendChild(a.wrapper)),"topLeft"==r.position||"topCenter"==r.position||"topRight"==r.position?a.wrapper.insertBefore(a.toastCapsule,a.wrapper.firstChild):a.wrapper.appendChild(a.toastCapsule)}isNaN(r.zindex)?console.warn("["+o+"] Invalid zIndex."):a.wrapper.style.zIndex=r.zindex}(),r.overlay&&(null!==document.querySelector("."+o+"-overlay.fadeIn")?(a.overlay=document.querySelector("."+o+"-overlay"),a.overlay.setAttribute("data-iziToast-ref",a.overlay.getAttribute("data-iziToast-ref")+","+r.REF),isNaN(r.zindex)||null===r.zindex||(a.overlay.style.zIndex=r.zindex-1)):(a.overlay.classList.add(o+"-overlay"),a.overlay.classList.add("fadeIn"),a.overlay.style.background=r.overlayColor,a.overlay.setAttribute("data-iziToast-ref",r.REF),isNaN(r.zindex)||null===r.zindex||(a.overlay.style.zIndex=r.zindex-1),document.querySelector("body").appendChild(a.overlay)),r.overlayClose?(a.overlay.removeEventListener("click",{}),a.overlay.addEventListener("click",function(e){s.hide(a.toast,r,"overlay")})):a.overlay.removeEventListener("click",{})),function(){if(r.animateInside){a.toast.classList.add(o+"-animateInside");var e=[200,100,300];if("bounceInLeft"==r.transitionIn&&(e=[400,200,400]),0<r.title.length&&setTimeout(function(){a.strong.classList.add("slideIn")},e[0]),0<r.message.length&&setTimeout(function(){a.p.classList.add("slideIn")},e[1]),r.icon&&setTimeout(function(){a.icon.classList.add("revealIn")},e[2]),0<r.buttons.length&&a.buttons){var n=150;u(a.buttons.childNodes,function(e,t){setTimeout(function(){e.classList.add("revealIn")},n),n+=150})}}}(),r.onOpening.apply(null,[r,a.toast]);try{var t=new CustomEvent(o+"-opening",{detail:r,bubbles:!0,cancelable:!0});document.dispatchEvent(t)}catch(e){console.warn(e)}setTimeout(function(){a.toast.classList.remove(o+"-opening"),a.toast.classList.add(o+"-opened");try{var e=new CustomEvent(o+"-opened",{detail:r,bubbles:!0,cancelable:!0});document.dispatchEvent(e)}catch(e){console.warn(e)}r.onOpened.apply(null,[r,a.toast])},1e3),r.drag&&(c?(a.toast.addEventListener("touchstart",function(e){f.startMoving(this,s,r,e)},!1),a.toast.addEventListener("touchend",function(e){f.stopMoving(this,e)},!1)):(a.toast.addEventListener("mousedown",function(e){e.preventDefault(),f.startMoving(this,s,r,e)},!1),a.toast.addEventListener("mouseup",function(e){e.preventDefault(),f.stopMoving(this,e)},!1))),r.closeOnEscape&&document.addEventListener("keyup",function(e){27==(e=e||window.event).keyCode&&s.hide(a.toast,r,"esc")}),s.toast=a.toast},t}),jQuery(document).ready(function(e){e("#file").change(function(){var e=this.files[0].type,t=["image/jpeg","image/png","image/jpg"];if(e!=t[0]&&e!=t[1]&&e!=t[2])return alert("Please Select A valid Image File.Only jpeg, jpg and png Images type allowed"),!1;var n=new FileReader;n.onload=imageIsLoaded,n.readAsDataURL(this.files[0])}),e("#listing_file").change(function(){var e=this.files[0].type,t=["image/jpeg","image/png","image/jpg"];if(e!=t[0]&&e!=t[1]&&e!=t[2])return alert("Please Select A valid Image File.Only jpeg, jpg and png Images type allowed"),!1;var n=new FileReader;n.onload=listingimageIsLoaded,n.readAsDataURL(this.files[0])})}),$(document).on("click","#contacthost",function(e){e.preventDefault();var t=$("#contacthostform").serialize(),n=site_url+"Inbox/contact_host/";return $.ajax({type:"POST",cache:!1,url:n,data:t,success:function(e){e?$("#contact_response").html('<div class="alert alert-success"><button class="close" data-dismiss="alert"></button>You successfully messaged your selected agents. Expect a response soon!</div>'):$("#contact_response").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Whoops! something wrong,try again later.</div>')},async:!1}),!1}),$(function(){$("#Manual").hide(),$("#Calendar").hide(),$("#availability_through").change(function(){"Calendar"==$("#availability_through").val()?($("#Calendar").show(),$("#Manual").hide()):($("#Calendar").hide(),$("#Manual").show())})});var room=1;function addFloor(){room++;var e=document.getElementById("plan_box"),t=document.createElement("tr");t.setAttribute("class","removeclass"+room);t.innerHTML='<td class="row-sort"></td><td class="sort-middle"><div class="sort-inner-block"><div class="row"><div class="col-sm-4 col-xs-6"><div class="form-group"><label for="planTitle">Plan Title</label><input name="title[]" type="text" id="planTitle" class="form-control"></div></div><div class="col-sm-4 col-xs-6"><div class="form-group"><label for="planSize">Plan Size</label><input name="size[]" type="number" id="planSize" class="form-control"></div></div><div class="col-sm-4 col-xs-6"><div class="form-group"><label for="planBedrooms">Plan Bedrooms</label><input name="beds[]" type="number" id="planBedrooms" class="form-control"></div></div><div class="col-sm-4 col-xs-6"> <div class="form-group"><label for="planBathrooms">Plan Bathrooms</label><input name="bath[]" type="number" id="planBathrooms" class="form-control"></div></div><div class="col-sm-4 col-xs-6"><div class="form-group"><label for="planPrice">Plan Price</label><input name="price[]" type="number" step="any" id="planPrice" class="form-control"></div></div><div class="col-sm-4 col-xs-6"><div class="form-group"><label for="planImage">Plan Image</label><input type="file" name="userFile[]" class="file"><div class="file-upload-block"><input name="" type="text" id="planImage" class="form-control" disabled placeholder="Upload Image"><button class="browse btn btn-primary" type="button">Select</button></div></div></div><div class="col-sm-12 col-xs-12"><label for="planDescription">Plan Description</label><textarea name="description[]" rows="4" id="planDescription" class="form-control"></textarea></div></div></div></td><td class="row-remove"><span onclick="remove_floor_plan('+room+');" class="remove"><i class="fa fa-remove"></i></span></td>',e.prepend(t)}function remove_floor_plan(e){$(".removeclass"+e).remove()}function addDocument(){room++;var e=document.getElementById("add-attachment"),t=document.createElement("tr");t.setAttribute("class","removedoc"+room);t.innerHTML='<td class="row-sort"></td><td class="sort-middle"><div class="sort-inner-block"><div class="row"><div class="col-sm-6 col-xs-6"><div class="form-group"><label for="planTitle">Title</label><input name="doc_title[]" type="text" id="" class="form-control"></div></div><div class="col-sm-6 col-xs-6"><div class="form-group"><label for="planImage">Image</label><input type="file" name="docFile[]" class="file"><div class="file-upload-block"><input name="" type="text" id="planImage" class="form-control" disabled placeholder="Upload Image"><button class="browse btn btn-primary" type="button">Select</button></div></div></div></div></div></td><td class="row-remove"><span onclick="remove_more_media('+room+');" class="remove"><i class="fa fa-remove"></i></span></td>',e.prepend(t)}function remove_more_media(e){$(".removedoc"+e).remove()}function toggleThis(){$(".addMember-block").slideToggle("2000","swing",function(){})}function deleteAppointment(t){if(confirm("Are you sure your want to delete?")){var e=site_url+"listings/delete_floor_plan/";return $.ajax({type:"POST",url:e,data:{id:t}}).done(function(e){e?($(".row_"+t).hide(),$("#response").html('<div class="alert alert-success"><button class="close" data-dismiss="alert"></button> Floor has been deleted successfully!</div>')):$("#response").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Whoops! something wrong,try again later.</div>')}),!1}}function AddExistingMember(){var e=$("#agent_exist").serialize(),t=site_url+"agents/AddExistingTeamMember/";$.ajax({type:"POST",cache:!1,url:t,data:e,dataType:"html",success:function(e){"success"==e?($("#response").html('<div class="alert alert-success"><button class="close" data-dismiss="alert"></button>Membre de l’équipe ajouter avec succès!</div>'),$("#agent_exist").trigger("reset"),getAllMembers()):"error"==e?$("#response").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Whoops! something wrong,try again later.</div>'):$("#response").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button>'+e+"</div>")},async:!0})}function getAllMembers(){var e=site_url+"agents/getAgentMembers/";$.ajax({type:"POST",cache:!1,url:e,dataType:"html",beforeSend:function(){$("#loading").show()},success:function(e){e?($("#loading").hide(),$(".team_members").html(e)):$(".team_members").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Whoops! something wrong,try again later.</div>')},async:!0})}function addRecommendation(){$("#user_recommendation").validate({ignore:"input[type='text']:hidden",rules:{poster_name:{required:!0},poster_email:{required:!0},recommendation:{required:!0}}});var e=site_url+"agents/userRecommendation/",t=$("#user_recommendation").serialize();$.ajax({type:"POST",cache:!1,url:e,data:t,dataType:"html",beforeSend:function(){$("#loading").show()},success:function(e){1==e?($("#loading").hide(),$("#user_recommendation").trigger("reset"),$("#response_suc").html("You successfully submitted your recommendation."),setTimeout(function(){window.location.reload(1)},2e3)):0==e?$("#response_suc").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Whoops! something wrong,try again later.</div>'):$("#response").html(e)},async:!0})}function appStatusCancel(i,s,r){iziToast.show({color:"light",icon:"iziToast-icon ico-question revealIn",overlay:!0,close:!1,closeOnEscape:!0,title:"Hey",message:"Voulez-vous confirmer cette action?",position:"center",backgroundColor:"rgba(255,249,178,0.9)",progressBarColor:"rgba(255,249,178,0.9)",buttons:[["<button><b>Oui</b></button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button");var n=site_url+"index.php/appointments/app_status_cancel/";$.ajax({type:"POST",cache:!1,url:n,data:{id:i,ualid:s,usid:r},dataType:"html",success:function(e){1==e?(console.log("called"),$("#response").show().html('<div  class="alert alert-success"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Your Appointment has been mark as cancel</div>'),$("#response").fadeOut(1e3),setTimeout(function(){window.location.reload(1)},3e3)):$("#response").html('<div  class="alert alert-danger"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Something went wrong,please try agian later! </div>')}})},!0],["<button>NOn</button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button")}]]})}function userStatusCancel(i,s){iziToast.show({color:"light",icon:"iziToast-icon ico-question revealIn",overlay:!0,close:!1,closeOnEscape:!0,title:"Hey",message:"Voulez-vous confirmer cette action?",position:"center",backgroundColor:"rgba(255,249,178,0.9)",progressBarColor:"rgba(255,249,178,0.9)",buttons:[["<button><b>Oui</b></button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button");var n=site_url+"index.php/appointments/app_userstatus_cancel/";$.ajax({type:"POST",cache:!1,url:n,data:{id:i,listing_id:s},dataType:"html",success:function(e){1==e?(console.log("called"),$("#response").show().html('<div  class="alert alert-success"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Your Appointment has been mark as cancel</div>'),$("#response").fadeOut(1e3),setTimeout(function(){window.location.reload(1)},3e3)):$("#response").html('<div  class="alert alert-danger"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Something went wrong,please try agian later! </div>')}})},!0],["<button>NOn</button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button")}]]})}function appStatusConfirm(i,s,r,a){iziToast.show({color:"light",icon:"iziToast-icon ico-question revealIn",overlay:!0,close:!1,closeOnEscape:!0,title:"Hey",message:"Voulez-vous confirmer cette action?",position:"center",backgroundColor:"rgba(255,249,178,0.9)",progressBarColor:"rgba(255,249,178,0.9)",buttons:[["<button><b>Oui</b></button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button");var n=site_url+"index.php/appointments/app_status_confirm/";$.ajax({type:"POST",cache:!1,url:n,data:{id:i,ualid:s,usid:r,appointment_time:a},dataType:"html",success:function(e){1==e?(console.log("called"),$("#response").show().html('<div  class="alert alert-success"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Your Appointment has been mark as confirm</div>'),$("#response").fadeOut(1e3),setTimeout(function(){window.location.reload(1)},3e3)):$("#response").html('<div  class="alert alert-danger"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Something went wrong,please try agian later! </div>')}})},!0],["<button>NOn</button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button")}]]})}function existing_member(){$("#agent_exist").toggle(),$("#agent_registration").hide()}function new_member(){$("#agent_registration").toggle(),$("#agent_exist").hide()}function initMap(){var e={lat:-25.363,lng:131.044},t=new google.maps.Map(document.getElementById("map"),{zoom:4,center:e});new google.maps.Marker({position:e,map:t,title:"Hello World!"})}function applyHovers(){$("#agent_properties .item-wrap").hover(function(){$(this).attr("data_id");$(this).css({background:""});$(this).attr("data_id")},function(){$(this).attr("data_id")})}function HomeControl(e,t){e.style.padding="5px";var n=document.createElement("div");n.className="toggle_mapsearch",e.appendChild(n)}$(document).on("click",".browse",function(){$(this).parent().parent().parent().find(".file").trigger("click")}),$(document).on("change",".file",function(){$(this).parent().find(".form-control").val($(this).val().replace(/C:\\fakepath\\/i,""))}),$(document).ready(function(){$(".viewmore").each(function(){var e=$(this).html();if(150<e.length){var t=e.substr(0,150)+'<span class="moreellipses">...&nbsp;</span><span class="morecontent"><span>'+e.substr(150,e.length-150)+'</span>&nbsp;&nbsp;<a href="" class="morelink">more ></a></span>';$(this).html(t)}}),$(".morelink").click(function(){return $(this).hasClass("less")?($(this).removeClass("less"),$(this).html("more >")):($(this).addClass("less"),$(this).html("less")),$(this).parent().prev().toggle(),$(this).prev().toggle(),!1})}),$("#agent_registration").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:":not(:visible)",rules:{first_name:{required:!0},last_name:{required:!0},email:{required:!0,email:!0},phone:{required:!0},designation:{required:!0},location:{required:!0},password:{required:!0,minlength:8,maxlength:15}},messages:{first_name:"Le pré nom est requis",last_name:"Le nom est requis",email:"Veuillez entrer un valide email adresse",phone:"Veuillez entrer un numéro de téléphone",designation:"Veuillez entrer la désignation",location:"Veuillez entrer un lieu",password:{required:"Mot de passe requis."}},invalidHandler:function(e,t){},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,t){1===t.closest(".input-icon").size()?e.insertAfter(t.closest(".input-icon")):e.insertAfter(t)},submitHandler:function(e){var t=$("#agent_registration").serialize(),n=site_url+"agents/postAgents/";$.ajax({type:"POST",cache:!1,url:n,data:t,dataType:"html",success:function(e){console.log(e),"success"==e?(console.log("success"),$("#response").html('<div class="alert alert-success"><button class="close" data-dismiss="alert"></button>Membre de l’équipe ajouter avec succès!</div>'),$("#agent_registration").trigger("reset"),getAllMembers()):"error"==e?(console.log("errrrrrr"),$("#response").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button> Whoops! something wrong,try again later.</div>')):(console.log("resssssst"),$("#response").html('<div class="alert alert-danger"><button class="close" data-dismiss="alert"></button>'+e+"</div>"))},async:!0})}}),$(document).on("click",".delete_agent",function(){var i=this.id;iziToast.show({color:"light",icon:"iziToast-icon ico-question revealIn",overlay:!0,close:!1,closeOnEscape:!0,title:"Hey",message:"Voulez-vous confirmer cette action?",position:"center",backgroundColor:"rgba(255,249,178,0.9)",progressBarColor:"rgba(255,249,178,0.9)",buttons:[["<button><b>Oui</b></button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button");var n=site_url+"agents/deleteAgent/";$.ajax({type:"POST",cache:!1,url:n,data:{id:i},dataType:"html",beforeSend:function(){},success:function(e){e?$("#member_"+i).hide(1e3):alert("Whoops! something wrong,try again later")},async:!0})},!0],["<button>NOn</button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button")}]]})}),$(document).on("click",".agent_status",function(){var i=this.id,s=$(this).attr("status");iziToast.show({color:"light",icon:"iziToast-icon ico-question revealIn",overlay:!0,close:!1,closeOnEscape:!0,title:"Hey",message:"voulez-vous confirmer cette action?",position:"center",backgroundColor:"rgba(255,249,178,0.9)",progressBarColor:"rgba(255,249,178,0.9)",buttons:[["<button><b>Oui</b></button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button");var n=site_url+"agents/updateAgentStatus/";$.ajax({type:"POST",cache:!1,url:n,data:{id:i,status:s},beforeSend:function(){},success:function(e){"success"==e?1==s?($(".status_icon_"+i).html('<i class="fa fa-times-circle-o" aria-hidden="true"></i>'),$(".status_icon_"+i).parents("a").css("background-color","#f0ad4e"),$("#"+i).attr("status","0")):($(".status_icon_"+i).html('<i class="fa fa-check-circle-o" aria-hidden="true"></i>'),$(".status_icon_"+i).parents("a").css("background-color","#71c514"),$("#"+i).attr("status","1")):alert("Whoops! something wrong,try again later")}})},!0],["<button>Non</button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button")}]]})}),$(document).on("click",".liststatusupdate",function(){var i=this.id;iziToast.show({color:"light",icon:"iziToast-icon ico-question revealIn",overlay:!0,close:!1,closeOnEscape:!0,title:"Hey",message:"Voulez-vous confirmer cette action?",position:"center",backgroundColor:"rgba(255,249,178,0.9)",progressBarColor:"rgba(255,249,178,0.9)",buttons:[["<button><b>Oui</b></button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button");var n=site_url+"index.php/listings/delete_listing_status/";$.ajax({type:"POST",cache:!1,url:n,data:{id:i},dataType:"html",success:function(e){1==e?(console.log("called"),$("#booking_row_"+i).hide(),$("#response").show().html('<div  class="alert alert-success"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Your listing has been deleted successfully </div>'),$("#response").fadeOut(3e3)):$("#response").html('<div  class="alert alert-danger"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Something went wrong,please try agian later! </div>')}})},!0],["<button>NOn</button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button")}]]})}),$(document).on("click",".soldStatusUpdate",function(){var i=this.id;iziToast.show({color:"light",icon:"iziToast-icon ico-question revealIn",overlay:!0,close:!1,closeOnEscape:!0,title:"Hey",message:"Voulez-vous confirmer cette action?",position:"center",backgroundColor:"rgba(255,249,178,0.9)",progressBarColor:"rgba(255,249,178,0.9)",buttons:[["<button><b>Oui</b></button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button");var n=site_url+"index.php/listings/sold_listing_status/";$.ajax({type:"POST",cache:!1,url:n,data:{id:i},dataType:"html",success:function(e){1==e?(console.log("called"),$("#booking_row_"+i).hide(),$("#response").show().html('<div  class="alert alert-success"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Your listing has been mark as sold </div>'),$("#response").fadeOut(1e3),setTimeout(function(){window.location.reload(1)},3e3)):$("#response").html('<div  class="alert alert-danger"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>Something went wrong,please try agian later! </div>')}})},!0],["<button>NOn</button>",function(e,t){e.hide(t,{transitionOut:"fadeOut"},"button")}]]})}),$("#calendarModal").on("show.bs.modal",function(){$("#startDate").datepicker({dateFormat:"yy-mm-dd",minDate:new Date}),$("#endDate").datepicker({dateFormat:"yy-mm-dd",minDate:new Date}),$("#colorp").spectrum({preferredFormat:"hex",showPaletteOnly:!0,togglePaletteOnly:!0,togglePaletteMoreText:"more",togglePaletteLessText:"less",color:"#587ca3",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]}),$("#startTime, #endTime").timepicker()});var overlayMarkers=[],markersArray=[],map,listing_map,load_map=0;function clearOverlays(){for(var e=0;e<markersArray.length;e++)markersArray[e].setMap(null);markersArray.length=0}function loadSearchMap(){console.log("loadSearchMap"),map=new google.maps.Map(document.getElementById("search_map"),{scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,draggable:!1});var e=document.createElement("div");map.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),setMarkers(map,locations);google.maps.event.addListener(null,"domready",function(){$(".gm-style-iw").hide()})}function loadSaleMap(){map=new google.maps.Map(document.getElementById("sale_map"),{zoom:16,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP});var e=document.createElement("div");new HomeControl(e,map);map.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),setMarkers(map,sales),applyHovers(),mapMoveSearch()}function loadRentMap(){map=new google.maps.Map(document.getElementById("rent_map"),{zoom:16,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP});var e=document.createElement("div");map.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),setMarkers(map,rent),mapMoveSearch()}function loadSoldMap(){map=new google.maps.Map(document.getElementById("sold_map"),{zoom:7,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP});var e=document.createElement("div");new HomeControl(e,map);map.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),setMarkers(map,sold),$("#sold_map").parent().parent().parent().siblings().addClass("class_name"),mapMoveSearch()}function loadListingMap(){console.log("loadlistingmap");var e=new google.maps.LatLngBounds;map=new google.maps.Map(document.getElementById("search_listing_map"),{zoom:12,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP});var t,n,i=new google.maps.InfoWindow;for(n=0;n<locations.length;n++){var s=explode(",",locations[n]),r=new google.maps.LatLng(s[1],s[2]);if("rent"==s[4])var a=new google.maps.MarkerImage(site_url+"/assets/img/marker_rent.png");else a=new google.maps.MarkerImage(site_url+"/assets/img/marker_sale.png");e.extend(r),t=new google.maps.Marker({position:r,icon:a,map:map}),markersArray.push(t);var o=arr_info[s[0]];google.maps.event.addListener(t,"mouseover",function(e,t,n){return function(){n.setContent(t),n.open(map,e)}}(t,o,i)),map.fitBounds(e)}var l=google.maps.event.addListener(map,"bounds_changed",function(e){this.setZoom(12),google.maps.event.removeListener(l)});google.maps.event.addListenerOnce(map,"dragend",function(){mapMoveSearch()})}function loadListingMapNoBounds(e){map=new google.maps.Map(document.getElementById("search_listing_map"),{zoom:12,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP});var t,n,i=new google.maps.InfoWindow;for(n=0;n<locations.length;n++){var s=explode(",",locations[n]),r=new google.maps.LatLng(s[1],s[2]);if("rent"==s[4])var a=new google.maps.MarkerImage(site_url+"/assets/img/marker_rent.png");else a=new google.maps.MarkerImage(site_url+"/assets/img/marker_sale.png");e.extend(r),t=new google.maps.Marker({position:r,icon:a,map:map}),markersArray.push(t);var o=arr_info[s[0]];google.maps.event.addListener(t,"mouseover",function(e,t,n){return function(){n.setContent(t),n.open(map,e)}}(t,o,i)),map.fitBounds(e)}var l=google.maps.event.addListener(map,"bounds_changed",function(e){this.setZoom(12),google.maps.event.removeListener(l)});google.maps.event.addListener(map,"dragend",function(){mapMoveSearch()})}function mapMoveSearch(){var t=map.getBounds(),e=t.getSouthWest(),n=t.getNorthEast();$("#sw_lat").val(e.lat()),$("#sw_lng").val(e.lng()),$("#ne_lat").val(n.lat()),$("#ne_lng").val(n.lng()),$("#search_by_map").val("true"),$.ajax({url:site_url+"search/results",type:"GET",data:$(".search_form").serialize()+"&ajax=1",dataType:"html",beforeSend:function(){$("#search_loader").show()},success:function(e){$("#filtered_search_results").html(e),$("#search_loader").hide(),loadListingMapNoBounds(t)},done:function(e){$("#sw_lat").val(""),$("#sw_lng").val(""),$("#ne_lat").val(""),$("#ne_lng").val(""),$("#search_by_map").val(""),$("#search_loader").hide()}})}function setMarkers(s,e){var t,n=new google.maps.LatLngBounds,r=[];new Array,new google.maps.LatLng(48.8533231,2.2813768),new google.maps.LatLng(48.8136404,2.2723103),new google.maps.LatLng(48.8566839,2.230626),new google.maps.LatLng(48.853334,2.3695111),new google.maps.LatLng(48.9058785,2.2683997),new google.maps.LatLng(48.857759,2.3800536),new google.maps.LatLng(48.8741309,2.2676286);for(t=0;t<e.length;t++){var i=explode(",",e[t]),a=new google.maps.LatLng(i[1],i[2]),o=arr_info[i[0]];overlay=new CustomMarker(a,s,{marker_id:i[0],price:i[3],type:i[4],status:i[5]}),s.setCenter(overlay.getPosition()),n.extend(overlay.getPosition()),google.maps.event.addListener(overlay,"click",function(t,n,i){return function(){if(i&&i.close(),r)for(var e=0;e<r.length;e++)r[e].close();i=new google.maps.InfoWindow({content:n,pixelOffset:new google.maps.Size(0,5)}),r.push(i),google.maps.event.addListener(i,"domready",function(){var e=$(".gm-style-iw"),t=e.prev();t.children(":nth-child(2)").css({display:"none"}),t.children(":nth-child(4)").css({display:"none"}),e.parent().parent().css({left:"30px",top:"10px"}),t.children(":nth-child(1)").hide(),t.children(":nth-child(3)").hide(),t.children(":nth-child(3)").find("div").children().css({"box-shadow":"rgba(72, 181, 233, 0.6) 0px 1px 6px","z-index":"1"});var n=e.next();n.css({opacity:"1",right:"52px",top:"0px"}),$(".iw-content").height()<140&&$(".iw-bottom-gradient").css({display:"none"}),n.mouseout(function(){$(this).css({opacity:"1"})})}),i.open(s,t)}}(overlay,o,null)),overlayMarkers[i[0]]=overlay}s.fitBounds(n);var l=google.maps.event.addListener(s,"idle",function(){s.setZoom(10),google.maps.event.removeListener(l)})}function loadAgentMap(){new Array,new Array,new google.maps.InfoWindow;var e,t={zoom:13,scrollwheel:!1,center:new google.maps.LatLng(37.4419,-122.1419),mapTypeId:google.maps.MapTypeId.ROADMAP};e=new google.maps.Map(document.getElementById("map_canvas"),t);var n=document.getElementById("agent_location");autocomplete=new google.maps.places.Autocomplete(n,{}),autocomplete.bindTo("bounds",e),autocomplete.addListener("place_changed",fillInAgentAddress)}function fillInAgentAddress(){for(var e=autocomplete.getPlace(),t=0;t<e.address_components.length;t++){var n=e.address_components[t].types[0];if("street_number"==n){var i=e.address_components[t].short_name;console.log(i),document.getElementById("agent_street").value=i}if("locality"==n){i=e.address_components[t].long_name;console.log(i),document.getElementById("agent_city").value=i}if("administrative_area_level_1"==n){i=e.address_components[t].long_name;console.log(i),document.getElementById("agent_state").value=i}if("administrative_area_level_1"==n){i=e.address_components[t].short_name;console.log(i),document.getElementById("agent_state_code").value=i}if("country"==n){i=e.address_components[t].long_name;console.log(i),document.getElementById("agent_country").value=i}if("postal_code"==n){i=e.address_components[t].short_name;console.log(i),document.getElementById("agent_zipcode").value=i}}}function loadPlacesMap(){new Array,new Array,new google.maps.InfoWindow;var e,t={zoom:13,scrollwheel:!1,center:new google.maps.LatLng(37.4419,-122.1419),mapTypeId:google.maps.MapTypeId.ROADMAP};e=new google.maps.Map(document.getElementById("map_canvas"),t);var n={},i=document.getElementById("location"),s=document.getElementById("agent_location");autocomplete=new google.maps.places.Autocomplete(i,n),autocomplete_agent=new google.maps.places.Autocomplete(s,n),autocomplete.bindTo("bounds",e),autocomplete_agent.bindTo("bounds",e),autocomplete.addListener("place_changed",fillInAddress)}function fillInAddress(){$(".search_submit").prop("disabled",!1);var e=autocomplete.getPlace();$("#sw_lat").val(""),$("#sw_lng").val(""),$("#ne_lat").val(""),$("#ne_lng").val(""),$("#search_by_map").val("");for(var t=0;t<e.address_components.length;t++){var n=e.address_components[t].types[0];if(console.log(n),"street_number"==n){var i=e.address_components[t].short_name;document.getElementById("street").value=i}if("locality"==n){i=e.address_components[t].long_name;document.getElementById("city").value=i}if("administrative_area_level_1"==n){i=e.address_components[t].long_name;document.getElementById("state").value=i}if("country"==n){i=e.address_components[t].long_name;document.getElementById("country").value=i}if("postal_code"==n){i=e.address_components[t].short_name;document.getElementById("zipcode").value=i}}}function loadAgentMap(){new Array,new Array,new google.maps.InfoWindow;var e,t={zoom:13,scrollwheel:!1,center:new google.maps.LatLng(37.4419,-122.1419),mapTypeId:google.maps.MapTypeId.ROADMAP};e=new google.maps.Map(document.getElementById("map_canvas"),t);var n=document.getElementById("agent_location");autocomplete=new google.maps.places.Autocomplete(n,{}),autocomplete.bindTo("bounds",e),autocomplete.addListener("place_changed",fillInAgentAddress)}function fillInAgentAddress(){for(var e=autocomplete.getPlace(),t=0;t<e.address_components.length;t++){var n=e.address_components[t].types[0];if(console.log(n),"street_number"==n){var i=e.address_components[t].short_name;console.log(i),document.getElementById("agent_street").value=i}if("locality"==n){i=e.address_components[t].long_name;console.log(i),document.getElementById("agent_city").value=i}if("administrative_area_level_1"==n){i=e.address_components[t].long_name;console.log(i),document.getElementById("agent_state").value=i}if("administrative_area_level_1"==n){i=e.address_components[t].short_name;console.log(i),document.getElementById("agent_state_code").value=i}if("country"==n){i=e.address_components[t].long_name;console.log(i),document.getElementById("agent_country").value=i}if("postal_code"==n){i=e.address_components[t].short_name;console.log(i),document.getElementById("agent_zipcode").value=i}}}function LoadUserLocationMap(){new Array,new Array,new google.maps.InfoWindow;var e,t={zoom:13,scrollwheel:!1,center:new google.maps.LatLng(37.4419,-122.1419),mapTypeId:google.maps.MapTypeId.ROADMAP};e=new google.maps.Map(document.getElementById("map_canvas"),t);var n=document.getElementById("user_location");autocomplete=new google.maps.places.Autocomplete(n,{}),autocomplete.bindTo("bounds",e),autocomplete.addListener("place_changed",fillInUserAddress)}function fillInUserAddress(){var e=autocomplete.getPlace();$("#sw_lat").val(""),$("#sw_lng").val(""),$("#ne_lat").val(""),$("#ne_lng").val(""),$("#search_by_map").val("");for(var t=0;t<e.address_components.length;t++){var n=e.address_components[t].types[0];if(console.log(n),"street_number"==n){var i=e.address_components[t].short_name;console.log(i),document.getElementById("user_street").value=i}if("locality"==n){i=e.address_components[t].long_name;console.log(i),document.getElementById("user_city").value=i}if("administrative_area_level_1"==n){i=e.address_components[t].long_name;console.log(i),document.getElementById("user_state").value=i}if("administrative_area_level_1"==n){i=e.address_components[t].short_name;console.log(i),document.getElementById("user_state_code").value=i}if("country"==n){i=e.address_components[t].long_name;console.log(i),document.getElementById("user_country").value=i}if("postal_code"==n){i=e.address_components[t].short_name;console.log(i),document.getElementById("user_zipcode").value=i}}}